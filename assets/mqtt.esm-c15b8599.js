var Ms=Object.defineProperty;var Ls=(s,c,o)=>c in s?Ms(s,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[c]=o;var Qe=(s,c,o)=>(Ls(s,typeof c!="symbol"?c+"":c,o),o),Nr=(s,c,o)=>{if(!c.has(s))throw TypeError("Cannot "+o)};var T=(s,c,o)=>(Nr(s,c,"read from private field"),o?o.call(s):c.get(s)),je=(s,c,o)=>{if(c.has(s))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(s):c.set(s,o)},Me=(s,c,o,l)=>(Nr(s,c,"write to private field"),l?l.call(s,o):c.set(s,o),o);var pr=(s,c,o,l)=>({set _(h){Me(s,c,h,o)},get _(){return T(s,c,l)}}),xe=(s,c,o)=>(Nr(s,c,"access private method"),o);var mn=Object.defineProperty,Us=Object.getOwnPropertyDescriptor,js=Object.getOwnPropertyNames,Ns=Object.prototype.hasOwnProperty,ot=(s,c)=>()=>(s&&(c=s(s=0)),c),ve=(s,c)=>()=>(c||s((c={exports:{}}).exports,c),c.exports),rr=(s,c)=>{for(var o in c)mn(s,o,{get:c[o],enumerable:!0})},Ds=(s,c,o,l)=>{if(c&&typeof c=="object"||typeof c=="function")for(let h of js(c))!Ns.call(s,h)&&h!==o&&mn(s,h,{get:()=>c[h],enumerable:!(l=Us(c,h))||l.enumerable});return s},He=s=>Ds(mn({},"__esModule",{value:!0}),s),ce=ot(()=>{}),Fe={};rr(Fe,{_debugEnd:()=>Oi,_debugProcess:()=>Ti,_events:()=>$i,_eventsCount:()=>Hi,_exiting:()=>di,_fatalExceptions:()=>Ai,_getActiveHandles:()=>ao,_getActiveRequests:()=>so,_kill:()=>bi,_linkedBinding:()=>no,_maxListeners:()=>qi,_preload_modules:()=>Fi,_rawDebug:()=>hi,_startProfilerIdleNotifier:()=>Pi,_stopProfilerIdleNotifier:()=>Ci,_tickCallback:()=>ki,abort:()=>Mi,addListener:()=>Vi,allowedNodeEnvironmentFlags:()=>Ei,arch:()=>Jr,argv:()=>ei,argv0:()=>Di,assert:()=>lo,binding:()=>oi,chdir:()=>li,config:()=>pi,cpuUsage:()=>ar,cwd:()=>ai,debugPort:()=>Ni,default:()=>wn,dlopen:()=>oo,domain:()=>fi,emit:()=>Yi,emitWarning:()=>ni,env:()=>Zr,execArgv:()=>ti,execPath:()=>ji,exit:()=>_i,features:()=>Si,hasUncaughtExceptionCaptureCallback:()=>uo,hrtime:()=>_r,kill:()=>wi,listeners:()=>co,memoryUsage:()=>yi,moduleLoadList:()=>ci,nextTick:()=>ro,off:()=>Ki,on:()=>Et,once:()=>zi,openStdin:()=>vi,pid:()=>Li,platform:()=>Xr,ppid:()=>Ui,prependListener:()=>Ji,prependOnceListener:()=>Xi,reallyExit:()=>gi,release:()=>ui,removeAllListeners:()=>Qi,removeListener:()=>Gi,resourceUsage:()=>mi,setSourceMapsEnabled:()=>Wi,setUncaughtExceptionCaptureCallback:()=>Ii,stderr:()=>xi,stdin:()=>Bi,stdout:()=>Ri,title:()=>Yr,umask:()=>si,uptime:()=>ho,version:()=>ri,versions:()=>ii});function yn(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function Fs(){!Kt||!Vt||(Kt=!1,Vt.length?mt=Vt.concat(mt):hr=-1,mt.length&&to())}function to(){if(!Kt){var s=setTimeout(Fs,0);Kt=!0;for(var c=mt.length;c;){for(Vt=mt,mt=[];++hr<c;)Vt&&Vt[hr].run();hr=-1,c=mt.length}Vt=null,Kt=!1,clearTimeout(s)}}function ro(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];mt.push(new io(s,c)),mt.length===1&&!Kt&&setTimeout(to,0)}function io(s,c){this.fun=s,this.array=c}function nt(){}function no(s){yn("_linkedBinding")}function oo(s){yn("dlopen")}function so(){return[]}function ao(){return[]}function lo(s,c){if(!s)throw new Error(c||"assertion error")}function uo(){return!1}function ho(){return kt.now()/1e3}function _r(s){var c=Math.floor((Date.now()-kt.now())*.001),o=kt.now()*.001,l=Math.floor(o)+c,h=Math.floor(o%1*1e9);return s&&(l=l-s[0],h=h-s[1],h<0&&(l--,h+=vr)),[l,h]}function Et(){return wn}function co(s){return[]}var mt,Kt,Vt,hr,Yr,Jr,Xr,Zr,ei,ti,ri,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,bi,ar,mi,yi,wi,_i,vi,Ei,Si,Ai,Ii,ki,Ti,Oi,Pi,Ci,Ri,xi,Bi,Mi,Li,Ui,ji,Ni,Di,Fi,Wi,kt,Dr,vr,qi,$i,Hi,Vi,zi,Ki,Gi,Qi,Yi,Ji,Xi,wn,Ws=ot(()=>{ce(),de(),fe(),mt=[],Kt=!1,hr=-1,io.prototype.run=function(){this.fun.apply(null,this.array)},Yr="browser",Jr="x64",Xr="browser",Zr={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},ei=["/usr/bin/node"],ti=[],ri="v16.8.0",ii={},ni=function(s,c){console.warn((c?c+": ":"")+s)},oi=function(s){yn("binding")},si=function(s){return 0},ai=function(){return"/"},li=function(s){},ui={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},hi=nt,ci=[],fi={},di=!1,pi={},gi=nt,bi=nt,ar=function(){return{}},mi=ar,yi=ar,wi=nt,_i=nt,vi=nt,Ei={},Si={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Ai=nt,Ii=nt,ki=nt,Ti=nt,Oi=nt,Pi=nt,Ci=nt,Ri=void 0,xi=void 0,Bi=void 0,Mi=nt,Li=2,Ui=1,ji="/bin/usr/node",Ni=9229,Di="node",Fi=[],Wi=nt,kt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},kt.now===void 0&&(Dr=Date.now(),kt.timing&&kt.timing.navigationStart&&(Dr=kt.timing.navigationStart),kt.now=()=>Date.now()-Dr),vr=1e9,_r.bigint=function(s){var c=_r(s);return typeof BigInt>"u"?c[0]*vr+c[1]:BigInt(c[0]*vr)+BigInt(c[1])},qi=10,$i={},Hi=0,Vi=Et,zi=Et,Ki=Et,Gi=Et,Qi=Et,Yi=nt,Ji=Et,Xi=Et,wn={version:ri,versions:ii,arch:Jr,platform:Xr,release:ui,_rawDebug:hi,moduleLoadList:ci,binding:oi,_linkedBinding:no,_events:$i,_eventsCount:Hi,_maxListeners:qi,on:Et,addListener:Vi,once:zi,off:Ki,removeListener:Gi,removeAllListeners:Qi,emit:Yi,prependListener:Ji,prependOnceListener:Xi,listeners:co,domain:fi,_exiting:di,config:pi,dlopen:oo,uptime:ho,_getActiveRequests:so,_getActiveHandles:ao,reallyExit:gi,_kill:bi,cpuUsage:ar,resourceUsage:mi,memoryUsage:yi,kill:wi,exit:_i,openStdin:vi,allowedNodeEnvironmentFlags:Ei,assert:lo,features:Si,_fatalExceptions:Ai,setUncaughtExceptionCaptureCallback:Ii,hasUncaughtExceptionCaptureCallback:uo,emitWarning:ni,nextTick:ro,_tickCallback:ki,_debugProcess:Ti,_debugEnd:Oi,_startProfilerIdleNotifier:Pi,_stopProfilerIdleNotifier:Ci,stdout:Ri,stdin:Bi,stderr:xi,abort:Mi,umask:si,chdir:li,cwd:ai,env:Zr,title:Yr,argv:ei,execArgv:ti,pid:Li,ppid:Ui,execPath:ji,debugPort:Ni,hrtime:_r,argv0:Di,_preload_modules:Fi,setSourceMapsEnabled:Wi}}),fe=ot(()=>{Ws()}),rt={};rr(rt,{Buffer:()=>Or,INSPECT_MAX_BYTES:()=>fo,default:()=>St,kMaxLength:()=>po});function qs(){if(Zi)return tr;Zi=!0,tr.byteLength=r,tr.toByteArray=n,tr.fromByteArray=d;for(var s=[],c=[],o=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=l.length;h<i;++h)s[h]=l[h],c[l.charCodeAt(h)]=h;c[45]=62,c[95]=63;function e(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");w===-1&&(w=b);var _=w===b?0:4-w%4;return[w,_]}function r(g){var b=e(g),w=b[0],_=b[1];return(w+_)*3/4-_}function t(g,b,w){return(b+w)*3/4-w}function n(g){var b,w=e(g),_=w[0],A=w[1],m=new o(t(g,_,A)),v=0,j=A>0?_-4:_,R;for(R=0;R<j;R+=4)b=c[g.charCodeAt(R)]<<18|c[g.charCodeAt(R+1)]<<12|c[g.charCodeAt(R+2)]<<6|c[g.charCodeAt(R+3)],m[v++]=b>>16&255,m[v++]=b>>8&255,m[v++]=b&255;return A===2&&(b=c[g.charCodeAt(R)]<<2|c[g.charCodeAt(R+1)]>>4,m[v++]=b&255),A===1&&(b=c[g.charCodeAt(R)]<<10|c[g.charCodeAt(R+1)]<<4|c[g.charCodeAt(R+2)]>>2,m[v++]=b>>8&255,m[v++]=b&255),m}function u(g){return s[g>>18&63]+s[g>>12&63]+s[g>>6&63]+s[g&63]}function f(g,b,w){for(var _,A=[],m=b;m<w;m+=3)_=(g[m]<<16&16711680)+(g[m+1]<<8&65280)+(g[m+2]&255),A.push(u(_));return A.join("")}function d(g){for(var b,w=g.length,_=w%3,A=[],m=16383,v=0,j=w-_;v<j;v+=m)A.push(f(g,v,v+m>j?j:v+m));return _===1?(b=g[w-1],A.push(s[b>>2]+s[b<<4&63]+"==")):_===2&&(b=(g[w-2]<<8)+g[w-1],A.push(s[b>>10]+s[b>>4&63]+s[b<<2&63]+"=")),A.join("")}return tr}function $s(){return en?lr:(en=!0,lr.read=function(s,c,o,l,h){var i,e,r=h*8-l-1,t=(1<<r)-1,n=t>>1,u=-7,f=o?h-1:0,d=o?-1:1,g=s[c+f];for(f+=d,i=g&(1<<-u)-1,g>>=-u,u+=r;u>0;i=i*256+s[c+f],f+=d,u-=8);for(e=i&(1<<-u)-1,i>>=-u,u+=l;u>0;e=e*256+s[c+f],f+=d,u-=8);if(i===0)i=1-n;else{if(i===t)return e?NaN:(g?-1:1)*(1/0);e=e+Math.pow(2,l),i=i-n}return(g?-1:1)*e*Math.pow(2,i-l)},lr.write=function(s,c,o,l,h,i){var e,r,t,n=i*8-h-1,u=(1<<n)-1,f=u>>1,d=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=l?0:i-1,b=l?1:-1,w=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(r=isNaN(c)?1:0,e=u):(e=Math.floor(Math.log(c)/Math.LN2),c*(t=Math.pow(2,-e))<1&&(e--,t*=2),e+f>=1?c+=d/t:c+=d*Math.pow(2,1-f),c*t>=2&&(e++,t/=2),e+f>=u?(r=0,e=u):e+f>=1?(r=(c*t-1)*Math.pow(2,h),e=e+f):(r=c*Math.pow(2,f-1)*Math.pow(2,h),e=0));h>=8;s[o+g]=r&255,g+=b,r/=256,h-=8);for(e=e<<h|r,n+=h;n>0;s[o+g]=e&255,g+=b,e/=256,n-=8);s[o+g-b]|=w*128},lr)}function Hs(){if(tn)return xt;tn=!0;let s=qs(),c=$s(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;xt.Buffer=e,xt.SlowBuffer=A,xt.INSPECT_MAX_BYTES=50;let l=2147483647;xt.kMaxLength=l,e.TYPED_ARRAY_SUPPORT=h(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let a=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(a,p),a.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function i(a){if(a>l)throw new RangeError('The value "'+a+'" is invalid for option "size"');let p=new Uint8Array(a);return Object.setPrototypeOf(p,e.prototype),p}function e(a,p,y){if(typeof a=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(a)}return r(a,p,y)}e.poolSize=8192;function r(a,p,y){if(typeof a=="string")return f(a,p);if(ArrayBuffer.isView(a))return g(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(U(a,ArrayBuffer)||a&&U(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(a,SharedArrayBuffer)||a&&U(a.buffer,SharedArrayBuffer)))return b(a,p,y);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=a.valueOf&&a.valueOf();if(B!=null&&B!==a)return e.from(B,p,y);let q=w(a);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return e.from(a[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}e.from=function(a,p,y){return r(a,p,y)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function t(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function n(a,p,y){return t(a),a<=0?i(a):p!==void 0?typeof y=="string"?i(a).fill(p,y):i(a).fill(p):i(a)}e.alloc=function(a,p,y){return n(a,p,y)};function u(a){return t(a),i(a<0?0:_(a)|0)}e.allocUnsafe=function(a){return u(a)},e.allocUnsafeSlow=function(a){return u(a)};function f(a,p){if((typeof p!="string"||p==="")&&(p="utf8"),!e.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let y=m(a,p)|0,B=i(y),q=B.write(a,p);return q!==y&&(B=B.slice(0,q)),B}function d(a){let p=a.length<0?0:_(a.length)|0,y=i(p);for(let B=0;B<p;B+=1)y[B]=a[B]&255;return y}function g(a){if(U(a,Uint8Array)){let p=new Uint8Array(a);return b(p.buffer,p.byteOffset,p.byteLength)}return d(a)}function b(a,p,y){if(p<0||a.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');let B;return p===void 0&&y===void 0?B=new Uint8Array(a):y===void 0?B=new Uint8Array(a,p):B=new Uint8Array(a,p,y),Object.setPrototypeOf(B,e.prototype),B}function w(a){if(e.isBuffer(a)){let p=_(a.length)|0,y=i(p);return y.length===0||a.copy(y,0,0,p),y}if(a.length!==void 0)return typeof a.length!="number"||ae(a.length)?i(0):d(a);if(a.type==="Buffer"&&Array.isArray(a.data))return d(a.data)}function _(a){if(a>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return a|0}function A(a){return+a!=a&&(a=0),e.alloc(+a)}e.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==e.prototype},e.compare=function(a,p){if(U(a,Uint8Array)&&(a=e.from(a,a.offset,a.byteLength)),U(p,Uint8Array)&&(p=e.from(p,p.offset,p.byteLength)),!e.isBuffer(a)||!e.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===p)return 0;let y=a.length,B=p.length;for(let q=0,X=Math.min(y,B);q<X;++q)if(a[q]!==p[q]){y=a[q],B=p[q];break}return y<B?-1:B<y?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,p){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return e.alloc(0);let y;if(p===void 0)for(p=0,y=0;y<a.length;++y)p+=a[y].length;let B=e.allocUnsafe(p),q=0;for(y=0;y<a.length;++y){let X=a[y];if(U(X,Uint8Array))q+X.length>B.length?(e.isBuffer(X)||(X=e.from(X)),X.copy(B,q)):Uint8Array.prototype.set.call(B,X,q);else if(e.isBuffer(X))X.copy(B,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=X.length}return B};function m(a,p){if(e.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||U(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let y=a.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&y===0)return 0;let q=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return M(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return ne(a).length;default:if(q)return B?-1:M(a).length;p=(""+p).toLowerCase(),q=!0}}e.byteLength=m;function v(a,p,y){let B=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(a||(a="utf8");;)switch(a){case"hex":return pe(this,p,y);case"utf8":case"utf-8":return Q(this,p,y);case"ascii":return ye(this,p,y);case"latin1":case"binary":return me(this,p,y);case"base64":return L(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,p,y);default:if(B)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),B=!0}}e.prototype._isBuffer=!0;function j(a,p,y){let B=a[p];a[p]=a[y],a[y]=B}e.prototype.swap16=function(){let a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<a;p+=2)j(this,p,p+1);return this},e.prototype.swap32=function(){let a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<a;p+=4)j(this,p,p+3),j(this,p+1,p+2);return this},e.prototype.swap64=function(){let a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<a;p+=8)j(this,p,p+7),j(this,p+1,p+6),j(this,p+2,p+5),j(this,p+3,p+4);return this},e.prototype.toString=function(){let a=this.length;return a===0?"":arguments.length===0?Q(this,0,a):v.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:e.compare(this,a)===0},e.prototype.inspect=function(){let a="",p=xt.INSPECT_MAX_BYTES;return a=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(a+=" ... "),"<Buffer "+a+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(a,p,y,B,q){if(U(a,Uint8Array)&&(a=e.from(a,a.offset,a.byteLength)),!e.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(p===void 0&&(p=0),y===void 0&&(y=a?a.length:0),B===void 0&&(B=0),q===void 0&&(q=this.length),p<0||y>a.length||B<0||q>this.length)throw new RangeError("out of range index");if(B>=q&&p>=y)return 0;if(B>=q)return-1;if(p>=y)return 1;if(p>>>=0,y>>>=0,B>>>=0,q>>>=0,this===a)return 0;let X=q-B,Se=y-p,Ue=Math.min(X,Se),tt=this.slice(B,q),De=a.slice(p,y);for(let Be=0;Be<Ue;++Be)if(tt[Be]!==De[Be]){X=tt[Be],Se=De[Be];break}return X<Se?-1:Se<X?1:0};function R(a,p,y,B,q){if(a.length===0)return-1;if(typeof y=="string"?(B=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ae(y)&&(y=q?0:a.length-1),y<0&&(y=a.length+y),y>=a.length){if(q)return-1;y=a.length-1}else if(y<0)if(q)y=0;else return-1;if(typeof p=="string"&&(p=e.from(p,B)),e.isBuffer(p))return p.length===0?-1:E(a,p,y,B,q);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(a,p,y):Uint8Array.prototype.lastIndexOf.call(a,p,y):E(a,[p],y,B,q);throw new TypeError("val must be string, number or Buffer")}function E(a,p,y,B,q){let X=1,Se=a.length,Ue=p.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(a.length<2||p.length<2)return-1;X=2,Se/=2,Ue/=2,y/=2}function tt(Be,D){return X===1?Be[D]:Be.readUInt16BE(D*X)}let De;if(q){let Be=-1;for(De=y;De<Se;De++)if(tt(a,De)===tt(p,Be===-1?0:De-Be)){if(Be===-1&&(Be=De),De-Be+1===Ue)return Be*X}else Be!==-1&&(De-=De-Be),Be=-1}else for(y+Ue>Se&&(y=Se-Ue),De=y;De>=0;De--){let Be=!0;for(let D=0;D<Ue;D++)if(tt(a,De+D)!==tt(p,D)){Be=!1;break}if(Be)return De}return-1}e.prototype.includes=function(a,p,y){return this.indexOf(a,p,y)!==-1},e.prototype.indexOf=function(a,p,y){return R(this,a,p,y,!0)},e.prototype.lastIndexOf=function(a,p,y){return R(this,a,p,y,!1)};function I(a,p,y,B){y=Number(y)||0;let q=a.length-y;B?(B=Number(B),B>q&&(B=q)):B=q;let X=p.length;B>X/2&&(B=X/2);let Se;for(Se=0;Se<B;++Se){let Ue=parseInt(p.substr(Se*2,2),16);if(ae(Ue))return Se;a[y+Se]=Ue}return Se}function C(a,p,y,B){return ue(M(p,a.length-y),a,y,B)}function z(a,p,y,B){return ue(Y(p),a,y,B)}function K(a,p,y,B){return ue(ne(p),a,y,B)}function be(a,p,y,B){return ue(te(p,a.length-y),a,y,B)}e.prototype.write=function(a,p,y,B){if(p===void 0)B="utf8",y=this.length,p=0;else if(y===void 0&&typeof p=="string")B=p,y=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(y)?(y=y>>>0,B===void 0&&(B="utf8")):(B=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let q=this.length-p;if((y===void 0||y>q)&&(y=q),a.length>0&&(y<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let X=!1;for(;;)switch(B){case"hex":return I(this,a,p,y);case"utf8":case"utf-8":return C(this,a,p,y);case"ascii":case"latin1":case"binary":return z(this,a,p,y);case"base64":return K(this,a,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,a,p,y);default:if(X)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),X=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(a,p,y){return p===0&&y===a.length?s.fromByteArray(a):s.fromByteArray(a.slice(p,y))}function Q(a,p,y){y=Math.min(a.length,y);let B=[],q=p;for(;q<y;){let X=a[q],Se=null,Ue=X>239?4:X>223?3:X>191?2:1;if(q+Ue<=y){let tt,De,Be,D;switch(Ue){case 1:X<128&&(Se=X);break;case 2:tt=a[q+1],(tt&192)===128&&(D=(X&31)<<6|tt&63,D>127&&(Se=D));break;case 3:tt=a[q+1],De=a[q+2],(tt&192)===128&&(De&192)===128&&(D=(X&15)<<12|(tt&63)<<6|De&63,D>2047&&(D<55296||D>57343)&&(Se=D));break;case 4:tt=a[q+1],De=a[q+2],Be=a[q+3],(tt&192)===128&&(De&192)===128&&(Be&192)===128&&(D=(X&15)<<18|(tt&63)<<12|(De&63)<<6|Be&63,D>65535&&D<1114112&&(Se=D))}}Se===null?(Se=65533,Ue=1):Se>65535&&(Se-=65536,B.push(Se>>>10&1023|55296),Se=56320|Se&1023),B.push(Se),q+=Ue}return F(B)}let J=4096;function F(a){let p=a.length;if(p<=J)return String.fromCharCode.apply(String,a);let y="",B=0;for(;B<p;)y+=String.fromCharCode.apply(String,a.slice(B,B+=J));return y}function ye(a,p,y){let B="";y=Math.min(a.length,y);for(let q=p;q<y;++q)B+=String.fromCharCode(a[q]&127);return B}function me(a,p,y){let B="";y=Math.min(a.length,y);for(let q=p;q<y;++q)B+=String.fromCharCode(a[q]);return B}function pe(a,p,y){let B=a.length;(!p||p<0)&&(p=0),(!y||y<0||y>B)&&(y=B);let q="";for(let X=p;X<y;++X)q+=_e[a[X]];return q}function Te(a,p,y){let B=a.slice(p,y),q="";for(let X=0;X<B.length-1;X+=2)q+=String.fromCharCode(B[X]+B[X+1]*256);return q}e.prototype.slice=function(a,p){let y=this.length;a=~~a,p=p===void 0?y:~~p,a<0?(a+=y,a<0&&(a=0)):a>y&&(a=y),p<0?(p+=y,p<0&&(p=0)):p>y&&(p=y),p<a&&(p=a);let B=this.subarray(a,p);return Object.setPrototypeOf(B,e.prototype),B};function V(a,p,y){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+p>y)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(a,p,y){a=a>>>0,p=p>>>0,y||V(a,p,this.length);let B=this[a],q=1,X=0;for(;++X<p&&(q*=256);)B+=this[a+X]*q;return B},e.prototype.readUintBE=e.prototype.readUIntBE=function(a,p,y){a=a>>>0,p=p>>>0,y||V(a,p,this.length);let B=this[a+--p],q=1;for(;p>0&&(q*=256);)B+=this[a+--p]*q;return B},e.prototype.readUint8=e.prototype.readUInt8=function(a,p){return a=a>>>0,p||V(a,1,this.length),this[a]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(a,p){return a=a>>>0,p||V(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(a,p){return a=a>>>0,p||V(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(a,p){return a=a>>>0,p||V(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(a,p){return a=a>>>0,p||V(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readBigUInt64LE=ee(function(a){a=a>>>0,W(a,"offset");let p=this[a],y=this[a+7];(p===void 0||y===void 0)&&le(a,this.length-8);let B=p+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,q=this[++a]+this[++a]*2**8+this[++a]*2**16+y*2**24;return BigInt(B)+(BigInt(q)<<BigInt(32))}),e.prototype.readBigUInt64BE=ee(function(a){a=a>>>0,W(a,"offset");let p=this[a],y=this[a+7];(p===void 0||y===void 0)&&le(a,this.length-8);let B=p*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],q=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+y;return(BigInt(B)<<BigInt(32))+BigInt(q)}),e.prototype.readIntLE=function(a,p,y){a=a>>>0,p=p>>>0,y||V(a,p,this.length);let B=this[a],q=1,X=0;for(;++X<p&&(q*=256);)B+=this[a+X]*q;return q*=128,B>=q&&(B-=Math.pow(2,8*p)),B},e.prototype.readIntBE=function(a,p,y){a=a>>>0,p=p>>>0,y||V(a,p,this.length);let B=p,q=1,X=this[a+--B];for(;B>0&&(q*=256);)X+=this[a+--B]*q;return q*=128,X>=q&&(X-=Math.pow(2,8*p)),X},e.prototype.readInt8=function(a,p){return a=a>>>0,p||V(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},e.prototype.readInt16LE=function(a,p){a=a>>>0,p||V(a,2,this.length);let y=this[a]|this[a+1]<<8;return y&32768?y|4294901760:y},e.prototype.readInt16BE=function(a,p){a=a>>>0,p||V(a,2,this.length);let y=this[a+1]|this[a]<<8;return y&32768?y|4294901760:y},e.prototype.readInt32LE=function(a,p){return a=a>>>0,p||V(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,p){return a=a>>>0,p||V(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readBigInt64LE=ee(function(a){a=a>>>0,W(a,"offset");let p=this[a],y=this[a+7];(p===void 0||y===void 0)&&le(a,this.length-8);let B=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(y<<24);return(BigInt(B)<<BigInt(32))+BigInt(p+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),e.prototype.readBigInt64BE=ee(function(a){a=a>>>0,W(a,"offset");let p=this[a],y=this[a+7];(p===void 0||y===void 0)&&le(a,this.length-8);let B=(p<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(B)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+y)}),e.prototype.readFloatLE=function(a,p){return a=a>>>0,p||V(a,4,this.length),c.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,p){return a=a>>>0,p||V(a,4,this.length),c.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,p){return a=a>>>0,p||V(a,8,this.length),c.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,p){return a=a>>>0,p||V(a,8,this.length),c.read(this,a,!1,52,8)};function we(a,p,y,B,q,X){if(!e.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>q||p<X)throw new RangeError('"value" argument is out of bounds');if(y+B>a.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(a,p,y,B){if(a=+a,p=p>>>0,y=y>>>0,!B){let Se=Math.pow(2,8*y)-1;we(this,a,p,y,Se,0)}let q=1,X=0;for(this[p]=a&255;++X<y&&(q*=256);)this[p+X]=a/q&255;return p+y},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(a,p,y,B){if(a=+a,p=p>>>0,y=y>>>0,!B){let Se=Math.pow(2,8*y)-1;we(this,a,p,y,Se,0)}let q=y-1,X=1;for(this[p+q]=a&255;--q>=0&&(X*=256);)this[p+q]=a/X&255;return p+y},e.prototype.writeUint8=e.prototype.writeUInt8=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,1,255,0),this[p]=a&255,p+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,2,65535,0),this[p]=a&255,this[p+1]=a>>>8,p+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,2,65535,0),this[p]=a>>>8,this[p+1]=a&255,p+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,4,4294967295,0),this[p+3]=a>>>24,this[p+2]=a>>>16,this[p+1]=a>>>8,this[p]=a&255,p+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,4,4294967295,0),this[p]=a>>>24,this[p+1]=a>>>16,this[p+2]=a>>>8,this[p+3]=a&255,p+4};function O(a,p,y,B,q){N(p,B,q,a,y,7);let X=Number(p&BigInt(4294967295));a[y++]=X,X=X>>8,a[y++]=X,X=X>>8,a[y++]=X,X=X>>8,a[y++]=X;let Se=Number(p>>BigInt(32)&BigInt(4294967295));return a[y++]=Se,Se=Se>>8,a[y++]=Se,Se=Se>>8,a[y++]=Se,Se=Se>>8,a[y++]=Se,y}function se(a,p,y,B,q){N(p,B,q,a,y,7);let X=Number(p&BigInt(4294967295));a[y+7]=X,X=X>>8,a[y+6]=X,X=X>>8,a[y+5]=X,X=X>>8,a[y+4]=X;let Se=Number(p>>BigInt(32)&BigInt(4294967295));return a[y+3]=Se,Se=Se>>8,a[y+2]=Se,Se=Se>>8,a[y+1]=Se,Se=Se>>8,a[y]=Se,y+8}e.prototype.writeBigUInt64LE=ee(function(a,p=0){return O(this,a,p,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=ee(function(a,p=0){return se(this,a,p,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(a,p,y,B){if(a=+a,p=p>>>0,!B){let Ue=Math.pow(2,8*y-1);we(this,a,p,y,Ue-1,-Ue)}let q=0,X=1,Se=0;for(this[p]=a&255;++q<y&&(X*=256);)a<0&&Se===0&&this[p+q-1]!==0&&(Se=1),this[p+q]=(a/X>>0)-Se&255;return p+y},e.prototype.writeIntBE=function(a,p,y,B){if(a=+a,p=p>>>0,!B){let Ue=Math.pow(2,8*y-1);we(this,a,p,y,Ue-1,-Ue)}let q=y-1,X=1,Se=0;for(this[p+q]=a&255;--q>=0&&(X*=256);)a<0&&Se===0&&this[p+q+1]!==0&&(Se=1),this[p+q]=(a/X>>0)-Se&255;return p+y},e.prototype.writeInt8=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,1,127,-128),a<0&&(a=255+a+1),this[p]=a&255,p+1},e.prototype.writeInt16LE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,2,32767,-32768),this[p]=a&255,this[p+1]=a>>>8,p+2},e.prototype.writeInt16BE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,2,32767,-32768),this[p]=a>>>8,this[p+1]=a&255,p+2},e.prototype.writeInt32LE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,4,2147483647,-2147483648),this[p]=a&255,this[p+1]=a>>>8,this[p+2]=a>>>16,this[p+3]=a>>>24,p+4},e.prototype.writeInt32BE=function(a,p,y){return a=+a,p=p>>>0,y||we(this,a,p,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[p]=a>>>24,this[p+1]=a>>>16,this[p+2]=a>>>8,this[p+3]=a&255,p+4},e.prototype.writeBigInt64LE=ee(function(a,p=0){return O(this,a,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=ee(function(a,p=0){return se(this,a,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(a,p,y,B,q,X){if(y+B>a.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function re(a,p,y,B,q){return p=+p,y=y>>>0,q||Pe(a,p,y,4),c.write(a,p,y,B,23,4),y+4}e.prototype.writeFloatLE=function(a,p,y){return re(this,a,p,!0,y)},e.prototype.writeFloatBE=function(a,p,y){return re(this,a,p,!1,y)};function Oe(a,p,y,B,q){return p=+p,y=y>>>0,q||Pe(a,p,y,8),c.write(a,p,y,B,52,8),y+8}e.prototype.writeDoubleLE=function(a,p,y){return Oe(this,a,p,!0,y)},e.prototype.writeDoubleBE=function(a,p,y){return Oe(this,a,p,!1,y)},e.prototype.copy=function(a,p,y,B){if(!e.isBuffer(a))throw new TypeError("argument should be a Buffer");if(y||(y=0),!B&&B!==0&&(B=this.length),p>=a.length&&(p=a.length),p||(p=0),B>0&&B<y&&(B=y),B===y||a.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),a.length-p<B-y&&(B=a.length-p+y);let q=B-y;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,y,B):Uint8Array.prototype.set.call(a,this.subarray(y,B),p),q},e.prototype.fill=function(a,p,y,B){if(typeof a=="string"){if(typeof p=="string"?(B=p,p=0,y=this.length):typeof y=="string"&&(B=y,y=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!e.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(a.length===1){let X=a.charCodeAt(0);(B==="utf8"&&X<128||B==="latin1")&&(a=X)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(p<0||this.length<p||this.length<y)throw new RangeError("Out of range index");if(y<=p)return this;p=p>>>0,y=y===void 0?this.length:y>>>0,a||(a=0);let q;if(typeof a=="number")for(q=p;q<y;++q)this[q]=a;else{let X=e.isBuffer(a)?a:e.from(a,B),Se=X.length;if(Se===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(q=0;q<y-p;++q)this[q+p]=X[q%Se]}return this};let $={};function x(a,p,y){$[a]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}x("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),x("ERR_INVALID_ARG_TYPE",function(a,p){return`The "${a}" argument must be of type number. Received type ${typeof p}`},TypeError),x("ERR_OUT_OF_RANGE",function(a,p,y){let B=`The value of "${a}" is out of range.`,q=y;return Number.isInteger(y)&&Math.abs(y)>2**32?q=Z(String(y)):typeof y=="bigint"&&(q=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(q=Z(q)),q+="n"),B+=` It must be ${p}. Received ${q}`,B},RangeError);function Z(a){let p="",y=a.length,B=a[0]==="-"?1:0;for(;y>=B+4;y-=3)p=`_${a.slice(y-3,y)}${p}`;return`${a.slice(0,y)}${p}`}function H(a,p,y){W(p,"offset"),(a[p]===void 0||a[p+y]===void 0)&&le(p,a.length-(y+1))}function N(a,p,y,B,q,X){if(a>y||a<p){let Se=typeof p=="bigint"?"n":"",Ue;throw X>3?p===0||p===BigInt(0)?Ue=`>= 0${Se} and < 2${Se} ** ${(X+1)*8}${Se}`:Ue=`>= -(2${Se} ** ${(X+1)*8-1}${Se}) and < 2 ** ${(X+1)*8-1}${Se}`:Ue=`>= ${p}${Se} and <= ${y}${Se}`,new $.ERR_OUT_OF_RANGE("value",Ue,a)}H(B,q,X)}function W(a,p){if(typeof a!="number")throw new $.ERR_INVALID_ARG_TYPE(p,"number",a)}function le(a,p,y){throw Math.floor(a)!==a?(W(a,y),new $.ERR_OUT_OF_RANGE(y||"offset","an integer",a)):p<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${p}`,a)}let ie=/[^+/0-9A-Za-z-_]/g;function P(a){if(a=a.split("=")[0],a=a.trim().replace(ie,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function M(a,p){p=p||1/0;let y,B=a.length,q=null,X=[];for(let Se=0;Se<B;++Se){if(y=a.charCodeAt(Se),y>55295&&y<57344){if(!q){if(y>56319){(p-=3)>-1&&X.push(239,191,189);continue}else if(Se+1===B){(p-=3)>-1&&X.push(239,191,189);continue}q=y;continue}if(y<56320){(p-=3)>-1&&X.push(239,191,189),q=y;continue}y=(q-55296<<10|y-56320)+65536}else q&&(p-=3)>-1&&X.push(239,191,189);if(q=null,y<128){if((p-=1)<0)break;X.push(y)}else if(y<2048){if((p-=2)<0)break;X.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;X.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;X.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return X}function Y(a){let p=[];for(let y=0;y<a.length;++y)p.push(a.charCodeAt(y)&255);return p}function te(a,p){let y,B,q,X=[];for(let Se=0;Se<a.length&&!((p-=2)<0);++Se)y=a.charCodeAt(Se),B=y>>8,q=y%256,X.push(q),X.push(B);return X}function ne(a){return s.toByteArray(P(a))}function ue(a,p,y,B){let q;for(q=0;q<B&&!(q+y>=p.length||q>=a.length);++q)p[q+y]=a[q];return q}function U(a,p){return a instanceof p||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===p.name}function ae(a){return a!==a}let _e=function(){let a="0123456789abcdef",p=new Array(256);for(let y=0;y<16;++y){let B=y*16;for(let q=0;q<16;++q)p[B+q]=a[y]+a[q]}return p}();function ee(a){return typeof BigInt>"u"?Ce:a}function Ce(){throw new Error("BigInt not supported")}return xt}var tr,Zi,lr,en,xt,tn,St,Or,fo,po,it=ot(()=>{ce(),de(),fe(),tr={},Zi=!1,lr={},en=!1,xt={},tn=!1,St=Hs(),St.Buffer,St.SlowBuffer,St.INSPECT_MAX_BYTES,St.kMaxLength,Or=St.Buffer,fo=St.INSPECT_MAX_BYTES,po=St.kMaxLength}),de=ot(()=>{it()}),Vs=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{constructor(o){this.aliasToTopic={},this.max=o}put(o,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};s.default=c}),Ze=ve((s,c)=>{ce(),de(),fe();var o=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let h="";for(let i=0;i<l.length;i++)h+=`    ${l[i].stack}
`;super(h),this.name="AggregateError",this.errors=l}};c.exports={AggregateError:o,ArrayIsArray(l){return Array.isArray(l)},ArrayPrototypeIncludes(l,h){return l.includes(h)},ArrayPrototypeIndexOf(l,h){return l.indexOf(h)},ArrayPrototypeJoin(l,h){return l.join(h)},ArrayPrototypeMap(l,h){return l.map(h)},ArrayPrototypePop(l,h){return l.pop(h)},ArrayPrototypePush(l,h){return l.push(h)},ArrayPrototypeSlice(l,h,i){return l.slice(h,i)},Error,FunctionPrototypeCall(l,h,...i){return l.call(h,...i)},FunctionPrototypeSymbolHasInstance(l,h){return Function.prototype[Symbol.hasInstance].call(l,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(l,h){return Object.defineProperties(l,h)},ObjectDefineProperty(l,h,i){return Object.defineProperty(l,h,i)},ObjectGetOwnPropertyDescriptor(l,h){return Object.getOwnPropertyDescriptor(l,h)},ObjectKeys(l){return Object.keys(l)},ObjectSetPrototypeOf(l,h){return Object.setPrototypeOf(l,h)},Promise,PromisePrototypeCatch(l,h){return l.catch(h)},PromisePrototypeThen(l,h,i){return l.then(h,i)},PromiseReject(l){return Promise.reject(l)},PromiseResolve(l){return Promise.resolve(l)},ReflectApply:Reflect.apply,RegExpPrototypeTest(l,h){return l.test(h)},SafeSet:Set,String,StringPrototypeSlice(l,h,i){return l.slice(h,i)},StringPrototypeToLowerCase(l){return l.toLowerCase()},StringPrototypeToUpperCase(l){return l.toUpperCase()},StringPrototypeTrim(l){return l.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(l,h,i){return l.set(h,i)},Boolean,Uint8Array}}),go=ve((s,c)=>{ce(),de(),fe(),c.exports={format(o,...l){return o.replace(/%([sdifj])/g,function(...[h,i]){let e=l.shift();return i==="f"?e.toFixed(6):i==="j"?JSON.stringify(e):i==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),st=ve((s,c)=>{ce(),de(),fe();var{format:o,inspect:l}=go(),{AggregateError:h}=Ze(),i=globalThis.AggregateError||h,e=Symbol("kIsNodeError"),r=["string","function","number","object","Function","Object","boolean","bigint","symbol"],t=/^([A-Z][a-z0-9]*)+$/,n="__node_internal_",u={};function f(m,v){if(!m)throw new u.ERR_INTERNAL_ASSERTION(v)}function d(m){let v="",j=m.length,R=m[0]==="-"?1:0;for(;j>=R+4;j-=3)v=`_${m.slice(j-3,j)}${v}`;return`${m.slice(0,j)}${v}`}function g(m,v,j){if(typeof v=="function")return f(v.length<=j.length,`Code: ${m}; The provided arguments length (${j.length}) does not match the required ones (${v.length}).`),v(...j);let R=(v.match(/%[dfijoOs]/g)||[]).length;return f(R===j.length,`Code: ${m}; The provided arguments length (${j.length}) does not match the required ones (${R}).`),j.length===0?v:o(v,...j)}function b(m,v,j){j||(j=Error);class R extends j{constructor(...I){super(g(m,v,I))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(R.prototype,{name:{value:j.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),R.prototype.code=m,R.prototype[e]=!0,u[m]=R}function w(m){let v=n+m.name;return Object.defineProperty(m,"name",{value:v}),m}function _(m,v){if(m&&v&&m!==v){if(Array.isArray(v.errors))return v.errors.push(m),v;let j=new i([v,m],v.message);return j.code=v.code,j}return m||v}var A=class extends Error{constructor(m="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",v);super(m,v),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(m,v,j)=>{f(typeof m=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let R="The ";m.endsWith(" argument")?R+=`${m} `:R+=`"${m}" ${m.includes(".")?"property":"argument"} `,R+="must be ";let E=[],I=[],C=[];for(let K of v)f(typeof K=="string","All expected entries have to be of type string"),r.includes(K)?E.push(K.toLowerCase()):t.test(K)?I.push(K):(f(K!=="object",'The value "object" should be written as "Object"'),C.push(K));if(I.length>0){let K=E.indexOf("object");K!==-1&&(E.splice(E,K,1),I.push("Object"))}if(E.length>0){switch(E.length){case 1:R+=`of type ${E[0]}`;break;case 2:R+=`one of type ${E[0]} or ${E[1]}`;break;default:{let K=E.pop();R+=`one of type ${E.join(", ")}, or ${K}`}}(I.length>0||C.length>0)&&(R+=" or ")}if(I.length>0){switch(I.length){case 1:R+=`an instance of ${I[0]}`;break;case 2:R+=`an instance of ${I[0]} or ${I[1]}`;break;default:{let K=I.pop();R+=`an instance of ${I.join(", ")}, or ${K}`}}C.length>0&&(R+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(R+="an "),R+=`${C[0]}`;break;case 2:R+=`one of ${C[0]} or ${C[1]}`;break;default:{let K=C.pop();R+=`one of ${C.join(", ")}, or ${K}`}}if(j==null)R+=`. Received ${j}`;else if(typeof j=="function"&&j.name)R+=`. Received function ${j.name}`;else if(typeof j=="object"){var z;if((z=j.constructor)!==null&&z!==void 0&&z.name)R+=`. Received an instance of ${j.constructor.name}`;else{let K=l(j,{depth:-1});R+=`. Received ${K}`}}else{let K=l(j,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),R+=`. Received type ${typeof j} (${K})`}return R},TypeError),b("ERR_INVALID_ARG_VALUE",(m,v,j="is invalid")=>{let R=l(v);return R.length>128&&(R=R.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${j}. Received ${R}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(m,v,j)=>{var R;let E=j!=null&&(R=j.constructor)!==null&&R!==void 0&&R.name?`instance of ${j.constructor.name}`:`type ${typeof j}`;return`Expected ${m} to be returned from the "${v}" function but got ${E}.`},TypeError),b("ERR_MISSING_ARGS",(...m)=>{f(m.length>0,"At least one arg needs to be specified");let v,j=m.length;switch(m=(Array.isArray(m)?m:[m]).map(R=>`"${R}"`).join(" or "),j){case 1:v+=`The ${m[0]} argument`;break;case 2:v+=`The ${m[0]} and ${m[1]} arguments`;break;default:{let R=m.pop();v+=`The ${m.join(", ")}, and ${R} arguments`}break}return`${v} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(m,v,j)=>{f(v,'Missing "range" argument');let R;if(Number.isInteger(j)&&Math.abs(j)>2**32)R=d(String(j));else if(typeof j=="bigint"){R=String(j);let E=BigInt(2)**BigInt(32);(j>E||j<-E)&&(R=d(R)),R+="n"}else R=l(j);return`The value of "${m}" is out of range. It must be ${v}. Received ${R}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),c.exports={AbortError:A,aggregateTwoErrors:w(_),hideStackFrames:w,codes:u}}),fr=ve((s,c)=>{ce(),de(),fe();var{AbortController:o,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;c.exports=o,c.exports.AbortSignal=l,c.exports.default=o});function $e(){$e.init.call(this)}function Er(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}function bo(s){return s._maxListeners===void 0?$e.defaultMaxListeners:s._maxListeners}function kn(s,c,o,l){var h,i,e,r;if(Er(o),(i=s._events)===void 0?(i=s._events=Object.create(null),s._eventsCount=0):(i.newListener!==void 0&&(s.emit("newListener",c,o.listener?o.listener:o),i=s._events),e=i[c]),e===void 0)e=i[c]=o,++s._eventsCount;else if(typeof e=="function"?e=i[c]=l?[o,e]:[e,o]:l?e.unshift(o):e.push(o),(h=bo(s))>0&&e.length>h&&!e.warned){e.warned=!0;var t=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");t.name="MaxListenersExceededWarning",t.emitter=s,t.type=c,t.count=e.length,r=t,console&&console.warn&&console.warn(r)}return s}function zs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Tn(s,c,o){var l={fired:!1,wrapFn:void 0,target:s,type:c,listener:o},h=zs.bind(l);return h.listener=o,l.wrapFn=h,h}function On(s,c,o){var l=s._events;if(l===void 0)return[];var h=l[c];return h===void 0?[]:typeof h=="function"?o?[h.listener||h]:[h]:o?function(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}(h):mo(h,h.length)}function Pn(s){var c=this._events;if(c!==void 0){var o=c[s];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function mo(s,c){for(var o=new Array(c),l=0;l<c;++l)o[l]=s[l];return o}var Cn,Rn,Wt,Fr,Wr,qr,ht,xn=ot(()=>{ce(),de(),fe(),Wt=typeof Reflect=="object"?Reflect:null,Fr=Wt&&typeof Wt.apply=="function"?Wt.apply:function(s,c,o){return Function.prototype.apply.call(s,c,o)},Rn=Wt&&typeof Wt.ownKeys=="function"?Wt.ownKeys:Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:function(s){return Object.getOwnPropertyNames(s)},Wr=Number.isNaN||function(s){return s!=s},Cn=$e,$e.EventEmitter=$e,$e.prototype._events=void 0,$e.prototype._eventsCount=0,$e.prototype._maxListeners=void 0,qr=10,Object.defineProperty($e,"defaultMaxListeners",{enumerable:!0,get:function(){return qr},set:function(s){if(typeof s!="number"||s<0||Wr(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");qr=s}}),$e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},$e.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||Wr(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this},$e.prototype.getMaxListeners=function(){return bo(this)},$e.prototype.emit=function(s){for(var c=[],o=1;o<arguments.length;o++)c.push(arguments[o]);var l=s==="error",h=this._events;if(h!==void 0)l=l&&h.error===void 0;else if(!l)return!1;if(l){var i;if(c.length>0&&(i=c[0]),i instanceof Error)throw i;var e=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw e.context=i,e}var r=h[s];if(r===void 0)return!1;if(typeof r=="function")Fr(r,this,c);else{var t=r.length,n=mo(r,t);for(o=0;o<t;++o)Fr(n[o],this,c)}return!0},$e.prototype.addListener=function(s,c){return kn(this,s,c,!1)},$e.prototype.on=$e.prototype.addListener,$e.prototype.prependListener=function(s,c){return kn(this,s,c,!0)},$e.prototype.once=function(s,c){return Er(c),this.on(s,Tn(this,s,c)),this},$e.prototype.prependOnceListener=function(s,c){return Er(c),this.prependListener(s,Tn(this,s,c)),this},$e.prototype.removeListener=function(s,c){var o,l,h,i,e;if(Er(c),(l=this._events)===void 0)return this;if((o=l[s])===void 0)return this;if(o===c||o.listener===c)--this._eventsCount==0?this._events=Object.create(null):(delete l[s],l.removeListener&&this.emit("removeListener",s,o.listener||c));else if(typeof o!="function"){for(h=-1,i=o.length-1;i>=0;i--)if(o[i]===c||o[i].listener===c){e=o[i].listener,h=i;break}if(h<0)return this;h===0?o.shift():function(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}(o,h),o.length===1&&(l[s]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",s,e||c)}return this},$e.prototype.off=$e.prototype.removeListener,$e.prototype.removeAllListeners=function(s){var c,o,l;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[s]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[s]),this;if(arguments.length===0){var h,i=Object.keys(o);for(l=0;l<i.length;++l)(h=i[l])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(c=o[s])=="function")this.removeListener(s,c);else if(c!==void 0)for(l=c.length-1;l>=0;l--)this.removeListener(s,c[l]);return this},$e.prototype.listeners=function(s){return On(this,s,!0)},$e.prototype.rawListeners=function(s){return On(this,s,!1)},$e.listenerCount=function(s,c){return typeof s.listenerCount=="function"?s.listenerCount(c):Pn.call(s,c)},$e.prototype.listenerCount=Pn,$e.prototype.eventNames=function(){return this._eventsCount>0?Rn(this._events):[]},ht=Cn,ht.EventEmitter,ht.defaultMaxListeners,ht.init,ht.listenerCount,ht.EventEmitter,ht.defaultMaxListeners,ht.init,ht.listenerCount}),jt={};rr(jt,{EventEmitter:()=>yo,default:()=>ht,defaultMaxListeners:()=>wo,init:()=>_o,listenerCount:()=>vo,on:()=>Eo,once:()=>So});var yo,wo,_o,vo,Eo,So,Yt=ot(()=>{ce(),de(),fe(),xn(),xn(),ht.once=function(s,c){return new Promise((o,l)=>{function h(...e){i!==void 0&&s.removeListener("error",i),o(e)}let i;c!=="error"&&(i=e=>{s.removeListener(name,h),l(e)},s.once("error",i)),s.once(c,h)})},ht.on=function(s,c){let o=[],l=[],h=null,i=!1,e={async next(){let n=o.shift();if(n)return createIterResult(n,!1);if(h){let u=Promise.reject(h);return h=null,u}return i?createIterResult(void 0,!0):new Promise((u,f)=>l.push({resolve:u,reject:f}))},async return(){s.removeListener(c,r),s.removeListener("error",t),i=!0;for(let n of l)n.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(n){h=n,s.removeListener(c,r),s.removeListener("error",t)},[Symbol.asyncIterator](){return this}};return s.on(c,r),s.on("error",t),e;function r(...n){let u=l.shift();u?u.resolve(createIterResult(n,!1)):o.push(n)}function t(n){i=!0;let u=l.shift();u?u.reject(n):h=n,e.return()}},{EventEmitter:yo,defaultMaxListeners:wo,init:_o,listenerCount:vo,on:Eo,once:So}=ht}),ut=ve((s,c)=>{ce(),de(),fe();var o=(it(),He(rt)),{format:l,inspect:h}=go(),{codes:{ERR_INVALID_ARG_TYPE:i}}=st(),{kResistStopPropagation:e,AggregateError:r,SymbolDispose:t}=Ze(),n=globalThis.AbortSignal||fr().AbortSignal,u=globalThis.AbortController||fr().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||o.Blob,g=typeof d<"u"?function(_){return _ instanceof d}:function(_){return!1},b=(_,A)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new i(A,"AbortSignal",_)},w=(_,A)=>{if(typeof _!="function")throw new i(A,"Function",_)};c.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(_){let A=!1;return function(...m){A||(A=!0,_.apply(this,m))}},createDeferredPromise:function(){let _,A;return{promise:new Promise((m,v)=>{_=m,A=v}),resolve:_,reject:A}},promisify(_){return new Promise((A,m)=>{_((v,...j)=>v?m(v):A(...j))})},debuglog(){return function(){}},format:l,inspect:h,types:{isAsyncFunction(_){return _ instanceof f},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:g,deprecate(_,A){return _},addAbortListener:(Yt(),He(jt)).addAbortListener||function(_,A){if(_===void 0)throw new i("signal","AbortSignal",_);b(_,"signal"),w(A,"listener");let m;return _.aborted?queueMicrotask(()=>A()):(_.addEventListener("abort",A,{__proto__:null,once:!0,[e]:!0}),m=()=>{_.removeEventListener("abort",A)}),{__proto__:null,[t](){var v;(v=m)===null||v===void 0||v()}}},AbortSignalAny:n.any||function(_){if(_.length===1)return _[0];let A=new u,m=()=>A.abort();return _.forEach(v=>{b(v,"signals"),v.addEventListener("abort",m,{once:!0})}),A.signal.addEventListener("abort",()=>{_.forEach(v=>v.removeEventListener("abort",m))},{once:!0}),A.signal}},c.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),dr=ve((s,c)=>{ce(),de(),fe();var{ArrayIsArray:o,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:h,ArrayPrototypeMap:i,NumberIsInteger:e,NumberIsNaN:r,NumberMAX_SAFE_INTEGER:t,NumberMIN_SAFE_INTEGER:n,NumberParseInt:u,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:g,StringPrototypeToUpperCase:b,StringPrototypeTrim:w}=Ze(),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:j,ERR_UNKNOWN_SIGNAL:R}}=st(),{normalizeEncoding:E}=ut(),{isAsyncFunction:I,isArrayBufferView:C}=ut().types,z={};function K(U){return U===(U|0)}function be(U){return U===U>>>0}var L=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function J(U,ae,_e){if(typeof U>"u"&&(U=_e),typeof U=="string"){if(d(L,U)===null)throw new v(ae,U,Q);U=u(U,8)}return me(U,ae),U}var F=_((U,ae,_e=n,ee=t)=>{if(typeof U!="number")throw new m(ae,"number",U);if(!e(U))throw new j(ae,"an integer",U);if(U<_e||U>ee)throw new j(ae,`>= ${_e} && <= ${ee}`,U)}),ye=_((U,ae,_e=-2147483648,ee=2147483647)=>{if(typeof U!="number")throw new m(ae,"number",U);if(!e(U))throw new j(ae,"an integer",U);if(U<_e||U>ee)throw new j(ae,`>= ${_e} && <= ${ee}`,U)}),me=_((U,ae,_e=!1)=>{if(typeof U!="number")throw new m(ae,"number",U);if(!e(U))throw new j(ae,"an integer",U);let ee=_e?1:0,Ce=4294967295;if(U<ee||U>Ce)throw new j(ae,`>= ${ee} && <= ${Ce}`,U)});function pe(U,ae){if(typeof U!="string")throw new m(ae,"string",U)}function Te(U,ae,_e=void 0,ee){if(typeof U!="number")throw new m(ae,"number",U);if(_e!=null&&U<_e||ee!=null&&U>ee||(_e!=null||ee!=null)&&r(U))throw new j(ae,`${_e!=null?`>= ${_e}`:""}${_e!=null&&ee!=null?" && ":""}${ee!=null?`<= ${ee}`:""}`,U)}var V=_((U,ae,_e)=>{if(!l(_e,U)){let ee="must be one of: "+h(i(_e,Ce=>typeof Ce=="string"?`'${Ce}'`:g(Ce)),", ");throw new v(ae,U,ee)}});function we(U,ae){if(typeof U!="boolean")throw new m(ae,"boolean",U)}function O(U,ae,_e){return U==null||!f(U,ae)?_e:U[ae]}var se=_((U,ae,_e=null)=>{let ee=O(_e,"allowArray",!1),Ce=O(_e,"allowFunction",!1);if(!O(_e,"nullable",!1)&&U===null||!ee&&o(U)||typeof U!="object"&&(!Ce||typeof U!="function"))throw new m(ae,"Object",U)}),Pe=_((U,ae)=>{if(U!=null&&typeof U!="object"&&typeof U!="function")throw new m(ae,"a dictionary",U)}),re=_((U,ae,_e=0)=>{if(!o(U))throw new m(ae,"Array",U);if(U.length<_e){let ee=`must be longer than ${_e}`;throw new v(ae,U,ee)}});function Oe(U,ae){re(U,ae);for(let _e=0;_e<U.length;_e++)pe(U[_e],`${ae}[${_e}]`)}function $(U,ae){re(U,ae);for(let _e=0;_e<U.length;_e++)we(U[_e],`${ae}[${_e}]`)}function x(U,ae){re(U,ae);for(let _e=0;_e<U.length;_e++){let ee=U[_e],Ce=`${ae}[${_e}]`;if(ee==null)throw new m(Ce,"AbortSignal",ee);le(ee,Ce)}}function Z(U,ae="signal"){if(pe(U,ae),z[U]===void 0)throw z[b(U)]!==void 0?new R(U+" (signals must use all capital letters)"):new R(U)}var H=_((U,ae="buffer")=>{if(!C(U))throw new m(ae,["Buffer","TypedArray","DataView"],U)});function N(U,ae){let _e=E(ae),ee=U.length;if(_e==="hex"&&ee%2!==0)throw new v("encoding",ae,`is invalid for data of length ${ee}`)}function W(U,ae="Port",_e=!0){if(typeof U!="number"&&typeof U!="string"||typeof U=="string"&&w(U).length===0||+U!==+U>>>0||U>65535||U===0&&!_e)throw new A(ae,U,_e);return U|0}var le=_((U,ae)=>{if(U!==void 0&&(U===null||typeof U!="object"||!("aborted"in U)))throw new m(ae,"AbortSignal",U)}),ie=_((U,ae)=>{if(typeof U!="function")throw new m(ae,"Function",U)}),P=_((U,ae)=>{if(typeof U!="function"||I(U))throw new m(ae,"Function",U)}),M=_((U,ae)=>{if(U!==void 0)throw new m(ae,"undefined",U)});function Y(U,ae,_e){if(!l(_e,U))throw new m(ae,`('${h(_e,"|")}')`,U)}var te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ne(U,ae){if(typeof U>"u"||!d(te,U))throw new v(ae,U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ue(U){if(typeof U=="string")return ne(U,"hints"),U;if(o(U)){let ae=U.length,_e="";if(ae===0)return _e;for(let ee=0;ee<ae;ee++){let Ce=U[ee];ne(Ce,"hints"),_e+=Ce,ee!==ae-1&&(_e+=", ")}return _e}throw new v("hints",U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}c.exports={isInt32:K,isUint32:be,parseFileMode:J,validateArray:re,validateStringArray:Oe,validateBooleanArray:$,validateAbortSignalArray:x,validateBoolean:we,validateBuffer:H,validateDictionary:Pe,validateEncoding:N,validateFunction:ie,validateInt32:ye,validateInteger:F,validateNumber:Te,validateObject:se,validateOneOf:V,validatePlainFunction:P,validatePort:W,validateSignalName:Z,validateString:pe,validateUint32:me,validateUndefined:M,validateUnion:Y,validateAbortSignal:le,validateLinkHeaderValue:ue}}),Jt=ve((s,c)=>{ce(),de(),fe();var o=c.exports={},l,h;function i(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=i}catch{l=i}try{typeof clearTimeout=="function"?h=clearTimeout:h=e}catch{h=e}})();function r(A){if(l===setTimeout)return setTimeout(A,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(A,0);try{return l(A,0)}catch{try{return l.call(null,A,0)}catch{return l.call(this,A,0)}}}function t(A){if(h===clearTimeout)return clearTimeout(A);if((h===e||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(A);try{return h(A)}catch{try{return h.call(null,A)}catch{return h.call(this,A)}}}var n=[],u=!1,f,d=-1;function g(){!u||!f||(u=!1,f.length?n=f.concat(n):d=-1,n.length&&b())}function b(){if(!u){var A=r(g);u=!0;for(var m=n.length;m;){for(f=n,n=[];++d<m;)f&&f[d].run();d=-1,m=n.length}f=null,u=!1,t(A)}}o.nextTick=function(A){var m=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)m[v-1]=arguments[v];n.push(new w(A,m)),n.length===1&&!u&&r(b)};function w(A,m){this.fun=A,this.array=m}w.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function _(){}o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(A){return[]},o.binding=function(A){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(A){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),Pt=ve((s,c)=>{ce(),de(),fe();var{SymbolAsyncIterator:o,SymbolIterator:l,SymbolFor:h}=Ze(),i=h("nodejs.stream.destroyed"),e=h("nodejs.stream.errored"),r=h("nodejs.stream.readable"),t=h("nodejs.stream.writable"),n=h("nodejs.stream.disturbed"),u=h("nodejs.webstream.isClosedPromise"),f=h("nodejs.webstream.controllerErrorFunction");function d(O,se=!1){var Pe;return!!(O&&typeof O.pipe=="function"&&typeof O.on=="function"&&(!se||typeof O.pause=="function"&&typeof O.resume=="function")&&(!O._writableState||((Pe=O._readableState)===null||Pe===void 0?void 0:Pe.readable)!==!1)&&(!O._writableState||O._readableState))}function g(O){var se;return!!(O&&typeof O.write=="function"&&typeof O.on=="function"&&(!O._readableState||((se=O._writableState)===null||se===void 0?void 0:se.writable)!==!1))}function b(O){return!!(O&&typeof O.pipe=="function"&&O._readableState&&typeof O.on=="function"&&typeof O.write=="function")}function w(O){return O&&(O._readableState||O._writableState||typeof O.write=="function"&&typeof O.on=="function"||typeof O.pipe=="function"&&typeof O.on=="function")}function _(O){return!!(O&&!w(O)&&typeof O.pipeThrough=="function"&&typeof O.getReader=="function"&&typeof O.cancel=="function")}function A(O){return!!(O&&!w(O)&&typeof O.getWriter=="function"&&typeof O.abort=="function")}function m(O){return!!(O&&!w(O)&&typeof O.readable=="object"&&typeof O.writable=="object")}function v(O){return _(O)||A(O)||m(O)}function j(O,se){return O==null?!1:se===!0?typeof O[o]=="function":se===!1?typeof O[l]=="function":typeof O[o]=="function"||typeof O[l]=="function"}function R(O){if(!w(O))return null;let se=O._writableState,Pe=O._readableState,re=se||Pe;return!!(O.destroyed||O[i]||re!=null&&re.destroyed)}function E(O){if(!g(O))return null;if(O.writableEnded===!0)return!0;let se=O._writableState;return se!=null&&se.errored?!1:typeof(se==null?void 0:se.ended)!="boolean"?null:se.ended}function I(O,se){if(!g(O))return null;if(O.writableFinished===!0)return!0;let Pe=O._writableState;return Pe!=null&&Pe.errored?!1:typeof(Pe==null?void 0:Pe.finished)!="boolean"?null:!!(Pe.finished||se===!1&&Pe.ended===!0&&Pe.length===0)}function C(O){if(!d(O))return null;if(O.readableEnded===!0)return!0;let se=O._readableState;return!se||se.errored?!1:typeof(se==null?void 0:se.ended)!="boolean"?null:se.ended}function z(O,se){if(!d(O))return null;let Pe=O._readableState;return Pe!=null&&Pe.errored?!1:typeof(Pe==null?void 0:Pe.endEmitted)!="boolean"?null:!!(Pe.endEmitted||se===!1&&Pe.ended===!0&&Pe.length===0)}function K(O){return O&&O[r]!=null?O[r]:typeof(O==null?void 0:O.readable)!="boolean"?null:R(O)?!1:d(O)&&O.readable&&!z(O)}function be(O){return O&&O[t]!=null?O[t]:typeof(O==null?void 0:O.writable)!="boolean"?null:R(O)?!1:g(O)&&O.writable&&!E(O)}function L(O,se){return w(O)?R(O)?!0:!((se==null?void 0:se.readable)!==!1&&K(O)||(se==null?void 0:se.writable)!==!1&&be(O)):null}function Q(O){var se,Pe;return w(O)?O.writableErrored?O.writableErrored:(se=(Pe=O._writableState)===null||Pe===void 0?void 0:Pe.errored)!==null&&se!==void 0?se:null:null}function J(O){var se,Pe;return w(O)?O.readableErrored?O.readableErrored:(se=(Pe=O._readableState)===null||Pe===void 0?void 0:Pe.errored)!==null&&se!==void 0?se:null:null}function F(O){if(!w(O))return null;if(typeof O.closed=="boolean")return O.closed;let se=O._writableState,Pe=O._readableState;return typeof(se==null?void 0:se.closed)=="boolean"||typeof(Pe==null?void 0:Pe.closed)=="boolean"?(se==null?void 0:se.closed)||(Pe==null?void 0:Pe.closed):typeof O._closed=="boolean"&&ye(O)?O._closed:null}function ye(O){return typeof O._closed=="boolean"&&typeof O._defaultKeepAlive=="boolean"&&typeof O._removedConnection=="boolean"&&typeof O._removedContLen=="boolean"}function me(O){return typeof O._sent100=="boolean"&&ye(O)}function pe(O){var se;return typeof O._consuming=="boolean"&&typeof O._dumped=="boolean"&&((se=O.req)===null||se===void 0?void 0:se.upgradeOrConnect)===void 0}function Te(O){if(!w(O))return null;let se=O._writableState,Pe=O._readableState,re=se||Pe;return!re&&me(O)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function V(O){var se;return!!(O&&((se=O[n])!==null&&se!==void 0?se:O.readableDidRead||O.readableAborted))}function we(O){var se,Pe,re,Oe,$,x,Z,H,N,W;return!!(O&&((se=(Pe=(re=(Oe=($=(x=O[e])!==null&&x!==void 0?x:O.readableErrored)!==null&&$!==void 0?$:O.writableErrored)!==null&&Oe!==void 0?Oe:(Z=O._readableState)===null||Z===void 0?void 0:Z.errorEmitted)!==null&&re!==void 0?re:(H=O._writableState)===null||H===void 0?void 0:H.errorEmitted)!==null&&Pe!==void 0?Pe:(N=O._readableState)===null||N===void 0?void 0:N.errored)!==null&&se!==void 0?se:!((W=O._writableState)===null||W===void 0)&&W.errored))}c.exports={isDestroyed:R,kIsDestroyed:i,isDisturbed:V,kIsDisturbed:n,isErrored:we,kIsErrored:e,isReadable:K,kIsReadable:r,kIsClosedPromise:u,kControllerErrorFunction:f,kIsWritable:t,isClosed:F,isDuplexNodeStream:b,isFinished:L,isIterable:j,isReadableNodeStream:d,isReadableStream:_,isReadableEnded:C,isReadableFinished:z,isReadableErrored:J,isNodeStream:w,isWebStream:v,isWritable:be,isWritableNodeStream:g,isWritableStream:A,isWritableEnded:E,isWritableFinished:I,isWritableErrored:Q,isServerRequest:pe,isServerResponse:me,willEmitClose:Te,isTransformStream:m}}),Nt=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{AbortError:l,codes:h}=st(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:e}=h,{kEmptyObject:r,once:t}=ut(),{validateAbortSignal:n,validateFunction:u,validateObject:f,validateBoolean:d}=dr(),{Promise:g,PromisePrototypeThen:b,SymbolDispose:w}=Ze(),{isClosed:_,isReadable:A,isReadableNodeStream:m,isReadableStream:v,isReadableFinished:j,isReadableErrored:R,isWritable:E,isWritableNodeStream:I,isWritableStream:C,isWritableFinished:z,isWritableErrored:K,isNodeStream:be,willEmitClose:L,kIsClosedPromise:Q}=Pt(),J;function F(V){return V.setHeader&&typeof V.abort=="function"}var ye=()=>{};function me(V,we,O){var se,Pe;if(arguments.length===2?(O=we,we=r):we==null?we=r:f(we,"options"),u(O,"callback"),n(we.signal,"options.signal"),O=t(O),v(V)||C(V))return pe(V,we,O);if(!be(V))throw new i("stream",["ReadableStream","WritableStream","Stream"],V);let re=(se=we.readable)!==null&&se!==void 0?se:m(V),Oe=(Pe=we.writable)!==null&&Pe!==void 0?Pe:I(V),$=V._writableState,x=V._readableState,Z=()=>{V.writable||W()},H=L(V)&&m(V)===re&&I(V)===Oe,N=z(V,!1),W=()=>{N=!0,V.destroyed&&(H=!1),!(H&&(!V.readable||re))&&(!re||le)&&O.call(V)},le=j(V,!1),ie=()=>{le=!0,V.destroyed&&(H=!1),!(H&&(!V.writable||Oe))&&(!Oe||N)&&O.call(V)},P=U=>{O.call(V,U)},M=_(V),Y=()=>{M=!0;let U=K(V)||R(V);if(U&&typeof U!="boolean")return O.call(V,U);if(re&&!le&&m(V,!0)&&!j(V,!1))return O.call(V,new e);if(Oe&&!N&&!z(V,!1))return O.call(V,new e);O.call(V)},te=()=>{M=!0;let U=K(V)||R(V);if(U&&typeof U!="boolean")return O.call(V,U);O.call(V)},ne=()=>{V.req.on("finish",W)};F(V)?(V.on("complete",W),H||V.on("abort",Y),V.req?ne():V.on("request",ne)):Oe&&!$&&(V.on("end",Z),V.on("close",Z)),!H&&typeof V.aborted=="boolean"&&V.on("aborted",Y),V.on("end",ie),V.on("finish",W),we.error!==!1&&V.on("error",P),V.on("close",Y),M?o.nextTick(Y):$!=null&&$.errorEmitted||x!=null&&x.errorEmitted?H||o.nextTick(te):(!re&&(!H||A(V))&&(N||E(V)===!1)||!Oe&&(!H||E(V))&&(le||A(V)===!1)||x&&V.req&&V.aborted)&&o.nextTick(te);let ue=()=>{O=ye,V.removeListener("aborted",Y),V.removeListener("complete",W),V.removeListener("abort",Y),V.removeListener("request",ne),V.req&&V.req.removeListener("finish",W),V.removeListener("end",Z),V.removeListener("close",Z),V.removeListener("finish",W),V.removeListener("end",ie),V.removeListener("error",P),V.removeListener("close",Y)};if(we.signal&&!M){let U=()=>{let ae=O;ue(),ae.call(V,new l(void 0,{cause:we.signal.reason}))};if(we.signal.aborted)o.nextTick(U);else{J=J||ut().addAbortListener;let ae=J(we.signal,U),_e=O;O=t((...ee)=>{ae[w](),_e.apply(V,ee)})}}return ue}function pe(V,we,O){let se=!1,Pe=ye;if(we.signal)if(Pe=()=>{se=!0,O.call(V,new l(void 0,{cause:we.signal.reason}))},we.signal.aborted)o.nextTick(Pe);else{J=J||ut().addAbortListener;let Oe=J(we.signal,Pe),$=O;O=t((...x)=>{Oe[w](),$.apply(V,x)})}let re=(...Oe)=>{se||o.nextTick(()=>O.apply(V,Oe))};return b(V[Q].promise,re,re),ye}function Te(V,we){var O;let se=!1;return we===null&&(we=r),(O=we)!==null&&O!==void 0&&O.cleanup&&(d(we.cleanup,"cleanup"),se=we.cleanup),new g((Pe,re)=>{let Oe=me(V,we,$=>{se&&Oe(),$?re($):Pe()})})}c.exports=me,c.exports.finished=Te}),ir=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:i}=st(),{Symbol:e}=Ze(),{kIsDestroyed:r,isDestroyed:t,isFinished:n,isServerRequest:u}=Pt(),f=e("kDestroy"),d=e("kConstruct");function g(L,Q,J){L&&(L.stack,Q&&!Q.errored&&(Q.errored=L),J&&!J.errored&&(J.errored=L))}function b(L,Q){let J=this._readableState,F=this._writableState,ye=F||J;return F!=null&&F.destroyed||J!=null&&J.destroyed?(typeof Q=="function"&&Q(),this):(g(L,F,J),F&&(F.destroyed=!0),J&&(J.destroyed=!0),ye.constructed?w(this,L,Q):this.once(f,function(me){w(this,l(me,L),Q)}),this)}function w(L,Q,J){let F=!1;function ye(me){if(F)return;F=!0;let pe=L._readableState,Te=L._writableState;g(me,Te,pe),Te&&(Te.closed=!0),pe&&(pe.closed=!0),typeof J=="function"&&J(me),me?o.nextTick(_,L,me):o.nextTick(A,L)}try{L._destroy(Q||null,ye)}catch(me){ye(me)}}function _(L,Q){m(L,Q),A(L)}function A(L){let Q=L._readableState,J=L._writableState;J&&(J.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(J!=null&&J.emitClose||Q!=null&&Q.emitClose)&&L.emit("close")}function m(L,Q){let J=L._readableState,F=L._writableState;F!=null&&F.errorEmitted||J!=null&&J.errorEmitted||(F&&(F.errorEmitted=!0),J&&(J.errorEmitted=!0),L.emit("error",Q))}function v(){let L=this._readableState,Q=this._writableState;L&&(L.constructed=!0,L.closed=!1,L.closeEmitted=!1,L.destroyed=!1,L.errored=null,L.errorEmitted=!1,L.reading=!1,L.ended=L.readable===!1,L.endEmitted=L.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function j(L,Q,J){let F=L._readableState,ye=L._writableState;if(ye!=null&&ye.destroyed||F!=null&&F.destroyed)return this;F!=null&&F.autoDestroy||ye!=null&&ye.autoDestroy?L.destroy(Q):Q&&(Q.stack,ye&&!ye.errored&&(ye.errored=Q),F&&!F.errored&&(F.errored=Q),J?o.nextTick(m,L,Q):m(L,Q))}function R(L,Q){if(typeof L._construct!="function")return;let J=L._readableState,F=L._writableState;J&&(J.constructed=!1),F&&(F.constructed=!1),L.once(d,Q),!(L.listenerCount(d)>1)&&o.nextTick(E,L)}function E(L){let Q=!1;function J(F){if(Q){j(L,F??new h);return}Q=!0;let ye=L._readableState,me=L._writableState,pe=me||ye;ye&&(ye.constructed=!0),me&&(me.constructed=!0),pe.destroyed?L.emit(f,F):F?j(L,F,!0):o.nextTick(I,L)}try{L._construct(F=>{o.nextTick(J,F)})}catch(F){o.nextTick(J,F)}}function I(L){L.emit(d)}function C(L){return(L==null?void 0:L.setHeader)&&typeof L.abort=="function"}function z(L){L.emit("close")}function K(L,Q){L.emit("error",Q),o.nextTick(z,L)}function be(L,Q){!L||t(L)||(!Q&&!n(L)&&(Q=new i),u(L)?(L.socket=null,L.destroy(Q)):C(L)?L.abort():C(L.req)?L.req.abort():typeof L.destroy=="function"?L.destroy(Q):typeof L.close=="function"?L.close():Q?o.nextTick(K,L,Q):o.nextTick(z,L),L.destroyed||(L[r]=!0))}c.exports={construct:R,destroyer:be,destroy:b,undestroy:v,errorOrDestroy:j}}),_n=ve((s,c)=>{ce(),de(),fe();var{ArrayIsArray:o,ObjectSetPrototypeOf:l}=Ze(),{EventEmitter:h}=(Yt(),He(jt));function i(r){h.call(this,r)}l(i.prototype,h.prototype),l(i,h),i.prototype.pipe=function(r,t){let n=this;function u(A){r.writable&&r.write(A)===!1&&n.pause&&n.pause()}n.on("data",u);function f(){n.readable&&n.resume&&n.resume()}r.on("drain",f),!r._isStdio&&(!t||t.end!==!1)&&(n.on("end",g),n.on("close",b));let d=!1;function g(){d||(d=!0,r.end())}function b(){d||(d=!0,typeof r.destroy=="function"&&r.destroy())}function w(A){_(),h.listenerCount(this,"error")===0&&this.emit("error",A)}e(n,"error",w),e(r,"error",w);function _(){n.removeListener("data",u),r.removeListener("drain",f),n.removeListener("end",g),n.removeListener("close",b),n.removeListener("error",w),r.removeListener("error",w),n.removeListener("end",_),n.removeListener("close",_),r.removeListener("close",_)}return n.on("end",_),n.on("close",_),r.on("close",_),r.emit("pipe",n),r};function e(r,t,n){if(typeof r.prependListener=="function")return r.prependListener(t,n);!r._events||!r._events[t]?r.on(t,n):o(r._events[t])?r._events[t].unshift(n):r._events[t]=[n,r._events[t]]}c.exports={Stream:i,prependListener:e}}),Rr=ve((s,c)=>{ce(),de(),fe();var{SymbolDispose:o}=Ze(),{AbortError:l,codes:h}=st(),{isNodeStream:i,isWebStream:e,kControllerErrorFunction:r}=Pt(),t=Nt(),{ERR_INVALID_ARG_TYPE:n}=h,u,f=(d,g)=>{if(typeof d!="object"||!("aborted"in d))throw new n(g,"AbortSignal",d)};c.exports.addAbortSignal=function(d,g){if(f(d,"signal"),!i(g)&&!e(g))throw new n("stream",["ReadableStream","WritableStream","Stream"],g);return c.exports.addAbortSignalNoValidate(d,g)},c.exports.addAbortSignalNoValidate=function(d,g){if(typeof d!="object"||!("aborted"in d))return g;let b=i(g)?()=>{g.destroy(new l(void 0,{cause:d.reason}))}:()=>{g[r](new l(void 0,{cause:d.reason}))};if(d.aborted)b();else{u=u||ut().addAbortListener;let w=u(d,b);t(g,w[o])}return g}}),Ks=ve((s,c)=>{ce(),de(),fe();var{StringPrototypeSlice:o,SymbolIterator:l,TypedArrayPrototypeSet:h,Uint8Array:i}=Ze(),{Buffer:e}=(it(),He(rt)),{inspect:r}=ut();c.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){let n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,u=""+n.data;for(;(n=n.next)!==null;)u+=t+n.data;return u}concat(t){if(this.length===0)return e.alloc(0);let n=e.allocUnsafe(t>>>0),u=this.head,f=0;for(;u;)h(n,u.data,f),f+=u.data.length,u=u.next;return n}consume(t,n){let u=this.head.data;if(t<u.length){let f=u.slice(0,t);return this.head.data=u.slice(t),f}return t===u.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[l](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",u=this.head,f=0;do{let d=u.data;if(t>d.length)n+=d,t-=d.length;else{t===d.length?(n+=d,++f,u.next?this.head=u.next:this.head=this.tail=null):(n+=o(d,0,t),this.head=u,u.data=o(d,t));break}++f}while((u=u.next)!==null);return this.length-=f,n}_getBuffer(t){let n=e.allocUnsafe(t),u=t,f=this.head,d=0;do{let g=f.data;if(t>g.length)h(n,g,u-t),t-=g.length;else{t===g.length?(h(n,g,u-t),++d,f.next?this.head=f.next:this.head=this.tail=null):(h(n,new i(g.buffer,g.byteOffset,t),u-t),this.head=f,f.data=g.slice(t));break}++d}while((f=f.next)!==null);return this.length-=d,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return r(this,{...n,depth:0,customInspect:!1})}}}),xr=ve((s,c)=>{ce(),de(),fe();var{MathFloor:o,NumberIsInteger:l}=Ze(),{validateInteger:h}=dr(),{ERR_INVALID_ARG_VALUE:i}=st().codes,e=16*1024,r=16;function t(d,g,b){return d.highWaterMark!=null?d.highWaterMark:g?d[b]:null}function n(d){return d?r:e}function u(d,g){h(g,"value",0),d?r=g:e=g}function f(d,g,b,w){let _=t(g,w,b);if(_!=null){if(!l(_)||_<0){let A=w?`options.${b}`:"options.highWaterMark";throw new i(A,_)}return o(_)}return n(d.objectMode)}c.exports={getHighWaterMark:f,getDefaultHighWaterMark:n,setDefaultHighWaterMark:u}}),Gs=ve((s,c)=>{ce(),de(),fe();var o=(it(),He(rt)),l=o.Buffer;function h(e,r){for(var t in e)r[t]=e[t]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?c.exports=o:(h(o,s),s.Buffer=i);function i(e,r,t){return l(e,r,t)}i.prototype=Object.create(l.prototype),h(l,i),i.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,r,t)},i.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=l(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n},i.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},i.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),Qs=ve(s=>{ce(),de(),fe();var c=Gs().Buffer,o=c.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(m){if(!m)return"utf8";for(var v;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(v)return;m=(""+m).toLowerCase(),v=!0}}function h(m){var v=l(m);if(typeof v!="string"&&(c.isEncoding===o||!o(m)))throw new Error("Unknown encoding: "+m);return v||m}s.StringDecoder=i;function i(m){this.encoding=h(m);var v;switch(this.encoding){case"utf16le":this.text=d,this.end=g,v=4;break;case"utf8":this.fillLast=n,v=4;break;case"base64":this.text=b,this.end=w,v=3;break;default:this.write=_,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(v)}i.prototype.write=function(m){if(m.length===0)return"";var v,j;if(this.lastNeed){if(v=this.fillLast(m),v===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<m.length?v?v+this.text(m,j):this.text(m,j):v||""},i.prototype.end=f,i.prototype.text=u,i.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function e(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function r(m,v,j){var R=v.length-1;if(R<j)return 0;var E=e(v[R]);return E>=0?(E>0&&(m.lastNeed=E-1),E):--R<j||E===-2?0:(E=e(v[R]),E>=0?(E>0&&(m.lastNeed=E-2),E):--R<j||E===-2?0:(E=e(v[R]),E>=0?(E>0&&(E===2?E=0:m.lastNeed=E-3),E):0))}function t(m,v,j){if((v[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return m.lastNeed=2,""}}function n(m){var v=this.lastTotal-this.lastNeed,j=t(this,m);if(j!==void 0)return j;if(this.lastNeed<=m.length)return m.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,v,0,m.length),this.lastNeed-=m.length}function u(m,v){var j=r(this,m,v);if(!this.lastNeed)return m.toString("utf8",v);this.lastTotal=j;var R=m.length-(j-this.lastNeed);return m.copy(this.lastChar,0,R),m.toString("utf8",v,R)}function f(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+"":v}function d(m,v){if((m.length-v)%2===0){var j=m.toString("utf16le",v);if(j){var R=j.charCodeAt(j.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",v,m.length-1)}function g(m){var v=m&&m.length?this.write(m):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,j)}return v}function b(m,v){var j=(m.length-v)%3;return j===0?m.toString("base64",v):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",v,m.length-j))}function w(m){var v=m&&m.length?this.write(m):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(m){return m.toString(this.encoding)}function A(m){return m&&m.length?this.write(m):""}}),Ao=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{PromisePrototypeThen:l,SymbolAsyncIterator:h,SymbolIterator:i}=Ze(),{Buffer:e}=(it(),He(rt)),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_NULL_VALUES:t}=st().codes;function n(u,f,d){let g;if(typeof f=="string"||f instanceof e)return new u({objectMode:!0,...d,read(){this.push(f),this.push(null)}});let b;if(f&&f[h])b=!0,g=f[h]();else if(f&&f[i])b=!1,g=f[i]();else throw new r("iterable",["Iterable"],f);let w=new u({objectMode:!0,highWaterMark:1,...d}),_=!1;w._read=function(){_||(_=!0,m())},w._destroy=function(v,j){l(A(v),()=>o.nextTick(j,v),R=>o.nextTick(j,R||v))};async function A(v){let j=v!=null,R=typeof g.throw=="function";if(j&&R){let{value:E,done:I}=await g.throw(v);if(await E,I)return}if(typeof g.return=="function"){let{value:E}=await g.return();await E}}async function m(){for(;;){try{let{value:v,done:j}=b?await g.next():g.next();if(j)w.push(null);else{let R=v&&typeof v.then=="function"?await v:v;if(R===null)throw _=!1,new t;if(w.push(R))continue;_=!1}}catch(v){w.destroy(v)}break}}return w}c.exports=n}),Br=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{ArrayPrototypeIndexOf:l,NumberIsInteger:h,NumberIsNaN:i,NumberParseInt:e,ObjectDefineProperties:r,ObjectKeys:t,ObjectSetPrototypeOf:n,Promise:u,SafeSet:f,SymbolAsyncDispose:d,SymbolAsyncIterator:g,Symbol:b}=Ze();c.exports=ee,ee.ReadableState=_e;var{EventEmitter:w}=(Yt(),He(jt)),{Stream:_,prependListener:A}=_n(),{Buffer:m}=(it(),He(rt)),{addAbortSignal:v}=Rr(),j=Nt(),R=ut().debuglog("stream",S=>{R=S}),E=Ks(),I=ir(),{getHighWaterMark:C,getDefaultHighWaterMark:z}=xr(),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:be,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:J,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:F},AbortError:ye}=st(),{validateObject:me}=dr(),pe=b("kPaused"),{StringDecoder:Te}=Qs(),V=Ao();n(ee.prototype,_.prototype),n(ee,_);var we=()=>{},{errorOrDestroy:O}=I,se=1,Pe=2,re=4,Oe=8,$=16,x=32,Z=64,H=128,N=256,W=512,le=1024,ie=2048,P=4096,M=8192,Y=16384,te=32768,ne=65536,ue=1<<17,U=1<<18;function ae(S){return{enumerable:!1,get(){return(this.state&S)!==0},set(k){k?this.state|=S:this.state&=~S}}}r(_e.prototype,{objectMode:ae(se),ended:ae(Pe),endEmitted:ae(re),reading:ae(Oe),constructed:ae($),sync:ae(x),needReadable:ae(Z),emittedReadable:ae(H),readableListening:ae(N),resumeScheduled:ae(W),errorEmitted:ae(le),emitClose:ae(ie),autoDestroy:ae(P),destroyed:ae(M),closed:ae(Y),closeEmitted:ae(te),multiAwaitDrain:ae(ne),readingMore:ae(ue),dataEmitted:ae(U)});function _e(S,k,he){typeof he!="boolean"&&(he=k instanceof Tt()),this.state=ie|P|$|x,S&&S.objectMode&&(this.state|=se),he&&S&&S.readableObjectMode&&(this.state|=se),this.highWaterMark=S?C(this,S,"readableHighWaterMark",he):z(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[pe]=null,S&&S.emitClose===!1&&(this.state&=~ie),S&&S.autoDestroy===!1&&(this.state&=~P),this.errored=null,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new Te(S.encoding),this.encoding=S.encoding)}function ee(S){if(!(this instanceof ee))return new ee(S);let k=this instanceof Tt();this._readableState=new _e(S,this,k),S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.construct=="function"&&(this._construct=S.construct),S.signal&&!k&&v(S.signal,this)),_.call(this,S),I.construct(this,()=>{this._readableState.needReadable&&Ue(this,this._readableState)})}ee.prototype.destroy=I.destroy,ee.prototype._undestroy=I.undestroy,ee.prototype._destroy=function(S,k){k(S)},ee.prototype[w.captureRejectionSymbol]=function(S){this.destroy(S)},ee.prototype[d]=function(){let S;return this.destroyed||(S=this.readableEnded?null:new ye,this.destroy(S)),new u((k,he)=>j(this,Ae=>Ae&&Ae!==S?he(Ae):k(null)))},ee.prototype.push=function(S,k){return Ce(this,S,k,!1)},ee.prototype.unshift=function(S,k){return Ce(this,S,k,!0)};function Ce(S,k,he,Ae){R("readableAddChunk",k);let ge=S._readableState,Ne;if(ge.state&se||(typeof k=="string"?(he=he||ge.defaultEncoding,ge.encoding!==he&&(Ae&&ge.encoding?k=m.from(k,he).toString(ge.encoding):(k=m.from(k,he),he=""))):k instanceof m?he="":_._isUint8Array(k)?(k=_._uint8ArrayToBuffer(k),he=""):k!=null&&(Ne=new be("chunk",["string","Buffer","Uint8Array"],k))),Ne)O(S,Ne);else if(k===null)ge.state&=~Oe,q(S,ge);else if(ge.state&se||k&&k.length>0)if(Ae)if(ge.state&re)O(S,new F);else{if(ge.destroyed||ge.errored)return!1;a(S,ge,k,!0)}else if(ge.ended)O(S,new J);else{if(ge.destroyed||ge.errored)return!1;ge.state&=~Oe,ge.decoder&&!he?(k=ge.decoder.write(k),ge.objectMode||k.length!==0?a(S,ge,k,!1):Ue(S,ge)):a(S,ge,k,!1)}else Ae||(ge.state&=~Oe,Ue(S,ge));return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function a(S,k,he,Ae){k.flowing&&k.length===0&&!k.sync&&S.listenerCount("data")>0?(k.state&ne?k.awaitDrainWriters.clear():k.awaitDrainWriters=null,k.dataEmitted=!0,S.emit("data",he)):(k.length+=k.objectMode?1:he.length,Ae?k.buffer.unshift(he):k.buffer.push(he),k.state&Z&&X(S)),Ue(S,k)}ee.prototype.isPaused=function(){let S=this._readableState;return S[pe]===!0||S.flowing===!1},ee.prototype.setEncoding=function(S){let k=new Te(S);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;let he=this._readableState.buffer,Ae="";for(let ge of he)Ae+=k.write(ge);return he.clear(),Ae!==""&&he.push(Ae),this._readableState.length=Ae.length,this};var p=1073741824;function y(S){if(S>p)throw new Q("size","<= 1GiB",S);return S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++,S}function B(S,k){return S<=0||k.length===0&&k.ended?0:k.state&se?1:i(S)?k.flowing&&k.length?k.buffer.first().length:k.length:S<=k.length?S:k.ended?k.length:0}ee.prototype.read=function(S){R("read",S),S===void 0?S=NaN:h(S)||(S=e(S,10));let k=this._readableState,he=S;if(S>k.highWaterMark&&(k.highWaterMark=y(S)),S!==0&&(k.state&=~H),S===0&&k.needReadable&&((k.highWaterMark!==0?k.length>=k.highWaterMark:k.length>0)||k.ended))return R("read: emitReadable",k.length,k.ended),k.length===0&&k.ended?Re(this):X(this),null;if(S=B(S,k),S===0&&k.ended)return k.length===0&&Re(this),null;let Ae=(k.state&Z)!==0;if(R("need readable",Ae),(k.length===0||k.length-S<k.highWaterMark)&&(Ae=!0,R("length less than watermark",Ae)),k.ended||k.reading||k.destroyed||k.errored||!k.constructed)Ae=!1,R("reading, ended or constructing",Ae);else if(Ae){R("do read"),k.state|=Oe|x,k.length===0&&(k.state|=Z);try{this._read(k.highWaterMark)}catch(Ne){O(this,Ne)}k.state&=~x,k.reading||(S=B(he,k))}let ge;return S>0?ge=Le(S,k):ge=null,ge===null?(k.needReadable=k.length<=k.highWaterMark,S=0):(k.length-=S,k.multiAwaitDrain?k.awaitDrainWriters.clear():k.awaitDrainWriters=null),k.length===0&&(k.ended||(k.needReadable=!0),he!==S&&k.ended&&Re(this)),ge!==null&&!k.errorEmitted&&!k.closeEmitted&&(k.dataEmitted=!0,this.emit("data",ge)),ge};function q(S,k){if(R("onEofChunk"),!k.ended){if(k.decoder){let he=k.decoder.end();he&&he.length&&(k.buffer.push(he),k.length+=k.objectMode?1:he.length)}k.ended=!0,k.sync?X(S):(k.needReadable=!1,k.emittedReadable=!0,Se(S))}}function X(S){let k=S._readableState;R("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(R("emitReadable",k.flowing),k.emittedReadable=!0,o.nextTick(Se,S))}function Se(S){let k=S._readableState;R("emitReadable_",k.destroyed,k.length,k.ended),!k.destroyed&&!k.errored&&(k.length||k.ended)&&(S.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,Ie(S)}function Ue(S,k){!k.readingMore&&k.constructed&&(k.readingMore=!0,o.nextTick(tt,S,k))}function tt(S,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&k.length===0);){let he=k.length;if(R("maybeReadMore read 0"),S.read(0),he===k.length)break}k.readingMore=!1}ee.prototype._read=function(S){throw new L("_read()")},ee.prototype.pipe=function(S,k){let he=this,Ae=this._readableState;Ae.pipes.length===1&&(Ae.multiAwaitDrain||(Ae.multiAwaitDrain=!0,Ae.awaitDrainWriters=new f(Ae.awaitDrainWriters?[Ae.awaitDrainWriters]:[]))),Ae.pipes.push(S),R("pipe count=%d opts=%j",Ae.pipes.length,k);let ge=(!k||k.end!==!1)&&S!==o.stdout&&S!==o.stderr?ze:or;Ae.endEmitted?o.nextTick(ge):he.once("end",ge),S.on("unpipe",Ne);function Ne(Ft,_t){R("onunpipe"),Ft===he&&_t&&_t.hasUnpiped===!1&&(_t.hasUnpiped=!0,Dt())}function ze(){R("onend"),S.end()}let Ke,lt=!1;function Dt(){R("cleanup"),S.removeListener("close",Ur),S.removeListener("finish",jr),Ke&&S.removeListener("drain",Ke),S.removeListener("error",Zt),S.removeListener("unpipe",Ne),he.removeListener("end",ze),he.removeListener("end",or),he.removeListener("data",wt),lt=!0,Ke&&Ae.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&Ke()}function dt(){lt||(Ae.pipes.length===1&&Ae.pipes[0]===S?(R("false write response, pause",0),Ae.awaitDrainWriters=S,Ae.multiAwaitDrain=!1):Ae.pipes.length>1&&Ae.pipes.includes(S)&&(R("false write response, pause",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.add(S)),he.pause()),Ke||(Ke=De(he,S),S.on("drain",Ke))}he.on("data",wt);function wt(Ft){R("ondata");let _t=S.write(Ft);R("dest.write",_t),_t===!1&&dt()}function Zt(Ft){if(R("onerror",Ft),or(),S.removeListener("error",Zt),S.listenerCount("error")===0){let _t=S._writableState||S._readableState;_t&&!_t.errorEmitted?O(S,Ft):S.emit("error",Ft)}}A(S,"error",Zt);function Ur(){S.removeListener("finish",jr),or()}S.once("close",Ur);function jr(){R("onfinish"),S.removeListener("close",Ur),or()}S.once("finish",jr);function or(){R("unpipe"),he.unpipe(S)}return S.emit("pipe",he),S.writableNeedDrain===!0?dt():Ae.flowing||(R("pipe resume"),he.resume()),S};function De(S,k){return function(){let he=S._readableState;he.awaitDrainWriters===k?(R("pipeOnDrain",1),he.awaitDrainWriters=null):he.multiAwaitDrain&&(R("pipeOnDrain",he.awaitDrainWriters.size),he.awaitDrainWriters.delete(k)),(!he.awaitDrainWriters||he.awaitDrainWriters.size===0)&&S.listenerCount("data")&&S.resume()}}ee.prototype.unpipe=function(S){let k=this._readableState,he={hasUnpiped:!1};if(k.pipes.length===0)return this;if(!S){let ge=k.pipes;k.pipes=[],this.pause();for(let Ne=0;Ne<ge.length;Ne++)ge[Ne].emit("unpipe",this,{hasUnpiped:!1});return this}let Ae=l(k.pipes,S);return Ae===-1?this:(k.pipes.splice(Ae,1),k.pipes.length===0&&this.pause(),S.emit("unpipe",this,he),this)},ee.prototype.on=function(S,k){let he=_.prototype.on.call(this,S,k),Ae=this._readableState;return S==="data"?(Ae.readableListening=this.listenerCount("readable")>0,Ae.flowing!==!1&&this.resume()):S==="readable"&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,R("on readable",Ae.length,Ae.reading),Ae.length?X(this):Ae.reading||o.nextTick(D,this)),he},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(S,k){let he=_.prototype.removeListener.call(this,S,k);return S==="readable"&&o.nextTick(Be,this),he},ee.prototype.off=ee.prototype.removeListener,ee.prototype.removeAllListeners=function(S){let k=_.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&o.nextTick(Be,this),k};function Be(S){let k=S._readableState;k.readableListening=S.listenerCount("readable")>0,k.resumeScheduled&&k[pe]===!1?k.flowing=!0:S.listenerCount("data")>0?S.resume():k.readableListening||(k.flowing=null)}function D(S){R("readable nexttick read 0"),S.read(0)}ee.prototype.resume=function(){let S=this._readableState;return S.flowing||(R("resume"),S.flowing=!S.readableListening,G(this,S)),S[pe]=!1,this};function G(S,k){k.resumeScheduled||(k.resumeScheduled=!0,o.nextTick(oe,S,k))}function oe(S,k){R("resume",k.reading),k.reading||S.read(0),k.resumeScheduled=!1,S.emit("resume"),Ie(S),k.flowing&&!k.reading&&S.read(0)}ee.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[pe]=!0,this};function Ie(S){let k=S._readableState;for(R("flow",k.flowing);k.flowing&&S.read()!==null;);}ee.prototype.wrap=function(S){let k=!1;S.on("data",Ae=>{!this.push(Ae)&&S.pause&&(k=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",Ae=>{O(this,Ae)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{k&&S.resume&&(k=!1,S.resume())};let he=t(S);for(let Ae=1;Ae<he.length;Ae++){let ge=he[Ae];this[ge]===void 0&&typeof S[ge]=="function"&&(this[ge]=S[ge].bind(S))}return this},ee.prototype[g]=function(){return Ee(this)},ee.prototype.iterator=function(S){return S!==void 0&&me(S,"options"),Ee(this,S)};function Ee(S,k){typeof S.read!="function"&&(S=ee.wrap(S,{objectMode:!0}));let he=ke(S,k);return he.stream=S,he}async function*ke(S,k){let he=we;function Ae(ze){this===S?(he(),he=we):he=ze}S.on("readable",Ae);let ge,Ne=j(S,{writable:!1},ze=>{ge=ze?K(ge,ze):null,he(),he=we});try{for(;;){let ze=S.destroyed?null:S.read();if(ze!==null)yield ze;else{if(ge)throw ge;if(ge===null)return;await new u(Ae)}}}catch(ze){throw ge=K(ge,ze),ge}finally{(ge||(k==null?void 0:k.destroyOnReturn)!==!1)&&(ge===void 0||S._readableState.autoDestroy)?I.destroyer(S,null):(S.off("readable",Ae),Ne())}}r(ee.prototype,{readable:{__proto__:null,get(){let S=this._readableState;return!!S&&S.readable!==!1&&!S.destroyed&&!S.errorEmitted&&!S.endEmitted},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),r(_e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[pe]!==!1},set(S){this[pe]=!!S}}}),ee._fromList=Le;function Le(S,k){if(k.length===0)return null;let he;return k.objectMode?he=k.buffer.shift():!S||S>=k.length?(k.decoder?he=k.buffer.join(""):k.buffer.length===1?he=k.buffer.first():he=k.buffer.concat(k.length),k.buffer.clear()):he=k.buffer.consume(S,k.decoder),he}function Re(S){let k=S._readableState;R("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,o.nextTick(Ve,k,S))}function Ve(S,k){if(R("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&S.length===0){if(S.endEmitted=!0,k.emit("end"),k.writable&&k.allowHalfOpen===!1)o.nextTick(at,k);else if(S.autoDestroy){let he=k._writableState;(!he||he.autoDestroy&&(he.finished||he.writable===!1))&&k.destroy()}}}function at(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}ee.from=function(S,k){return V(ee,S,k)};var We;function ft(){return We===void 0&&(We={}),We}ee.fromWeb=function(S,k){return ft().newStreamReadableFromReadableStream(S,k)},ee.toWeb=function(S,k){return ft().newReadableStreamFromStreamReadable(S,k)},ee.wrap=function(S,k){var he,Ae;return new ee({objectMode:(he=(Ae=S.readableObjectMode)!==null&&Ae!==void 0?Ae:S.objectMode)!==null&&he!==void 0?he:!0,...k,destroy(ge,Ne){I.destroyer(S,ge),Ne(ge)}}).wrap(S)}}),vn=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{ArrayPrototypeSlice:l,Error:h,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:e,ObjectDefineProperties:r,ObjectSetPrototypeOf:t,StringPrototypeToLowerCase:n,Symbol:u,SymbolHasInstance:f}=Ze();c.exports=me,me.WritableState=F;var{EventEmitter:d}=(Yt(),He(jt)),g=_n().Stream,{Buffer:b}=(it(),He(rt)),w=ir(),{addAbortSignal:_}=Rr(),{getHighWaterMark:A,getDefaultHighWaterMark:m}=xr(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:j,ERR_MULTIPLE_CALLBACK:R,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:z,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:be}=st().codes,{errorOrDestroy:L}=w;t(me.prototype,g.prototype),t(me,g);function Q(){}var J=u("kOnFinished");function F(P,M,Y){typeof Y!="boolean"&&(Y=M instanceof Tt()),this.objectMode=!!(P&&P.objectMode),Y&&(this.objectMode=this.objectMode||!!(P&&P.writableObjectMode)),this.highWaterMark=P?A(this,P,"writableHighWaterMark",Y):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let te=!!(P&&P.decodeStrings===!1);this.decodeStrings=!te,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=O.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ye(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!P||P.emitClose!==!1,this.autoDestroy=!P||P.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J]=[]}function ye(P){P.buffered=[],P.bufferedIndex=0,P.allBuffers=!0,P.allNoop=!0}F.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},e(F.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function me(P){let M=this instanceof Tt();if(!M&&!i(me,this))return new me(P);this._writableState=new F(P,this,M),P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&_(P.signal,this)),g.call(this,P),w.construct(this,()=>{let Y=this._writableState;Y.writing||Oe(this,Y),H(this,Y)})}e(me,f,{__proto__:null,value:function(P){return i(this,P)?!0:this!==me?!1:P&&P._writableState instanceof F}}),me.prototype.pipe=function(){L(this,new E)};function pe(P,M,Y,te){let ne=P._writableState;if(typeof Y=="function")te=Y,Y=ne.defaultEncoding;else{if(!Y)Y=ne.defaultEncoding;else if(Y!=="buffer"&&!b.isEncoding(Y))throw new be(Y);typeof te!="function"&&(te=Q)}if(M===null)throw new z;if(!ne.objectMode)if(typeof M=="string")ne.decodeStrings!==!1&&(M=b.from(M,Y),Y="buffer");else if(M instanceof b)Y="buffer";else if(g._isUint8Array(M))M=g._uint8ArrayToBuffer(M),Y="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],M);let ue;return ne.ending?ue=new K:ne.destroyed&&(ue=new I("write")),ue?(o.nextTick(te,ue),L(P,ue,!0),ue):(ne.pendingcb++,Te(P,ne,M,Y,te))}me.prototype.write=function(P,M,Y){return pe(this,P,M,Y)===!0},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){let P=this._writableState;P.corked&&(P.corked--,P.writing||Oe(this,P))},me.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=n(P)),!b.isEncoding(P))throw new be(P);return this._writableState.defaultEncoding=P,this};function Te(P,M,Y,te,ne){let ue=M.objectMode?1:Y.length;M.length+=ue;let U=M.length<M.highWaterMark;return U||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:Y,encoding:te,callback:ne}),M.allBuffers&&te!=="buffer"&&(M.allBuffers=!1),M.allNoop&&ne!==Q&&(M.allNoop=!1)):(M.writelen=ue,M.writecb=ne,M.writing=!0,M.sync=!0,P._write(Y,te,M.onwrite),M.sync=!1),U&&!M.errored&&!M.destroyed}function V(P,M,Y,te,ne,ue,U){M.writelen=te,M.writecb=U,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new I("write")):Y?P._writev(ne,M.onwrite):P._write(ne,ue,M.onwrite),M.sync=!1}function we(P,M,Y,te){--M.pendingcb,te(Y),re(M),L(P,Y)}function O(P,M){let Y=P._writableState,te=Y.sync,ne=Y.writecb;if(typeof ne!="function"){L(P,new R);return}Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0,M?(M.stack,Y.errored||(Y.errored=M),P._readableState&&!P._readableState.errored&&(P._readableState.errored=M),te?o.nextTick(we,P,Y,M,ne):we(P,Y,M,ne)):(Y.buffered.length>Y.bufferedIndex&&Oe(P,Y),te?Y.afterWriteTickInfo!==null&&Y.afterWriteTickInfo.cb===ne?Y.afterWriteTickInfo.count++:(Y.afterWriteTickInfo={count:1,cb:ne,stream:P,state:Y},o.nextTick(se,Y.afterWriteTickInfo)):Pe(P,Y,1,ne))}function se({stream:P,state:M,count:Y,cb:te}){return M.afterWriteTickInfo=null,Pe(P,M,Y,te)}function Pe(P,M,Y,te){for(!M.ending&&!P.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,P.emit("drain"));Y-- >0;)M.pendingcb--,te();M.destroyed&&re(M),H(P,M)}function re(P){if(P.writing)return;for(let ne=P.bufferedIndex;ne<P.buffered.length;++ne){var M;let{chunk:ue,callback:U}=P.buffered[ne],ae=P.objectMode?1:ue.length;P.length-=ae,U((M=P.errored)!==null&&M!==void 0?M:new I("write"))}let Y=P[J].splice(0);for(let ne=0;ne<Y.length;ne++){var te;Y[ne]((te=P.errored)!==null&&te!==void 0?te:new I("end"))}ye(P)}function Oe(P,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;let{buffered:Y,bufferedIndex:te,objectMode:ne}=M,ue=Y.length-te;if(!ue)return;let U=te;if(M.bufferProcessing=!0,ue>1&&P._writev){M.pendingcb-=ue-1;let ae=M.allNoop?Q:ee=>{for(let Ce=U;Ce<Y.length;++Ce)Y[Ce].callback(ee)},_e=M.allNoop&&U===0?Y:l(Y,U);_e.allBuffers=M.allBuffers,V(P,M,!0,M.length,_e,"",ae),ye(M)}else{do{let{chunk:ae,encoding:_e,callback:ee}=Y[U];Y[U++]=null;let Ce=ne?1:ae.length;V(P,M,!1,Ce,ae,_e,ee)}while(U<Y.length&&!M.writing);U===Y.length?ye(M):U>256?(Y.splice(0,U),M.bufferedIndex=0):M.bufferedIndex=U}M.bufferProcessing=!1}me.prototype._write=function(P,M,Y){if(this._writev)this._writev([{chunk:P,encoding:M}],Y);else throw new j("_write()")},me.prototype._writev=null,me.prototype.end=function(P,M,Y){let te=this._writableState;typeof P=="function"?(Y=P,P=null,M=null):typeof M=="function"&&(Y=M,M=null);let ne;if(P!=null){let ue=pe(this,P,M);ue instanceof h&&(ne=ue)}return te.corked&&(te.corked=1,this.uncork()),ne||(!te.errored&&!te.ending?(te.ending=!0,H(this,te,!0),te.ended=!0):te.finished?ne=new C("end"):te.destroyed&&(ne=new I("end"))),typeof Y=="function"&&(ne||te.finished?o.nextTick(Y,ne):te[J].push(Y)),this};function $(P){return P.ending&&!P.destroyed&&P.constructed&&P.length===0&&!P.errored&&P.buffered.length===0&&!P.finished&&!P.writing&&!P.errorEmitted&&!P.closeEmitted}function x(P,M){let Y=!1;function te(ne){if(Y){L(P,ne??R());return}if(Y=!0,M.pendingcb--,ne){let ue=M[J].splice(0);for(let U=0;U<ue.length;U++)ue[U](ne);L(P,ne,M.sync)}else $(M)&&(M.prefinished=!0,P.emit("prefinish"),M.pendingcb++,o.nextTick(N,P,M))}M.sync=!0,M.pendingcb++;try{P._final(te)}catch(ne){te(ne)}M.sync=!1}function Z(P,M){!M.prefinished&&!M.finalCalled&&(typeof P._final=="function"&&!M.destroyed?(M.finalCalled=!0,x(P,M)):(M.prefinished=!0,P.emit("prefinish")))}function H(P,M,Y){$(M)&&(Z(P,M),M.pendingcb===0&&(Y?(M.pendingcb++,o.nextTick((te,ne)=>{$(ne)?N(te,ne):ne.pendingcb--},P,M)):$(M)&&(M.pendingcb++,N(P,M))))}function N(P,M){M.pendingcb--,M.finished=!0;let Y=M[J].splice(0);for(let te=0;te<Y.length;te++)Y[te]();if(P.emit("finish"),M.autoDestroy){let te=P._readableState;(!te||te.autoDestroy&&(te.endEmitted||te.readable===!1))&&P.destroy()}}r(me.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(P){this._writableState&&(this._writableState.destroyed=P)}},writable:{__proto__:null,get(){let P=this._writableState;return!!P&&P.writable!==!1&&!P.destroyed&&!P.errored&&!P.ending&&!P.ended},set(P){this._writableState&&(this._writableState.writable=!!P)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let P=this._writableState;return P?!P.destroyed&&!P.ending&&P.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var W=w.destroy;me.prototype.destroy=function(P,M){let Y=this._writableState;return!Y.destroyed&&(Y.bufferedIndex<Y.buffered.length||Y[J].length)&&o.nextTick(re,Y),W.call(this,P,M),this},me.prototype._undestroy=w.undestroy,me.prototype._destroy=function(P,M){M(P)},me.prototype[d.captureRejectionSymbol]=function(P){this.destroy(P)};var le;function ie(){return le===void 0&&(le={}),le}me.fromWeb=function(P,M){return ie().newStreamWritableFromWritableStream(P,M)},me.toWeb=function(P){return ie().newWritableStreamFromStreamWritable(P)}}),Ys=ve((s,c)=>{ce(),de(),fe();var o=Jt(),l=(it(),He(rt)),{isReadable:h,isWritable:i,isIterable:e,isNodeStream:r,isReadableNodeStream:t,isWritableNodeStream:n,isDuplexNodeStream:u,isReadableStream:f,isWritableStream:d}=Pt(),g=Nt(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:w,ERR_INVALID_RETURN_VALUE:_}}=st(),{destroyer:A}=ir(),m=Tt(),v=Br(),j=vn(),{createDeferredPromise:R}=ut(),E=Ao(),I=globalThis.Blob||l.Blob,C=typeof I<"u"?function(J){return J instanceof I}:function(J){return!1},z=globalThis.AbortController||fr().AbortController,{FunctionPrototypeCall:K}=Ze(),be=class extends m{constructor(J){super(J),(J==null?void 0:J.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(J==null?void 0:J.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};c.exports=function J(F,ye){if(u(F))return F;if(t(F))return Q({readable:F});if(n(F))return Q({writable:F});if(r(F))return Q({writable:!1,readable:!1});if(f(F))return Q({readable:v.fromWeb(F)});if(d(F))return Q({writable:j.fromWeb(F)});if(typeof F=="function"){let{value:pe,write:Te,final:V,destroy:we}=L(F);if(e(pe))return E(be,pe,{objectMode:!0,write:Te,final:V,destroy:we});let O=pe==null?void 0:pe.then;if(typeof O=="function"){let se,Pe=K(O,pe,re=>{if(re!=null)throw new _("nully","body",re)},re=>{A(se,re)});return se=new be({objectMode:!0,readable:!1,write:Te,final(re){V(async()=>{try{await Pe,o.nextTick(re,null)}catch(Oe){o.nextTick(re,Oe)}})},destroy:we})}throw new _("Iterable, AsyncIterable or AsyncFunction",ye,pe)}if(C(F))return J(F.arrayBuffer());if(e(F))return E(be,F,{objectMode:!0,writable:!1});if(f(F==null?void 0:F.readable)&&d(F==null?void 0:F.writable))return be.fromWeb(F);if(typeof(F==null?void 0:F.writable)=="object"||typeof(F==null?void 0:F.readable)=="object"){let pe=F!=null&&F.readable?t(F==null?void 0:F.readable)?F==null?void 0:F.readable:J(F.readable):void 0,Te=F!=null&&F.writable?n(F==null?void 0:F.writable)?F==null?void 0:F.writable:J(F.writable):void 0;return Q({readable:pe,writable:Te})}let me=F==null?void 0:F.then;if(typeof me=="function"){let pe;return K(me,F,Te=>{Te!=null&&pe.push(Te),pe.push(null)},Te=>{A(pe,Te)}),pe=new be({objectMode:!0,writable:!1,read(){}})}throw new w(ye,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],F)};function L(J){let{promise:F,resolve:ye}=R(),me=new z,pe=me.signal;return{value:J(async function*(){for(;;){let Te=F;F=null;let{chunk:V,done:we,cb:O}=await Te;if(o.nextTick(O),we)return;if(pe.aborted)throw new b(void 0,{cause:pe.reason});({promise:F,resolve:ye}=R()),yield V}}(),{signal:pe}),write(Te,V,we){let O=ye;ye=null,O({chunk:Te,done:!1,cb:we})},final(Te){let V=ye;ye=null,V({done:!0,cb:Te})},destroy(Te,V){me.abort(),V(Te)}}}function Q(J){let F=J.readable&&typeof J.readable.read!="function"?v.wrap(J.readable):J.readable,ye=J.writable,me=!!h(F),pe=!!i(ye),Te,V,we,O,se;function Pe(re){let Oe=O;O=null,Oe?Oe(re):re&&se.destroy(re)}return se=new be({readableObjectMode:!!(F!=null&&F.readableObjectMode),writableObjectMode:!!(ye!=null&&ye.writableObjectMode),readable:me,writable:pe}),pe&&(g(ye,re=>{pe=!1,re&&A(F,re),Pe(re)}),se._write=function(re,Oe,$){ye.write(re,Oe)?$():Te=$},se._final=function(re){ye.end(),V=re},ye.on("drain",function(){if(Te){let re=Te;Te=null,re()}}),ye.on("finish",function(){if(V){let re=V;V=null,re()}})),me&&(g(F,re=>{me=!1,re&&A(F,re),Pe(re)}),F.on("readable",function(){if(we){let re=we;we=null,re()}}),F.on("end",function(){se.push(null)}),se._read=function(){for(;;){let re=F.read();if(re===null){we=se._read;return}if(!se.push(re))return}}),se._destroy=function(re,Oe){!re&&O!==null&&(re=new b),we=null,Te=null,V=null,O===null?Oe(re):(O=Oe,A(ye,re),A(F,re))},se}}),Tt=ve((s,c)=>{ce(),de(),fe();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:h,ObjectSetPrototypeOf:i}=Ze();c.exports=t;var e=Br(),r=vn();i(t.prototype,e.prototype),i(t,e);{let d=h(r.prototype);for(let g=0;g<d.length;g++){let b=d[g];t.prototype[b]||(t.prototype[b]=r.prototype[b])}}function t(d){if(!(this instanceof t))return new t(d);e.call(this,d),r.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(t.prototype,{writable:{__proto__:null,...l(r.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(r.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(r.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(r.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(r.prototype,"writableLength")},writableFinished:{__proto__:null,...l(r.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(r.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(r.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(r.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var n;function u(){return n===void 0&&(n={}),n}t.fromWeb=function(d,g){return u().newStreamDuplexFromReadableWritablePair(d,g)},t.toWeb=function(d){return u().newReadableWritablePairFromDuplex(d)};var f;t.from=function(d){return f||(f=Ys()),f(d,"body")}}),Io=ve((s,c)=>{ce(),de(),fe();var{ObjectSetPrototypeOf:o,Symbol:l}=Ze();c.exports=t;var{ERR_METHOD_NOT_IMPLEMENTED:h}=st().codes,i=Tt(),{getHighWaterMark:e}=xr();o(t.prototype,i.prototype),o(t,i);var r=l("kCallback");function t(f){if(!(this instanceof t))return new t(f);let d=f?e(this,f,"readableHighWaterMark",!0):null;d===0&&(f={...f,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:f.writableHighWaterMark||0}),i.call(this,f),this._readableState.sync=!1,this[r]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",u)}function n(f){typeof this._flush=="function"&&!this.destroyed?this._flush((d,g)=>{if(d){f?f(d):this.destroy(d);return}g!=null&&this.push(g),this.push(null),f&&f()}):(this.push(null),f&&f())}function u(){this._final!==n&&n.call(this)}t.prototype._final=n,t.prototype._transform=function(f,d,g){throw new h("_transform()")},t.prototype._write=function(f,d,g){let b=this._readableState,w=this._writableState,_=b.length;this._transform(f,d,(A,m)=>{if(A){g(A);return}m!=null&&this.push(m),w.ended||_===b.length||b.length<b.highWaterMark?g():this[r]=g})},t.prototype._read=function(){if(this[r]){let f=this[r];this[r]=null,f()}}}),ko=ve((s,c)=>{ce(),de(),fe();var{ObjectSetPrototypeOf:o}=Ze();c.exports=h;var l=Io();o(h.prototype,l.prototype),o(h,l);function h(i){if(!(this instanceof h))return new h(i);l.call(this,i)}h.prototype._transform=function(i,e,r){r(null,i)}}),En=ve((s,c)=>{ce(),de(),fe();var o=Jt(),{ArrayIsArray:l,Promise:h,SymbolAsyncIterator:i,SymbolDispose:e}=Ze(),r=Nt(),{once:t}=ut(),n=ir(),u=Tt(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:A}=st(),{validateFunction:m,validateAbortSignal:v}=dr(),{isIterable:j,isReadable:R,isReadableNodeStream:E,isNodeStream:I,isTransformStream:C,isWebStream:z,isReadableStream:K,isReadableFinished:be}=Pt(),L=globalThis.AbortController||fr().AbortController,Q,J,F;function ye(re,Oe,$){let x=!1;re.on("close",()=>{x=!0});let Z=r(re,{readable:Oe,writable:$},H=>{x=!H});return{destroy:H=>{x||(x=!0,n.destroyer(re,H||new w("pipe")))},cleanup:Z}}function me(re){return m(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function pe(re){if(j(re))return re;if(E(re))return Te(re);throw new d("val",["Readable","Iterable","AsyncIterable"],re)}async function*Te(re){J||(J=Br()),yield*J.prototype[i].call(re)}async function V(re,Oe,$,{end:x}){let Z,H=null,N=ie=>{if(ie&&(Z=ie),H){let P=H;H=null,P()}},W=()=>new h((ie,P)=>{Z?P(Z):H=()=>{Z?P(Z):ie()}});Oe.on("drain",N);let le=r(Oe,{readable:!1},N);try{Oe.writableNeedDrain&&await W();for await(let ie of re)Oe.write(ie)||await W();x&&(Oe.end(),await W()),$()}catch(ie){$(Z!==ie?f(Z,ie):ie)}finally{le(),Oe.off("drain",N)}}async function we(re,Oe,$,{end:x}){C(Oe)&&(Oe=Oe.writable);let Z=Oe.getWriter();try{for await(let H of re)await Z.ready,Z.write(H).catch(()=>{});await Z.ready,x&&await Z.close(),$()}catch(H){try{await Z.abort(H),$(H)}catch(N){$(N)}}}function O(...re){return se(re,t(me(re)))}function se(re,Oe,$){if(re.length===1&&l(re[0])&&(re=re[0]),re.length<2)throw new b("streams");let x=new L,Z=x.signal,H=$==null?void 0:$.signal,N=[];v(H,"options.signal");function W(){ne(new A)}F=F||ut().addAbortListener;let le;H&&(le=F(H,W));let ie,P,M=[],Y=0;function te(_e){ne(_e,--Y===0)}function ne(_e,ee){var Ce;if(_e&&(!ie||ie.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ie=_e),!(!ie&&!ee)){for(;M.length;)M.shift()(ie);(Ce=le)===null||Ce===void 0||Ce[e](),x.abort(),ee&&(ie||N.forEach(a=>a()),o.nextTick(Oe,ie,P))}}let ue;for(let _e=0;_e<re.length;_e++){let ee=re[_e],Ce=_e<re.length-1,a=_e>0,p=Ce||($==null?void 0:$.end)!==!1,y=_e===re.length-1;if(I(ee)){let B=function(q){q&&q.name!=="AbortError"&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&te(q)};if(p){let{destroy:q,cleanup:X}=ye(ee,Ce,a);M.push(q),R(ee)&&y&&N.push(X)}ee.on("error",B),R(ee)&&y&&N.push(()=>{ee.removeListener("error",B)})}if(_e===0)if(typeof ee=="function"){if(ue=ee({signal:Z}),!j(ue))throw new g("Iterable, AsyncIterable or Stream","source",ue)}else j(ee)||E(ee)||C(ee)?ue=ee:ue=u.from(ee);else if(typeof ee=="function"){if(C(ue)){var U;ue=pe((U=ue)===null||U===void 0?void 0:U.readable)}else ue=pe(ue);if(ue=ee(ue,{signal:Z}),Ce){if(!j(ue,!0))throw new g("AsyncIterable",`transform[${_e-1}]`,ue)}else{var ae;Q||(Q=ko());let B=new Q({objectMode:!0}),q=(ae=ue)===null||ae===void 0?void 0:ae.then;if(typeof q=="function")Y++,q.call(ue,Ue=>{P=Ue,Ue!=null&&B.write(Ue),p&&B.end(),o.nextTick(te)},Ue=>{B.destroy(Ue),o.nextTick(te,Ue)});else if(j(ue,!0))Y++,V(ue,B,te,{end:p});else if(K(ue)||C(ue)){let Ue=ue.readable||ue;Y++,V(Ue,B,te,{end:p})}else throw new g("AsyncIterable or Promise","destination",ue);ue=B;let{destroy:X,cleanup:Se}=ye(ue,!1,!0);M.push(X),y&&N.push(Se)}}else if(I(ee)){if(E(ue)){Y+=2;let B=Pe(ue,ee,te,{end:p});R(ee)&&y&&N.push(B)}else if(C(ue)||K(ue)){let B=ue.readable||ue;Y++,V(B,ee,te,{end:p})}else if(j(ue))Y++,V(ue,ee,te,{end:p});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ue);ue=ee}else if(z(ee)){if(E(ue))Y++,we(pe(ue),ee,te,{end:p});else if(K(ue)||j(ue))Y++,we(ue,ee,te,{end:p});else if(C(ue))Y++,we(ue.readable,ee,te,{end:p});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ue);ue=ee}else ue=u.from(ee)}return(Z!=null&&Z.aborted||H!=null&&H.aborted)&&o.nextTick(W),ue}function Pe(re,Oe,$,{end:x}){let Z=!1;if(Oe.on("close",()=>{Z||$(new _)}),re.pipe(Oe,{end:!1}),x){let H=function(){Z=!0,Oe.end()};be(re)?o.nextTick(H):re.once("end",H)}else $();return r(re,{readable:!0,writable:!1},H=>{let N=re._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&N&&N.ended&&!N.errored&&!N.errorEmitted?re.once("end",$).once("error",$):$(H)}),r(Oe,{readable:!1,writable:!0},$)}c.exports={pipelineImpl:se,pipeline:O}}),To=ve((s,c)=>{ce(),de(),fe();var{pipeline:o}=En(),l=Tt(),{destroyer:h}=ir(),{isNodeStream:i,isReadable:e,isWritable:r,isWebStream:t,isTransformStream:n,isWritableStream:u,isReadableStream:f}=Pt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:b}}=st(),w=Nt();c.exports=function(..._){if(_.length===0)throw new b("streams");if(_.length===1)return l.from(_[0]);let A=[..._];if(typeof _[0]=="function"&&(_[0]=l.from(_[0])),typeof _[_.length-1]=="function"){let L=_.length-1;_[L]=l.from(_[L])}for(let L=0;L<_.length;++L)if(!(!i(_[L])&&!t(_[L]))){if(L<_.length-1&&!(e(_[L])||f(_[L])||n(_[L])))throw new g(`streams[${L}]`,A[L],"must be readable");if(L>0&&!(r(_[L])||u(_[L])||n(_[L])))throw new g(`streams[${L}]`,A[L],"must be writable")}let m,v,j,R,E;function I(L){let Q=R;R=null,Q?Q(L):L?E.destroy(L):!be&&!K&&E.destroy()}let C=_[0],z=o(_,I),K=!!(r(C)||u(C)||n(C)),be=!!(e(z)||f(z)||n(z));if(E=new l({writableObjectMode:!!(C!=null&&C.writableObjectMode),readableObjectMode:!!(z!=null&&z.readableObjectMode),writable:K,readable:be}),K){if(i(C))E._write=function(Q,J,F){C.write(Q,J)?F():m=F},E._final=function(Q){C.end(),v=Q},C.on("drain",function(){if(m){let Q=m;m=null,Q()}});else if(t(C)){let Q=(n(C)?C.writable:C).getWriter();E._write=async function(J,F,ye){try{await Q.ready,Q.write(J).catch(()=>{}),ye()}catch(me){ye(me)}},E._final=async function(J){try{await Q.ready,Q.close().catch(()=>{}),v=J}catch(F){J(F)}}}let L=n(z)?z.readable:z;w(L,()=>{if(v){let Q=v;v=null,Q()}})}if(be){if(i(z))z.on("readable",function(){if(j){let L=j;j=null,L()}}),z.on("end",function(){E.push(null)}),E._read=function(){for(;;){let L=z.read();if(L===null){j=E._read;return}if(!E.push(L))return}};else if(t(z)){let L=(n(z)?z.readable:z).getReader();E._read=async function(){for(;;)try{let{value:Q,done:J}=await L.read();if(!E.push(Q))return;if(J){E.push(null);return}}catch{return}}}}return E._destroy=function(L,Q){!L&&R!==null&&(L=new d),j=null,m=null,v=null,R===null?Q(L):(R=Q,i(z)&&h(z,L))},E}}),Js=ve((s,c)=>{ce(),de(),fe();var o=globalThis.AbortController||fr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:e},AbortError:r}=st(),{validateAbortSignal:t,validateInteger:n,validateObject:u}=dr(),f=Ze().Symbol("kWeak"),d=Ze().Symbol("kResistStopPropagation"),{finished:g}=Nt(),b=To(),{addAbortSignalNoValidate:w}=Rr(),{isWritable:_,isNodeStream:A}=Pt(),{deprecate:m}=ut(),{ArrayPrototypePush:v,Boolean:j,MathFloor:R,Number:E,NumberIsNaN:I,Promise:C,PromiseReject:z,PromiseResolve:K,PromisePrototypeThen:be,Symbol:L}=Ze(),Q=L("kEmpty"),J=L("kEof");function F(H,N){if(N!=null&&u(N,"options"),(N==null?void 0:N.signal)!=null&&t(N.signal,"options.signal"),A(H)&&!_(H))throw new l("stream",H,"must be writable");let W=b(this,H);return N!=null&&N.signal&&w(N.signal,W),W}function ye(H,N){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);N!=null&&u(N,"options"),(N==null?void 0:N.signal)!=null&&t(N.signal,"options.signal");let W=1;(N==null?void 0:N.concurrency)!=null&&(W=R(N.concurrency));let le=W-1;return(N==null?void 0:N.highWaterMark)!=null&&(le=R(N.highWaterMark)),n(W,"options.concurrency",1),n(le,"options.highWaterMark",0),le+=W,(async function*(){let ie=ut().AbortSignalAny([N==null?void 0:N.signal].filter(j)),P=this,M=[],Y={signal:ie},te,ne,ue=!1,U=0;function ae(){ue=!0,_e()}function _e(){U-=1,ee()}function ee(){ne&&!ue&&U<W&&M.length<le&&(ne(),ne=null)}async function Ce(){try{for await(let a of P){if(ue)return;if(ie.aborted)throw new r;try{if(a=H(a,Y),a===Q)continue;a=K(a)}catch(p){a=z(p)}U+=1,be(a,_e,ae),M.push(a),te&&(te(),te=null),!ue&&(M.length>=le||U>=W)&&await new C(p=>{ne=p})}M.push(J)}catch(a){let p=z(a);be(p,_e,ae),M.push(p)}finally{ue=!0,te&&(te(),te=null)}}Ce();try{for(;;){for(;M.length>0;){let a=await M[0];if(a===J)return;if(ie.aborted)throw new r;a!==Q&&(yield a),M.shift(),ee()}await new C(a=>{te=a})}}finally{ue=!0,ne&&(ne(),ne=null)}}).call(this)}function me(H=void 0){return H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal"),(async function*(){let N=0;for await(let le of this){var W;if(H!=null&&(W=H.signal)!==null&&W!==void 0&&W.aborted)throw new r({cause:H.signal.reason});yield[N++,le]}}).call(this)}async function pe(H,N=void 0){for await(let W of O.call(this,H,N))return!0;return!1}async function Te(H,N=void 0){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);return!await pe.call(this,async(...W)=>!await H(...W),N)}async function V(H,N){for await(let W of O.call(this,H,N))return W}async function we(H,N){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);async function W(le,ie){return await H(le,ie),Q}for await(let le of ye.call(this,W,N));}function O(H,N){if(typeof H!="function")throw new h("fn",["Function","AsyncFunction"],H);async function W(le,ie){return await H(le,ie)?le:Q}return ye.call(this,W,N)}var se=class extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Pe(H,N,W){var le;if(typeof H!="function")throw new h("reducer",["Function","AsyncFunction"],H);W!=null&&u(W,"options"),(W==null?void 0:W.signal)!=null&&t(W.signal,"options.signal");let ie=arguments.length>1;if(W!=null&&(le=W.signal)!==null&&le!==void 0&&le.aborted){let ne=new r(void 0,{cause:W.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(ne)),ne}let P=new o,M=P.signal;if(W!=null&&W.signal){let ne={once:!0,[f]:this,[d]:!0};W.signal.addEventListener("abort",()=>P.abort(),ne)}let Y=!1;try{for await(let ne of this){var te;if(Y=!0,W!=null&&(te=W.signal)!==null&&te!==void 0&&te.aborted)throw new r;ie?N=await H(N,ne,{signal:M}):(N=ne,ie=!0)}if(!Y&&!ie)throw new se}finally{P.abort()}return N}async function re(H){H!=null&&u(H,"options"),(H==null?void 0:H.signal)!=null&&t(H.signal,"options.signal");let N=[];for await(let le of this){var W;if(H!=null&&(W=H.signal)!==null&&W!==void 0&&W.aborted)throw new r(void 0,{cause:H.signal.reason});v(N,le)}return N}function Oe(H,N){let W=ye.call(this,H,N);return(async function*(){for await(let le of W)yield*le}).call(this)}function $(H){if(H=E(H),I(H))return 0;if(H<0)throw new e("number",">= 0",H);return H}function x(H,N=void 0){return N!=null&&u(N,"options"),(N==null?void 0:N.signal)!=null&&t(N.signal,"options.signal"),H=$(H),(async function*(){var W;if(N!=null&&(W=N.signal)!==null&&W!==void 0&&W.aborted)throw new r;for await(let ie of this){var le;if(N!=null&&(le=N.signal)!==null&&le!==void 0&&le.aborted)throw new r;H--<=0&&(yield ie)}}).call(this)}function Z(H,N=void 0){return N!=null&&u(N,"options"),(N==null?void 0:N.signal)!=null&&t(N.signal,"options.signal"),H=$(H),(async function*(){var W;if(N!=null&&(W=N.signal)!==null&&W!==void 0&&W.aborted)throw new r;for await(let ie of this){var le;if(N!=null&&(le=N.signal)!==null&&le!==void 0&&le.aborted)throw new r;if(H-- >0&&(yield ie),H<=0)return}}).call(this)}c.exports.streamReturningOperators={asIndexedPairs:m(me,"readable.asIndexedPairs will be removed in a future version."),drop:x,filter:O,flatMap:Oe,map:ye,take:Z,compose:F},c.exports.promiseReturningOperators={every:Te,forEach:we,reduce:Pe,toArray:re,some:pe,find:V}}),Oo=ve((s,c)=>{ce(),de(),fe();var{ArrayPrototypePop:o,Promise:l}=Ze(),{isIterable:h,isNodeStream:i,isWebStream:e}=Pt(),{pipelineImpl:r}=En(),{finished:t}=Nt();Po();function n(...u){return new l((f,d)=>{let g,b,w=u[u.length-1];if(w&&typeof w=="object"&&!i(w)&&!h(w)&&!e(w)){let _=o(u);g=_.signal,b=_.end}r(u,(_,A)=>{_?d(_):f(A)},{signal:g,end:b})})}c.exports={finished:t,pipeline:n}}),Po=ve((s,c)=>{ce(),de(),fe();var{Buffer:o}=(it(),He(rt)),{ObjectDefineProperty:l,ObjectKeys:h,ReflectApply:i}=Ze(),{promisify:{custom:e}}=ut(),{streamReturningOperators:r,promiseReturningOperators:t}=Js(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:n}}=st(),u=To(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:d}=xr(),{pipeline:g}=En(),{destroyer:b}=ir(),w=Nt(),_=Oo(),A=Pt(),m=c.exports=_n().Stream;m.isDestroyed=A.isDestroyed,m.isDisturbed=A.isDisturbed,m.isErrored=A.isErrored,m.isReadable=A.isReadable,m.isWritable=A.isWritable,m.Readable=Br();for(let j of h(r)){let R=function(...I){if(new.target)throw n();return m.Readable.from(i(E,this,I))},E=r[j];l(R,"name",{__proto__:null,value:E.name}),l(R,"length",{__proto__:null,value:E.length}),l(m.Readable.prototype,j,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}for(let j of h(t)){let R=function(...I){if(new.target)throw n();return i(E,this,I)},E=t[j];l(R,"name",{__proto__:null,value:E.name}),l(R,"length",{__proto__:null,value:E.length}),l(m.Readable.prototype,j,{__proto__:null,value:R,enumerable:!1,configurable:!0,writable:!0})}m.Writable=vn(),m.Duplex=Tt(),m.Transform=Io(),m.PassThrough=ko(),m.pipeline=g;var{addAbortSignal:v}=Rr();m.addAbortSignal=v,m.finished=w,m.destroy=b,m.compose=u,m.setDefaultHighWaterMark=f,m.getDefaultHighWaterMark=d,l(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return _}}),l(g,e,{__proto__:null,enumerable:!0,get(){return _.pipeline}}),l(w,e,{__proto__:null,enumerable:!0,get(){return _.finished}}),m.Stream=m,m._isUint8Array=function(j){return j instanceof Uint8Array},m._uint8ArrayToBuffer=function(j){return o.from(j.buffer,j.byteOffset,j.byteLength)}}),Xt=ve((s,c)=>{ce(),de(),fe();var o=Po(),l=Oo(),h=o.Readable.destroy;c.exports=o.Readable,c.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,c.exports._isUint8Array=o._isUint8Array,c.exports.isDisturbed=o.isDisturbed,c.exports.isErrored=o.isErrored,c.exports.isReadable=o.isReadable,c.exports.Readable=o.Readable,c.exports.Writable=o.Writable,c.exports.Duplex=o.Duplex,c.exports.Transform=o.Transform,c.exports.PassThrough=o.PassThrough,c.exports.addAbortSignal=o.addAbortSignal,c.exports.finished=o.finished,c.exports.destroy=o.destroy,c.exports.destroy=h,c.exports.pipeline=o.pipeline,c.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return l}}),c.exports.Stream=o.Stream,c.exports.default=c.exports}),Xs=ve((s,c)=>{ce(),de(),fe(),typeof Object.create=="function"?c.exports=function(o,l){l&&(o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(o,l){if(l){o.super_=l;var h=function(){};h.prototype=l.prototype,o.prototype=new h,o.prototype.constructor=o}}}),Zs=ve((s,c)=>{ce(),de(),fe();var{Buffer:o}=(it(),He(rt)),l=Symbol.for("BufferList");function h(i){if(!(this instanceof h))return new h(i);h._init.call(this,i)}h._init=function(i){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},h.prototype._new=function(i){return new h(i)},h.prototype._offset=function(i){if(i===0)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){let t=e+this._bufs[r].length;if(i<t||r===this._bufs.length-1)return[r,i-e];e=t}},h.prototype._reverseOffset=function(i){let e=i[0],r=i[1];for(let t=0;t<e;t++)r+=this._bufs[t].length;return r},h.prototype.get=function(i){if(i>this.length||i<0)return;let e=this._offset(i);return this._bufs[e[0]][e[1]]},h.prototype.slice=function(i,e){return typeof i=="number"&&i<0&&(i+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,i,e)},h.prototype.copy=function(i,e,r,t){if((typeof r!="number"||r<0)&&(r=0),(typeof t!="number"||t>this.length)&&(t=this.length),r>=this.length||t<=0)return i||o.alloc(0);let n=!!i,u=this._offset(r),f=t-r,d=f,g=n&&e||0,b=u[1];if(r===0&&t===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(i,g),g+=this._bufs[w].length;return i}if(d<=this._bufs[u[0]].length-b)return n?this._bufs[u[0]].copy(i,e,b,b+d):this._bufs[u[0]].slice(b,b+d);n||(i=o.allocUnsafe(f));for(let w=u[0];w<this._bufs.length;w++){let _=this._bufs[w].length-b;if(d>_)this._bufs[w].copy(i,g,b),g+=_;else{this._bufs[w].copy(i,g,b,b+d),g+=_;break}d-=_,b&&(b=0)}return i.length>g?i.slice(0,g):i},h.prototype.shallowSlice=function(i,e){if(i=i||0,e=typeof e!="number"?this.length:e,i<0&&(i+=this.length),e<0&&(e+=this.length),i===e)return this._new();let r=this._offset(i),t=this._offset(e),n=this._bufs.slice(r[0],t[0]+1);return t[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,t[1]),r[1]!==0&&(n[0]=n[0].slice(r[1])),this._new(n)},h.prototype.toString=function(i,e,r){return this.slice(e,r).toString(i)},h.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this},h.prototype.duplicate=function(){let i=this._new();for(let e=0;e<this._bufs.length;e++)i.append(this._bufs[e]);return i},h.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(o.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let e=0;e<i.length;e++)this.append(i[e]);else if(this._isBufferList(i))for(let e=0;e<i._bufs.length;e++)this.append(i._bufs[e]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(o.from(i));return this},h.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},h.prototype.indexOf=function(i,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof i=="function"||Array.isArray(i))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof i=="number"?i=o.from([i]):typeof i=="string"?i=o.from(i,r):this._isBufferList(i)?i=i.slice():Array.isArray(i.buffer)?i=o.from(i.buffer,i.byteOffset,i.byteLength):o.isBuffer(i)||(i=o.from(i)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),i.length===0)return e>this.length?this.length:e;let t=this._offset(e),n=t[0],u=t[1];for(;n<this._bufs.length;n++){let f=this._bufs[n];for(;u<f.length;)if(f.length-u>=i.length){let d=f.indexOf(i,u);if(d!==-1)return this._reverseOffset([n,d]);u=f.length-i.length+1}else{let d=this._reverseOffset([n,u]);if(this._match(d,i))return d;u++}u=0}return-1},h.prototype._match=function(i,e){if(this.length-i<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(i+r)!==e[r])return!1;return!0},function(){let i={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in i)(function(r){i[r]===null?h.prototype[r]=function(t,n){return this.slice(t,t+n)[r](0,n)}:h.prototype[r]=function(t=0){return this.slice(t,t+i[r])[r](0)}})(e)}(),h.prototype._isBufferList=function(i){return i instanceof h||h.isBufferList(i)},h.isBufferList=function(i){return i!=null&&i[l]},c.exports=h}),ea=ve((s,c)=>{ce(),de(),fe();var o=Xt().Duplex,l=Xs(),h=Zs();function i(e){if(!(this instanceof i))return new i(e);if(typeof e=="function"){this._callback=e;let r=(function(t){this._callback&&(this._callback(t),this._callback=null)}).bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)}),e=null}h._init.call(this,e),o.call(this)}l(i,o),Object.assign(i.prototype,h.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,r,t){this._appendBuffer(e),typeof t=="function"&&t()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof h||i.isBufferList(e)},i.isBufferList=h.isBufferList,c.exports=i,c.exports.BufferListStream=i,c.exports.BufferList=h}),ta=ve((s,c)=>{ce(),de(),fe();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};c.exports=o}),Co=ve((s,c)=>{ce(),de(),fe();var o=c.exports,{Buffer:l}=(it(),He(rt));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let i in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[i];o.requiredHeaderFlagsErrors[i]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[i]+" packet"}o.codes={};for(let i in o.types){let e=o.types[i];o.codes[e]=i}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=l.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=l.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=l.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let i in o.properties){let e=o.properties[i];o.propertiesCodes[e]=i}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(i){return[0,1,2].map(e=>[0,1].map(r=>[0,1].map(t=>{let n=l.alloc(1);return n.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|e<<o.QOS_SHIFT|t,0,!0),n})))}o.PUBLISH_HEADER=h("publish"),o.SUBSCRIBE_HEADER=h("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=h("unsubscribe"),o.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},o.SUBACK_HEADER=l.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=l.from([3]),o.VERSION4=l.from([4]),o.VERSION5=l.from([5]),o.VERSION131=l.from([131]),o.VERSION132=l.from([132]),o.QOS=[0,1,2].map(i=>l.from([i])),o.EMPTY={pingreq:l.from([o.codes.pingreq<<4,0]),pingresp:l.from([o.codes.pingresp<<4,0]),disconnect:l.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),ra=ve((s,c)=>{ce(),de(),fe();var o=1e3,l=o*60,h=l*60,i=h*24,e=i*7,r=i*365.25;c.exports=function(d,g){g=g||{};var b=typeof d;if(b==="string"&&d.length>0)return t(d);if(b==="number"&&isFinite(d))return g.long?u(d):n(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function t(d){if(d=String(d),!(d.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(g){var b=parseFloat(g[1]),w=(g[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return b*r;case"weeks":case"week":case"w":return b*e;case"days":case"day":case"d":return b*i;case"hours":case"hour":case"hrs":case"hr":case"h":return b*h;case"minutes":case"minute":case"mins":case"min":case"m":return b*l;case"seconds":case"second":case"secs":case"sec":case"s":return b*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function n(d){var g=Math.abs(d);return g>=i?Math.round(d/i)+"d":g>=h?Math.round(d/h)+"h":g>=l?Math.round(d/l)+"m":g>=o?Math.round(d/o)+"s":d+"ms"}function u(d){var g=Math.abs(d);return g>=i?f(d,g,i,"day"):g>=h?f(d,g,h,"hour"):g>=l?f(d,g,l,"minute"):g>=o?f(d,g,o,"second"):d+" ms"}function f(d,g,b,w){var _=g>=b*1.5;return Math.round(d/b)+" "+w+(_?"s":"")}}),ia=ve((s,c)=>{ce(),de(),fe();function o(l){i.debug=i,i.default=i,i.coerce=f,i.disable=n,i.enable=r,i.enabled=u,i.humanize=ra(),i.destroy=d,Object.keys(l).forEach(g=>{i[g]=l[g]}),i.names=[],i.skips=[],i.formatters={};function h(g){let b=0;for(let w=0;w<g.length;w++)b=(b<<5)-b+g.charCodeAt(w),b|=0;return i.colors[Math.abs(b)%i.colors.length]}i.selectColor=h;function i(g){let b,w=null,_,A;function m(...v){if(!m.enabled)return;let j=m,R=Number(new Date),E=R-(b||R);j.diff=E,j.prev=b,j.curr=R,b=R,v[0]=i.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let I=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(C,z)=>{if(C==="%%")return"%";I++;let K=i.formatters[z];if(typeof K=="function"){let be=v[I];C=K.call(j,be),v.splice(I,1),I--}return C}),i.formatArgs.call(j,v),(j.log||i.log).apply(j,v)}return m.namespace=g,m.useColors=i.useColors(),m.color=i.selectColor(g),m.extend=e,m.destroy=i.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==i.namespaces&&(_=i.namespaces,A=i.enabled(g)),A),set:v=>{w=v}}),typeof i.init=="function"&&i.init(m),m}function e(g,b){let w=i(this.namespace+(typeof b>"u"?":":b)+g);return w.log=this.log,w}function r(g){i.save(g),i.namespaces=g,i.names=[],i.skips=[];let b=(typeof g=="string"?g:"").trim().replace(" ",",").split(",").filter(Boolean);for(let w of b)w[0]==="-"?i.skips.push(w.slice(1)):i.names.push(w)}function t(g,b){let w=0,_=0,A=-1,m=0;for(;w<g.length;)if(_<b.length&&(b[_]===g[w]||b[_]==="*"))b[_]==="*"?(A=_,m=w,_++):(w++,_++);else if(A!==-1)_=A+1,m++,w=m;else return!1;for(;_<b.length&&b[_]==="*";)_++;return _===b.length}function n(){let g=[...i.names,...i.skips.map(b=>"-"+b)].join(",");return i.enable(""),g}function u(g){for(let b of i.skips)if(t(g,b))return!1;for(let b of i.names)if(t(g,b))return!0;return!1}function f(g){return g instanceof Error?g.stack||g.message:g}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}c.exports=o}),Ot=ve((s,c)=>{ce(),de(),fe(),s.formatArgs=l,s.save=h,s.load=i,s.useColors=o,s.storage=e(),s.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;t.splice(1,0,n,"color: inherit");let u=0,f=0;t[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(f=u))}),t.splice(f,0,n)}s.log=console.debug||console.log||(()=>{});function h(t){try{t?s.storage.setItem("debug",t):s.storage.removeItem("debug")}catch{}}function i(){let t;try{t=s.storage.getItem("debug")}catch{}return!t&&typeof Fe<"u"&&"env"in Fe&&(t=Fe.env.DEBUG),t}function e(){try{return localStorage}catch{}}c.exports=ia()(s);var{formatters:r}=c.exports;r.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}),na=ve((s,c)=>{ce(),de(),fe();var o=ea(),{EventEmitter:l}=(Yt(),He(jt)),h=ta(),i=Co(),e=Ot()("mqtt-packet:parser"),r=class rn extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(n){return this instanceof rn?(this.settings=n||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new rn().parser(n)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=o(),this._stateCounter=0}parse(n){for(this.error&&this._resetState(),this._list.append(n),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let n=this._list.readUInt8(0),u=n>>i.CMD_SHIFT;this.packet.cmd=i.types[u];let f=n&15,d=i.requiredHeaderFlags[u];return d!=null&&f!==d?this._emitError(new Error(i.requiredHeaderFlagsErrors[u])):(this.packet.retain=(n&i.RETAIN_MASK)!==0,this.packet.qos=n>>i.QOS_SHIFT&i.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(n&i.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let n=this._parseVarByteNum(!0);return n&&(this.packet.length=n.value,this._list.consume(n.bytes)),e("_parseLength %d",n.value),!!n}_parsePayload(){e("_parsePayload: payload %O",this._list);let n=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}n=!0}return e("_parsePayload complete result: %s",n),n}_parseConnect(){e("_parseConnect");let n,u,f,d,g={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK;let _=!!(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT;if(g.will)b.will={},b.will.retain=_,b.will.qos=A;else{if(_)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.properties=v)}let m=this._parseString();if(m===null)return this._emitError(new Error("Packet too short"));if(b.clientId=m,e("_parseConnect: packet.clientId: %s",b.clientId),g.will){if(b.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(b.will.properties=v)}if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=n,e("_parseConnect: packet.will.topic: %s",b.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=u,e("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(g.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));b.username=d,e("_parseConnect: packet.username: %s",b.username)}if(g.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));b.password=f}return this.settings=b,e("_parseConnect: complete"),b}_parseConnack(){e("_parseConnack");let n=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(n.sessionPresent=!!(u&i.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?n.reasonCode=this._list.readUInt8(this._pos++):n.reasonCode=0;else{if(this._list.length<2)return null;n.returnCode=this._list.readUInt8(this._pos++)}if(n.returnCode===-1||n.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(n.properties=f)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let n=this.packet;if(n.topic=this._parseString(),n.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(n.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(n.properties=u)}n.payload=this._list.slice(this._pos,n.length),e("_parsePublish: payload from buffer list: %o",n.payload)}}_parseSubscribe(){e("_parseSubscribe");let n=this.packet,u,f,d,g,b,w,_;if(n.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(n.properties=A)}if(n.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<n.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=f&i.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(w=(f>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(f>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=f>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));_={topic:u,qos:d},this.settings.protocolVersion===5?(_.nl=w,_.rap=b,_.rh=g):this.settings.bridgeMode&&(_.rh=0,_.rap=!0,_.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",_),n.subscriptions.push(_)}}}_parseSuback(){e("_parseSuback");let n=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(n.properties=u)}if(n.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!i.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let n=this.packet;if(n.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(n.properties=u)}if(n.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<n.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),n.unsubscriptions.push(u)}}}_parseUnsuback(){e("_parseUnsuback");let n=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&n.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(n.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(n.properties=u),n.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!i.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let n=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(n.length>2){switch(n.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!i.MQTT5_PUBACK_PUBREC_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!i.MQTT5_PUBREL_PUBCOMP_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",n.reasonCode)}else n.reasonCode=0;if(n.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(n.properties=u)}}return!0}_parseDisconnect(){let n=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(n.reasonCode=this._parseByte(),i.MQTT5_DISCONNECT_CODES[n.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):n.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(n.properties=u)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let n=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(n.reasonCode=this._parseByte(),!i.MQTT5_AUTH_CODES[n.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(n.properties=u),e("_parseAuth: result: true"),!0}_parseMessageId(){let n=this.packet;return n.messageId=this._parseNum(),n.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",n.messageId),!0)}_parseString(n){let u=this._parseNum(),f=u+this._pos;if(u===-1||f>this._list.length||f>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,f);return this._pos+=u,e("_parseString: result: %s",d),d}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let n=this._parseNum(),u=n+this._pos;if(n===-1||u>this._list.length||u>this.packet.length)return null;let f=this._list.slice(this._pos,u);return this._pos+=n,e("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let n=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",n),n}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let n=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",n),n}_parseVarByteNum(n){e("_parseVarByteNum");let u=4,f=0,d=1,g=0,b=!1,w,_=this._pos?this._pos:0;for(;f<u&&_+f<this._list.length;){if(w=this._list.readUInt8(_+f++),g+=d*(w&i.VARBYTEINT_MASK),d*=128,!(w&i.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=f)break}return!b&&f===u&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),_&&(this._pos+=f),b?n?b={bytes:f,value:g}:b=g:b=!1,e("_parseVarByteNum: result: %o",b),b}_parseByte(){let n;return this._pos<this._list.length&&(n=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",n),n}_parseByType(n){switch(e("_parseByType: type: %s",n),n){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let n=this._parseVarByteNum(),u=this._pos+n,f={};for(;this._pos<u;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let g=i.propertiesCodes[d];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){f[g]||(f[g]=Object.create(null));let b=this._parseByType(i.propertiesTypes[g]);if(f[g][b.name])if(Array.isArray(f[g][b.name]))f[g][b.name].push(b.value);else{let w=f[g][b.name];f[g][b.name]=[w],f[g][b.name].push(b.value)}else f[g][b.name]=b.value;continue}f[g]?Array.isArray(f[g])?f[g].push(this._parseByType(i.propertiesTypes[g])):(f[g]=[f[g]],f[g].push(this._parseByType(i.propertiesTypes[g]))):f[g]=this._parseByType(i.propertiesTypes[g])}return f}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(n){e("_emitError",n),this.error=n,this.emit("error",n)}};c.exports=r}),oa=ve((s,c)=>{ce(),de(),fe();var{Buffer:o}=(it(),He(rt)),l=65536,h={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function e(u){let f=o.allocUnsafe(2);return f.writeUInt8(u>>8,0),f.writeUInt8(u&255,1),f}function r(){for(let u=0;u<l;u++)h[u]=e(u)}function t(u){let f=0,d=0,g=o.allocUnsafe(4);do f=u%128|0,u=u/128|0,u>0&&(f=f|128),g.writeUInt8(f,d++);while(u>0&&d<4);return u>0&&(d=0),i?g.subarray(0,d):g.slice(0,d)}function n(u){let f=o.allocUnsafe(4);return f.writeUInt32BE(u,0),f}c.exports={cache:h,generateCache:r,generateNumber:e,genBufVariableByteInt:t,generate4ByteBuffer:n}}),sa=ve((s,c)=>{ce(),de(),fe(),typeof Fe>"u"||!Fe.version||Fe.version.indexOf("v0.")===0||Fe.version.indexOf("v1.")===0&&Fe.version.indexOf("v1.8.")!==0?c.exports={nextTick:o}:c.exports=Fe;function o(l,h,i,e){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,t,n;switch(r){case 0:case 1:return Fe.nextTick(l);case 2:return Fe.nextTick(function(){l.call(null,h)});case 3:return Fe.nextTick(function(){l.call(null,h,i)});case 4:return Fe.nextTick(function(){l.call(null,h,i,e)});default:for(t=new Array(r-1),n=0;n<t.length;)t[n++]=arguments[n];return Fe.nextTick(function(){l.apply(null,t)})}}}),Ro=ve((s,c)=>{ce(),de(),fe();var o=Co(),{Buffer:l}=(it(),He(rt)),h=l.allocUnsafe(0),i=l.from([0]),e=oa(),r=sa().nextTick,t=Ot()("mqtt-packet:writeToStream"),n=e.cache,u=e.generateNumber,f=e.generateCache,d=e.genBufVariableByteInt,g=e.generate4ByteBuffer,b=me,w=!0;function _($,x,Z){switch(t("generate called"),x.cork&&(x.cork(),r(A,x)),w&&(w=!1,f()),t("generate: packet.cmd: %s",$.cmd),$.cmd){case"connect":return m($,x);case"connack":return v($,x,Z);case"publish":return j($,x,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return R($,x,Z);case"subscribe":return E($,x,Z);case"suback":return I($,x,Z);case"unsubscribe":return C($,x,Z);case"unsuback":return z($,x,Z);case"pingreq":case"pingresp":return K($,x);case"disconnect":return be($,x,Z);case"auth":return L($,x,Z);default:return x.destroy(new Error("Unknown command")),!1}}Object.defineProperty(_,"cacheNumbers",{get(){return b===me},set($){$?((!n||Object.keys(n).length===0)&&(w=!0),b=me):(w=!1,b=pe)}});function A($){$.uncork()}function m($,x,Z){let H=$||{},N=H.protocolId||"MQTT",W=H.protocolVersion||4,le=H.will,ie=H.clean,P=H.keepalive||0,M=H.clientId||"",Y=H.username,te=H.password,ne=H.properties;ie===void 0&&(ie=!0);let ue=0;if(!N||typeof N!="string"&&!l.isBuffer(N))return x.destroy(new Error("Invalid protocolId")),!1;if(ue+=N.length+2,W!==3&&W!==4&&W!==5)return x.destroy(new Error("Invalid protocol version")),!1;if(ue+=1,(typeof M=="string"||l.isBuffer(M))&&(M||W>=4)&&(M||ie))ue+=l.byteLength(M)+2;else{if(W<4)return x.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ie*1===0)return x.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof P!="number"||P<0||P>65535||P%1!==0)return x.destroy(new Error("Invalid keepalive")),!1;ue+=2,ue+=1;let U,ae;if(W===5){if(U=we(x,ne),!U)return!1;ue+=U.length}if(le){if(typeof le!="object")return x.destroy(new Error("Invalid will")),!1;if(!le.topic||typeof le.topic!="string")return x.destroy(new Error("Invalid will topic")),!1;if(ue+=l.byteLength(le.topic)+2,ue+=2,le.payload)if(le.payload.length>=0)typeof le.payload=="string"?ue+=l.byteLength(le.payload):ue+=le.payload.length;else return x.destroy(new Error("Invalid will payload")),!1;if(ae={},W===5){if(ae=we(x,le.properties),!ae)return!1;ue+=ae.length}}let _e=!1;if(Y!=null)if(Oe(Y))_e=!0,ue+=l.byteLength(Y)+2;else return x.destroy(new Error("Invalid username")),!1;if(te!=null){if(!_e)return x.destroy(new Error("Username is required to use password")),!1;if(Oe(te))ue+=re(te)+2;else return x.destroy(new Error("Invalid password")),!1}x.write(o.CONNECT_HEADER),J(x,ue),V(x,N),H.bridgeMode&&(W+=128),x.write(W===131?o.VERSION131:W===132?o.VERSION132:W===4?o.VERSION4:W===5?o.VERSION5:o.VERSION3);let ee=0;return ee|=Y!=null?o.USERNAME_MASK:0,ee|=te!=null?o.PASSWORD_MASK:0,ee|=le&&le.retain?o.WILL_RETAIN_MASK:0,ee|=le&&le.qos?le.qos<<o.WILL_QOS_SHIFT:0,ee|=le?o.WILL_FLAG_MASK:0,ee|=ie?o.CLEAN_SESSION_MASK:0,x.write(l.from([ee])),b(x,P),W===5&&U.write(),V(x,M),le&&(W===5&&ae.write(),F(x,le.topic),V(x,le.payload)),Y!=null&&V(x,Y),te!=null&&V(x,te),!0}function v($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=H===5?N.reasonCode:N.returnCode,le=N.properties,ie=2;if(typeof W!="number")return x.destroy(new Error("Invalid return code")),!1;let P=null;if(H===5){if(P=we(x,le),!P)return!1;ie+=P.length}return x.write(o.CONNACK_HEADER),J(x,ie),x.write(N.sessionPresent?o.SESSIONPRESENT_HEADER:i),x.write(l.from([W])),P==null||P.write(),!0}function j($,x,Z){t("publish: packet: %o",$);let H=Z?Z.protocolVersion:4,N=$||{},W=N.qos||0,le=N.retain?o.RETAIN_MASK:0,ie=N.topic,P=N.payload||h,M=N.messageId,Y=N.properties,te=0;if(typeof ie=="string")te+=l.byteLength(ie)+2;else if(l.isBuffer(ie))te+=ie.length+2;else return x.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(P)?te+=P.length:te+=l.byteLength(P),W&&typeof M!="number")return x.destroy(new Error("Invalid messageId")),!1;W&&(te+=2);let ne=null;if(H===5){if(ne=we(x,Y),!ne)return!1;te+=ne.length}return x.write(o.PUBLISH_HEADER[W][N.dup?1:0][le?1:0]),J(x,te),b(x,re(ie)),x.write(ie),W>0&&b(x,M),ne==null||ne.write(),t("publish: payload: %o",P),x.write(P)}function R($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.cmd||"puback",le=N.messageId,ie=N.dup&&W==="pubrel"?o.DUP_MASK:0,P=0,M=N.reasonCode,Y=N.properties,te=H===5?3:2;if(W==="pubrel"&&(P=1),typeof le!="number")return x.destroy(new Error("Invalid messageId")),!1;let ne=null;if(H===5&&typeof Y=="object"){if(ne=O(x,Y,Z,te),!ne)return!1;te+=ne.length}return x.write(o.ACKS[W][P][ie][0]),te===3&&(te+=M!==0?1:-1),J(x,te),b(x,le),H===5&&te!==2&&x.write(l.from([M])),ne!==null?ne.write():te===4&&x.write(l.from([0])),!0}function E($,x,Z){t("subscribe: packet: ");let H=Z?Z.protocolVersion:4,N=$||{},W=N.dup?o.DUP_MASK:0,le=N.messageId,ie=N.subscriptions,P=N.properties,M=0;if(typeof le!="number")return x.destroy(new Error("Invalid messageId")),!1;M+=2;let Y=null;if(H===5){if(Y=we(x,P),!Y)return!1;M+=Y.length}if(typeof ie=="object"&&ie.length)for(let ne=0;ne<ie.length;ne+=1){let ue=ie[ne].topic,U=ie[ne].qos;if(typeof ue!="string")return x.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof U!="number")return x.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(H===5){if(typeof(ie[ne].nl||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ie[ne].rap||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ae=ie[ne].rh||0;if(typeof ae!="number"||ae>2)return x.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}M+=l.byteLength(ue)+2+1}else return x.destroy(new Error("Invalid subscriptions")),!1;t("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),x.write(o.SUBSCRIBE_HEADER[1][W?1:0][0]),J(x,M),b(x,le),Y!==null&&Y.write();let te=!0;for(let ne of ie){let ue=ne.topic,U=ne.qos,ae=+ne.nl,_e=+ne.rap,ee=ne.rh,Ce;F(x,ue),Ce=o.SUBSCRIBE_OPTIONS_QOS[U],H===5&&(Ce|=ae?o.SUBSCRIBE_OPTIONS_NL:0,Ce|=_e?o.SUBSCRIBE_OPTIONS_RAP:0,Ce|=ee?o.SUBSCRIBE_OPTIONS_RH[ee]:0),te=x.write(l.from([Ce]))}return te}function I($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.messageId,le=N.granted,ie=N.properties,P=0;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(P+=2,typeof le=="object"&&le.length)for(let Y=0;Y<le.length;Y+=1){if(typeof le[Y]!="number")return x.destroy(new Error("Invalid qos vector")),!1;P+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let M=null;if(H===5){if(M=O(x,ie,Z,P),!M)return!1;P+=M.length}return x.write(o.SUBACK_HEADER),J(x,P),b(x,W),M!==null&&M.write(),x.write(l.from(le))}function C($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.messageId,le=N.dup?o.DUP_MASK:0,ie=N.unsubscriptions,P=N.properties,M=0;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(M+=2,typeof ie=="object"&&ie.length)for(let ne=0;ne<ie.length;ne+=1){if(typeof ie[ne]!="string")return x.destroy(new Error("Invalid unsubscriptions")),!1;M+=l.byteLength(ie[ne])+2}else return x.destroy(new Error("Invalid unsubscriptions")),!1;let Y=null;if(H===5){if(Y=we(x,P),!Y)return!1;M+=Y.length}x.write(o.UNSUBSCRIBE_HEADER[1][le?1:0][0]),J(x,M),b(x,W),Y!==null&&Y.write();let te=!0;for(let ne=0;ne<ie.length;ne++)te=F(x,ie[ne]);return te}function z($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.messageId,le=N.dup?o.DUP_MASK:0,ie=N.granted,P=N.properties,M=N.cmd,Y=0,te=2;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(H===5)if(typeof ie=="object"&&ie.length)for(let ue=0;ue<ie.length;ue+=1){if(typeof ie[ue]!="number")return x.destroy(new Error("Invalid qos vector")),!1;te+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let ne=null;if(H===5){if(ne=O(x,P,Z,te),!ne)return!1;te+=ne.length}return x.write(o.ACKS[M][Y][le][0]),J(x,te),b(x,W),ne!==null&&ne.write(),H===5&&x.write(l.from(ie)),!0}function K($,x,Z){return x.write(o.EMPTY[$.cmd])}function be($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.reasonCode,le=N.properties,ie=H===5?1:0,P=null;if(H===5){if(P=O(x,le,Z,ie),!P)return!1;ie+=P.length}return x.write(l.from([o.codes.disconnect<<4])),J(x,ie),H===5&&x.write(l.from([W])),P!==null&&P.write(),!0}function L($,x,Z){let H=Z?Z.protocolVersion:4,N=$||{},W=N.reasonCode,le=N.properties,ie=H===5?1:0;H!==5&&x.destroy(new Error("Invalid mqtt version for auth packet"));let P=O(x,le,Z,ie);return P?(ie+=P.length,x.write(l.from([o.codes.auth<<4])),J(x,ie),x.write(l.from([W])),P!==null&&P.write(),!0):!1}var Q={};function J($,x){if(x>o.VARBYTEINT_MAX)return $.destroy(new Error(`Invalid variable byte integer: ${x}`)),!1;let Z=Q[x];return Z||(Z=d(x),x<16384&&(Q[x]=Z)),t("writeVarByteInt: writing to stream: %o",Z),$.write(Z)}function F($,x){let Z=l.byteLength(x);return b($,Z),t("writeString: %s",x),$.write(x,"utf8")}function ye($,x,Z){F($,x),F($,Z)}function me($,x){return t("writeNumberCached: number: %d",x),t("writeNumberCached: %o",n[x]),$.write(n[x])}function pe($,x){let Z=u(x);return t("writeNumberGenerated: %o",Z),$.write(Z)}function Te($,x){let Z=g(x);return t("write4ByteNumber: %o",Z),$.write(Z)}function V($,x){typeof x=="string"?F($,x):x?(b($,x.length),$.write(x)):b($,0)}function we($,x){if(typeof x!="object"||x.length!=null)return{length:1,write(){Pe($,{},0)}};let Z=0;function H(N,W){let le=o.propertiesTypes[N],ie=0;switch(le){case"byte":{if(typeof W!="boolean")return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=2;break}case"int8":{if(typeof W!="number"||W<0||W>255)return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=2;break}case"binary":{if(W&&W===null)return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=1+l.byteLength(W)+2;break}case"int16":{if(typeof W!="number"||W<0||W>65535)return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=3;break}case"int32":{if(typeof W!="number"||W<0||W>4294967295)return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=5;break}case"var":{if(typeof W!="number"||W<0||W>268435455)return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=1+l.byteLength(d(W));break}case"string":{if(typeof W!="string")return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=3+l.byteLength(W.toString());break}case"pair":{if(typeof W!="object")return $.destroy(new Error(`Invalid ${N}: ${W}`)),!1;ie+=Object.getOwnPropertyNames(W).reduce((P,M)=>{let Y=W[M];return Array.isArray(Y)?P+=Y.reduce((te,ne)=>(te+=3+l.byteLength(M.toString())+2+l.byteLength(ne.toString()),te),0):P+=3+l.byteLength(M.toString())+2+l.byteLength(W[M].toString()),P},0);break}default:return $.destroy(new Error(`Invalid property ${N}: ${W}`)),!1}return ie}if(x)for(let N in x){let W=0,le=0,ie=x[N];if(Array.isArray(ie))for(let P=0;P<ie.length;P++){if(le=H(N,ie[P]),!le)return!1;W+=le}else{if(le=H(N,ie),!le)return!1;W=le}if(!W)return!1;Z+=W}return{length:l.byteLength(d(Z))+Z,write(){Pe($,x,Z)}}}function O($,x,Z,H){let N=["reasonString","userProperties"],W=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0,le=we($,x);if(W)for(;H+le.length>W;){let ie=N.shift();if(ie&&x[ie])delete x[ie],le=we($,x);else return!1}return le}function se($,x,Z){switch(o.propertiesTypes[x]){case"byte":{$.write(l.from([o.properties[x]])),$.write(l.from([+Z]));break}case"int8":{$.write(l.from([o.properties[x]])),$.write(l.from([Z]));break}case"binary":{$.write(l.from([o.properties[x]])),V($,Z);break}case"int16":{$.write(l.from([o.properties[x]])),b($,Z);break}case"int32":{$.write(l.from([o.properties[x]])),Te($,Z);break}case"var":{$.write(l.from([o.properties[x]])),J($,Z);break}case"string":{$.write(l.from([o.properties[x]])),F($,Z);break}case"pair":{Object.getOwnPropertyNames(Z).forEach(H=>{let N=Z[H];Array.isArray(N)?N.forEach(W=>{$.write(l.from([o.properties[x]])),ye($,H.toString(),W.toString())}):($.write(l.from([o.properties[x]])),ye($,H.toString(),N.toString()))});break}default:return $.destroy(new Error(`Invalid property ${x} value: ${Z}`)),!1}}function Pe($,x,Z){J($,Z);for(let H in x)if(Object.prototype.hasOwnProperty.call(x,H)&&x[H]!==null){let N=x[H];if(Array.isArray(N))for(let W=0;W<N.length;W++)se($,H,N[W]);else se($,H,N)}}function re($){return $?$ instanceof l?$.length:l.byteLength($):0}function Oe($){return typeof $=="string"||$ instanceof l}c.exports=_}),aa=ve((s,c)=>{ce(),de(),fe();var o=Ro(),{EventEmitter:l}=(Yt(),He(jt)),{Buffer:h}=(it(),He(rt));function i(r,t){let n=new e;return o(r,n,t),n.concat()}var e=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0,t=new Array(this._array.length),n=this._array,u=0,f;for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?t[f]=n[f].length:t[f]=h.byteLength(n[f]),r+=t[f];let d=h.allocUnsafe(r);for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?(n[f].copy(d,u),u+=t[f]):(d.write(n[f],u),u+=t[f]);return d}destroy(r){r&&this.emit("error",r)}};c.exports=i}),la=ve(s=>{ce(),de(),fe(),s.parser=na().parser,s.generate=aa(),s.writeToStream=Ro()}),xo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};s.default=c}),ua=ve((s,c)=>{ce(),de(),fe(),c.exports=l;function o(i){return i instanceof Or?Or.from(i):new i.constructor(i.buffer.slice(),i.byteOffset,i.length)}function l(i){if(i=i||{},i.circles)return h(i);let e=new Map;if(e.set(Date,f=>new Date(f)),e.set(Map,(f,d)=>new Map(t(Array.from(f),d))),e.set(Set,(f,d)=>new Set(t(Array.from(f),d))),i.constructorHandlers)for(let f of i.constructorHandlers)e.set(f[0],f[1]);let r=null;return i.proto?u:n;function t(f,d){let g=Object.keys(f),b=new Array(g.length);for(let w=0;w<g.length;w++){let _=g[w],A=f[_];typeof A!="object"||A===null?b[_]=A:A.constructor!==Object&&(r=e.get(A.constructor))?b[_]=r(A,d):ArrayBuffer.isView(A)?b[_]=o(A):b[_]=d(A)}return b}function n(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return t(f,n);if(f.constructor!==Object&&(r=e.get(f.constructor)))return r(f,n);let d={};for(let g in f){if(Object.hasOwnProperty.call(f,g)===!1)continue;let b=f[g];typeof b!="object"||b===null?d[g]=b:b.constructor!==Object&&(r=e.get(b.constructor))?d[g]=r(b,n):ArrayBuffer.isView(b)?d[g]=o(b):d[g]=n(b)}return d}function u(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return t(f,u);if(f.constructor!==Object&&(r=e.get(f.constructor)))return r(f,u);let d={};for(let g in f){let b=f[g];typeof b!="object"||b===null?d[g]=b:b.constructor!==Object&&(r=e.get(b.constructor))?d[g]=r(b,u):ArrayBuffer.isView(b)?d[g]=o(b):d[g]=u(b)}return d}}function h(i){let e=[],r=[],t=new Map;if(t.set(Date,g=>new Date(g)),t.set(Map,(g,b)=>new Map(u(Array.from(g),b))),t.set(Set,(g,b)=>new Set(u(Array.from(g),b))),i.constructorHandlers)for(let g of i.constructorHandlers)t.set(g[0],g[1]);let n=null;return i.proto?d:f;function u(g,b){let w=Object.keys(g),_=new Array(w.length);for(let A=0;A<w.length;A++){let m=w[A],v=g[m];if(typeof v!="object"||v===null)_[m]=v;else if(v.constructor!==Object&&(n=t.get(v.constructor)))_[m]=n(v,b);else if(ArrayBuffer.isView(v))_[m]=o(v);else{let j=e.indexOf(v);j!==-1?_[m]=r[j]:_[m]=b(v)}}return _}function f(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return u(g,f);if(g.constructor!==Object&&(n=t.get(g.constructor)))return n(g,f);let b={};e.push(g),r.push(b);for(let w in g){if(Object.hasOwnProperty.call(g,w)===!1)continue;let _=g[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(n=t.get(_.constructor)))b[w]=n(_,f);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=r[A]:b[w]=f(_)}}return e.pop(),r.pop(),b}function d(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return u(g,d);if(g.constructor!==Object&&(n=t.get(g.constructor)))return n(g,d);let b={};e.push(g),r.push(b);for(let w in g){let _=g[w];if(typeof _!="object"||_===null)b[w]=_;else if(_.constructor!==Object&&(n=t.get(_.constructor)))b[w]=n(_,d);else if(ArrayBuffer.isView(_))b[w]=o(_);else{let A=e.indexOf(_);A!==-1?b[w]=r[A]:b[w]=d(_)}}return e.pop(),r.pop(),b}}}),ha=ve((s,c)=>{ce(),de(),fe(),c.exports=ua()()}),ca=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.validateTopic=c,s.validateTopics=o;function c(l){let h=l.split("/");for(let i=0;i<h.length;i++)if(h[i]!=="+"){if(h[i]==="#")return i===h.length-1;if(h[i].indexOf("+")!==-1||h[i].indexOf("#")!==-1)return!1}return!0}function o(l){if(l.length===0)return"empty_topic_list";for(let h=0;h<l.length;h++)if(!c(l[h]))return l[h];return null}}),Bo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Xt(),o={objectMode:!0},l={clean:!0},h=class{constructor(i){this.options=i||{},this.options=Object.assign(Object.assign({},l),i),this._inflights=new Map}put(i,e){return this._inflights.set(i.messageId,i),e&&e(),this}createStream(){let i=new c.Readable(o),e=[],r=!1,t=0;return this._inflights.forEach((n,u)=>{e.push(n)}),i._read=()=>{!r&&t<e.length?i.push(e[t++]):i.push(null)},i.destroy=n=>{if(!r)return r=!0,setTimeout(()=>{i.emit("close")},0),i},i}del(i,e){let r=this._inflights.get(i.messageId);return r?(this._inflights.delete(i.messageId),e(null,r)):e&&e(new Error("missing packet")),this}get(i,e){let r=this._inflights.get(i.messageId);return r?e(null,r):e&&e(new Error("missing packet")),this}close(i){this.options.clean&&(this._inflights=null),i&&i()}};s.default=h}),fa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=[0,16,128,131,135,144,145,151,153],o=(l,h,i)=>{l.log("handlePublish: packet %o",h),i=typeof i<"u"?i:l.noop;let e=h.topic.toString(),r=h.payload,{qos:t}=h,{messageId:n}=h,{options:u}=l;if(l.options.protocolVersion===5){let f;if(h.properties&&(f=h.properties.topicAlias),typeof f<"u")if(e.length===0)if(f>0&&f<=65535){let d=l.topicAliasRecv.getTopicByAlias(f);if(d)e=d,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,f);else{l.log("handlePublish :: unregistered topic alias. alias: %d",f),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",f),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(e,f))l.log("handlePublish :: registered topic: %s - alias: %d",e,f);else{l.log("handlePublish :: topic alias out of range. alias: %d",f),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",t),t){case 2:{u.customHandleAcks(e,r,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return l.emit("error",f);if(c.indexOf(d)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));d?l._sendPacket({cmd:"pubrec",messageId:n,reasonCode:d},i):l.incomingStore.put(h,()=>{l._sendPacket({cmd:"pubrec",messageId:n},i)})});break}case 1:{u.customHandleAcks(e,r,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return l.emit("error",f);if(c.indexOf(d)===-1)return l.emit("error",new Error("Wrong reason code for puback"));d||l.emit("message",e,r,h),l.handleMessage(h,g=>{if(g)return i&&i(g);l._sendPacket({cmd:"puback",messageId:n,reasonCode:d},i)})});break}case 0:l.emit("message",e,r,h),l.handleMessage(h,i);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};s.default=o}),da=ve((s,c)=>{c.exports={version:"5.10.4"}}),nr=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.MQTTJS_VERSION=s.nextTick=s.ErrorWithReasonCode=void 0,s.applyMixin=o;var c=class Mo extends Error{constructor(h,i){super(h),this.code=i,Object.setPrototypeOf(this,Mo.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};s.ErrorWithReasonCode=c;function o(l,h,i=!1){var e;let r=[h];for(;;){let t=r[0],n=Object.getPrototypeOf(t);if(n!=null&&n.prototype)r.unshift(n);else break}for(let t of r)for(let n of Object.getOwnPropertyNames(t.prototype))(i||n!=="constructor")&&Object.defineProperty(l.prototype,n,(e=Object.getOwnPropertyDescriptor(t.prototype,n))!==null&&e!==void 0?e:Object.create(null))}s.nextTick=typeof(Fe==null?void 0:Fe.nextTick)=="function"?Fe.nextTick:l=>{setTimeout(l,0)},s.MQTTJS_VERSION=da().version}),Mr=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=void 0;var c=nr();s.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(l,h)=>{let{messageId:i}=h,e=h.cmd,r=null,t=l.outgoing[i]?l.outgoing[i].cb:null,n=null;if(!t){l.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(l.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let u=h.reasonCode;u&&u>0&&u!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(n,h)})):l._removeOutgoingAndStoreMessage(i,t);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:i};let u=h.reasonCode;u&&u>0&&u!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[u]}`,u),l._removeOutgoingAndStoreMessage(i,()=>{t(n,h)})):l._sendPacket(r);break}case"suback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i);let u=h.granted;for(let f=0;f<u.length;f++){let d=u[f];if(d&128){n=new Error(`Subscribe error: ${s.ReasonCodes[d]}`),n.code=d;let g=l.messageIdToTopic[i];g&&g.forEach(b=>{delete l._resubscribeTopics[b]})}}delete l.messageIdToTopic[i],l._invokeStoreProcessingQueue(),t(n,h);break}case"unsuback":{delete l.outgoing[i],l.messageIdProvider.deallocate(i),l._invokeStoreProcessingQueue(),t(null,h);break}default:l.emit("error",new Error("unrecognized packet type"))}l.disconnecting&&Object.keys(l.outgoing).length===0&&l.emit("outgoingEmpty")};s.default=o}),pa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=nr(),o=Mr(),l=(h,i)=>{let{options:e}=h,r=e.protocolVersion,t=r===5?i.reasonCode:i.returnCode;if(r!==5){let n=new c.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,t);h.emit("error",n);return}h.handleAuth(i,(n,u)=>{if(n){h.emit("error",n);return}if(t===24)h.reconnecting=!1,h._sendPacket(u);else{let f=new c.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[t]}`,t);h.emit("error",f)}})};s.default=l}),ga=ve(s=>{var g,b,w,_,A,m,v,j,R,E,I,C,z,K,be,L,Q,J,F,ye,me,pe,Te,V,we,O,se,nn,re,Oe,$,x,Z,Lo,N,W,le,ie,Bt,M,Mt,te,on,ue,U,Sr,_e,Ar,Ce,Ge,p,sn,B,ur,X,Lt,Ue,an,De;ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.LRUCache=void 0;var c=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,l=typeof Fe=="object"&&Fe?Fe:{},h=(Be,D,G,oe)=>{typeof l.emitWarning=="function"?l.emitWarning(Be,D,G,oe):console.error(`[${G}] ${D}: ${Be}`)},i=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof i>"u"){e=class{constructor(){Qe(this,"onabort");Qe(this,"_onabort",[]);Qe(this,"reason");Qe(this,"aborted",!1)}addEventListener(G,oe){this._onabort.push(oe)}},i=class{constructor(){Qe(this,"signal",new e);D()}abort(G){var oe,Ie;if(!this.signal.aborted){this.signal.reason=G,this.signal.aborted=!0;for(let Ee of this.signal._onabort)Ee(G);(Ie=(oe=this.signal).onabort)==null||Ie.call(oe,G)}}};let Be=((g=l.env)==null?void 0:g.LRU_CACHE_IGNORE_AC_WARNING)!=="1",D=()=>{Be&&(Be=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",D))}}var r=Be=>!o.has(Be),t=Be=>Be&&Be===Math.floor(Be)&&Be>0&&isFinite(Be),n=Be=>t(Be)?Be<=Math.pow(2,8)?Uint8Array:Be<=Math.pow(2,16)?Uint16Array:Be<=Math.pow(2,32)?Uint32Array:Be<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(Be){super(Be),this.fill(0)}},f=(b=class{constructor(D,G){Qe(this,"heap");Qe(this,"length");if(!T(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new G(D),this.length=0}static create(D){let G=n(D);if(!G)return[];Me(b,w,!0);let oe=new b(D,G);return Me(b,w,!1),oe}push(D){this.heap[this.length++]=D}pop(){return this.heap[--this.length]}},w=new WeakMap,je(b,w,!1),b),d=(De=class{constructor(D){je(this,se);je(this,Z);je(this,ie);je(this,M);je(this,te);je(this,U);je(this,_e);je(this,Ce);je(this,p);je(this,B);je(this,X);je(this,Ue);je(this,_,void 0);je(this,A,void 0);je(this,m,void 0);je(this,v,void 0);je(this,j,void 0);je(this,R,void 0);Qe(this,"ttl");Qe(this,"ttlResolution");Qe(this,"ttlAutopurge");Qe(this,"updateAgeOnGet");Qe(this,"updateAgeOnHas");Qe(this,"allowStale");Qe(this,"noDisposeOnSet");Qe(this,"noUpdateTTL");Qe(this,"maxEntrySize");Qe(this,"sizeCalculation");Qe(this,"noDeleteOnFetchRejection");Qe(this,"noDeleteOnStaleGet");Qe(this,"allowStaleOnFetchAbort");Qe(this,"allowStaleOnFetchRejection");Qe(this,"ignoreFetchAbort");je(this,E,void 0);je(this,I,void 0);je(this,C,void 0);je(this,z,void 0);je(this,K,void 0);je(this,be,void 0);je(this,L,void 0);je(this,Q,void 0);je(this,J,void 0);je(this,F,void 0);je(this,ye,void 0);je(this,me,void 0);je(this,pe,void 0);je(this,Te,void 0);je(this,V,void 0);je(this,we,void 0);je(this,O,void 0);je(this,re,()=>{});je(this,Oe,()=>{});je(this,$,()=>{});je(this,x,()=>!1);je(this,N,D=>{});je(this,W,(D,G,oe)=>{});je(this,le,(D,G,oe,Ie)=>{if(oe||Ie)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Qe(this,ue,"LRUCache");let{max:G=0,ttl:oe,ttlResolution:Ie=1,ttlAutopurge:Ee,updateAgeOnGet:ke,updateAgeOnHas:Le,allowStale:Re,dispose:Ve,disposeAfter:at,noDisposeOnSet:We,noUpdateTTL:ft,maxSize:S=0,maxEntrySize:k=0,sizeCalculation:he,fetchMethod:Ae,memoMethod:ge,noDeleteOnFetchRejection:Ne,noDeleteOnStaleGet:ze,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:lt,ignoreFetchAbort:Dt}=D;if(G!==0&&!t(G))throw new TypeError("max option must be a nonnegative integer");let dt=G?n(G):Array;if(!dt)throw new Error("invalid max value: "+G);if(Me(this,_,G),Me(this,A,S),this.maxEntrySize=k||T(this,A),this.sizeCalculation=he,this.sizeCalculation){if(!T(this,A)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ge!==void 0&&typeof ge!="function")throw new TypeError("memoMethod must be a function if defined");if(Me(this,R,ge),Ae!==void 0&&typeof Ae!="function")throw new TypeError("fetchMethod must be a function if specified");if(Me(this,j,Ae),Me(this,we,!!Ae),Me(this,C,new Map),Me(this,z,new Array(G).fill(void 0)),Me(this,K,new Array(G).fill(void 0)),Me(this,be,new dt(G)),Me(this,L,new dt(G)),Me(this,Q,0),Me(this,J,0),Me(this,F,f.create(G)),Me(this,E,0),Me(this,I,0),typeof Ve=="function"&&Me(this,m,Ve),typeof at=="function"?(Me(this,v,at),Me(this,ye,[])):(Me(this,v,void 0),Me(this,ye,void 0)),Me(this,V,!!T(this,m)),Me(this,O,!!T(this,v)),this.noDisposeOnSet=!!We,this.noUpdateTTL=!!ft,this.noDeleteOnFetchRejection=!!Ne,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!lt,this.ignoreFetchAbort=!!Dt,this.maxEntrySize!==0){if(T(this,A)!==0&&!t(T(this,A)))throw new TypeError("maxSize must be a positive integer if specified");if(!t(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");xe(this,Z,Lo).call(this)}if(this.allowStale=!!Re,this.noDeleteOnStaleGet=!!ze,this.updateAgeOnGet=!!ke,this.updateAgeOnHas=!!Le,this.ttlResolution=t(Ie)||Ie===0?Ie:1,this.ttlAutopurge=!!Ee,this.ttl=oe||0,this.ttl){if(!t(this.ttl))throw new TypeError("ttl must be a positive integer if specified");xe(this,se,nn).call(this)}if(T(this,_)===0&&this.ttl===0&&T(this,A)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!T(this,_)&&!T(this,A)){let wt="LRU_CACHE_UNBOUNDED";r(wt)&&(o.add(wt),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",wt,De))}}static unsafeExposeInternals(D){return{starts:T(D,pe),ttls:T(D,Te),sizes:T(D,me),keyMap:T(D,C),keyList:T(D,z),valList:T(D,K),next:T(D,be),prev:T(D,L),get head(){return T(D,Q)},get tail(){return T(D,J)},free:T(D,F),isBackgroundFetch:G=>{var oe;return xe(oe=D,Ce,Ge).call(oe,G)},backgroundFetch:(G,oe,Ie,Ee)=>{var ke;return xe(ke=D,_e,Ar).call(ke,G,oe,Ie,Ee)},moveToTail:G=>{var oe;return xe(oe=D,B,ur).call(oe,G)},indexes:G=>{var oe;return xe(oe=D,ie,Bt).call(oe,G)},rindexes:G=>{var oe;return xe(oe=D,M,Mt).call(oe,G)},isStale:G=>{var oe;return T(oe=D,x).call(oe,G)}}}get max(){return T(this,_)}get maxSize(){return T(this,A)}get calculatedSize(){return T(this,I)}get size(){return T(this,E)}get fetchMethod(){return T(this,j)}get memoMethod(){return T(this,R)}get dispose(){return T(this,m)}get disposeAfter(){return T(this,v)}getRemainingTTL(D){return T(this,C).has(D)?1/0:0}*entries(){for(let D of xe(this,ie,Bt).call(this))T(this,K)[D]!==void 0&&T(this,z)[D]!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield[T(this,z)[D],T(this,K)[D]])}*rentries(){for(let D of xe(this,M,Mt).call(this))T(this,K)[D]!==void 0&&T(this,z)[D]!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield[T(this,z)[D],T(this,K)[D]])}*keys(){for(let D of xe(this,ie,Bt).call(this)){let G=T(this,z)[D];G!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield G)}}*rkeys(){for(let D of xe(this,M,Mt).call(this)){let G=T(this,z)[D];G!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield G)}}*values(){for(let D of xe(this,ie,Bt).call(this))T(this,K)[D]!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield T(this,K)[D])}*rvalues(){for(let D of xe(this,M,Mt).call(this))T(this,K)[D]!==void 0&&!xe(this,Ce,Ge).call(this,T(this,K)[D])&&(yield T(this,K)[D])}[Symbol.iterator](){return this.entries()}find(D,G={}){for(let oe of xe(this,ie,Bt).call(this)){let Ie=T(this,K)[oe],Ee=xe(this,Ce,Ge).call(this,Ie)?Ie.__staleWhileFetching:Ie;if(Ee!==void 0&&D(Ee,T(this,z)[oe],this))return this.get(T(this,z)[oe],G)}}forEach(D,G=this){for(let oe of xe(this,ie,Bt).call(this)){let Ie=T(this,K)[oe],Ee=xe(this,Ce,Ge).call(this,Ie)?Ie.__staleWhileFetching:Ie;Ee!==void 0&&D.call(G,Ee,T(this,z)[oe],this)}}rforEach(D,G=this){for(let oe of xe(this,M,Mt).call(this)){let Ie=T(this,K)[oe],Ee=xe(this,Ce,Ge).call(this,Ie)?Ie.__staleWhileFetching:Ie;Ee!==void 0&&D.call(G,Ee,T(this,z)[oe],this)}}purgeStale(){let D=!1;for(let G of xe(this,M,Mt).call(this,{allowStale:!0}))T(this,x).call(this,G)&&(xe(this,X,Lt).call(this,T(this,z)[G],"expire"),D=!0);return D}info(D){let G=T(this,C).get(D);if(G===void 0)return;let oe=T(this,K)[G],Ie=xe(this,Ce,Ge).call(this,oe)?oe.__staleWhileFetching:oe;if(Ie===void 0)return;let Ee={value:Ie};if(T(this,Te)&&T(this,pe)){let ke=T(this,Te)[G],Le=T(this,pe)[G];if(ke&&Le){let Re=ke-(c.now()-Le);Ee.ttl=Re,Ee.start=Date.now()}}return T(this,me)&&(Ee.size=T(this,me)[G]),Ee}dump(){let D=[];for(let G of xe(this,ie,Bt).call(this,{allowStale:!0})){let oe=T(this,z)[G],Ie=T(this,K)[G],Ee=xe(this,Ce,Ge).call(this,Ie)?Ie.__staleWhileFetching:Ie;if(Ee===void 0||oe===void 0)continue;let ke={value:Ee};if(T(this,Te)&&T(this,pe)){ke.ttl=T(this,Te)[G];let Le=c.now()-T(this,pe)[G];ke.start=Math.floor(Date.now()-Le)}T(this,me)&&(ke.size=T(this,me)[G]),D.unshift([oe,ke])}return D}load(D){this.clear();for(let[G,oe]of D){if(oe.start){let Ie=Date.now()-oe.start;oe.start=c.now()-Ie}this.set(G,oe.value,oe)}}set(D,G,oe={}){var ft,S,k,he,Ae;if(G===void 0)return this.delete(D),this;let{ttl:Ie=this.ttl,start:Ee,noDisposeOnSet:ke=this.noDisposeOnSet,sizeCalculation:Le=this.sizeCalculation,status:Re}=oe,{noUpdateTTL:Ve=this.noUpdateTTL}=oe,at=T(this,le).call(this,D,G,oe.size||0,Le);if(this.maxEntrySize&&at>this.maxEntrySize)return Re&&(Re.set="miss",Re.maxEntrySizeExceeded=!0),xe(this,X,Lt).call(this,D,"set"),this;let We=T(this,E)===0?void 0:T(this,C).get(D);if(We===void 0)We=T(this,E)===0?T(this,J):T(this,F).length!==0?T(this,F).pop():T(this,E)===T(this,_)?xe(this,U,Sr).call(this,!1):T(this,E),T(this,z)[We]=D,T(this,K)[We]=G,T(this,C).set(D,We),T(this,be)[T(this,J)]=We,T(this,L)[We]=T(this,J),Me(this,J,We),pr(this,E)._++,T(this,W).call(this,We,at,Re),Re&&(Re.set="add"),Ve=!1;else{xe(this,B,ur).call(this,We);let ge=T(this,K)[We];if(G!==ge){if(T(this,we)&&xe(this,Ce,Ge).call(this,ge)){ge.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Ne}=ge;Ne!==void 0&&!ke&&(T(this,V)&&((ft=T(this,m))==null||ft.call(this,Ne,D,"set")),T(this,O)&&((S=T(this,ye))==null||S.push([Ne,D,"set"])))}else ke||(T(this,V)&&((k=T(this,m))==null||k.call(this,ge,D,"set")),T(this,O)&&((he=T(this,ye))==null||he.push([ge,D,"set"])));if(T(this,N).call(this,We),T(this,W).call(this,We,at,Re),T(this,K)[We]=G,Re){Re.set="replace";let Ne=ge&&xe(this,Ce,Ge).call(this,ge)?ge.__staleWhileFetching:ge;Ne!==void 0&&(Re.oldValue=Ne)}}else Re&&(Re.set="update")}if(Ie!==0&&!T(this,Te)&&xe(this,se,nn).call(this),T(this,Te)&&(Ve||T(this,$).call(this,We,Ie,Ee),Re&&T(this,Oe).call(this,Re,We)),!ke&&T(this,O)&&T(this,ye)){let ge=T(this,ye),Ne;for(;Ne=ge==null?void 0:ge.shift();)(Ae=T(this,v))==null||Ae.call(this,...Ne)}return this}pop(){var D;try{for(;T(this,E);){let G=T(this,K)[T(this,Q)];if(xe(this,U,Sr).call(this,!0),xe(this,Ce,Ge).call(this,G)){if(G.__staleWhileFetching)return G.__staleWhileFetching}else if(G!==void 0)return G}}finally{if(T(this,O)&&T(this,ye)){let G=T(this,ye),oe;for(;oe=G==null?void 0:G.shift();)(D=T(this,v))==null||D.call(this,...oe)}}}has(D,G={}){let{updateAgeOnHas:oe=this.updateAgeOnHas,status:Ie}=G,Ee=T(this,C).get(D);if(Ee!==void 0){let ke=T(this,K)[Ee];if(xe(this,Ce,Ge).call(this,ke)&&ke.__staleWhileFetching===void 0)return!1;if(T(this,x).call(this,Ee))Ie&&(Ie.has="stale",T(this,Oe).call(this,Ie,Ee));else return oe&&T(this,re).call(this,Ee),Ie&&(Ie.has="hit",T(this,Oe).call(this,Ie,Ee)),!0}else Ie&&(Ie.has="miss");return!1}peek(D,G={}){let{allowStale:oe=this.allowStale}=G,Ie=T(this,C).get(D);if(Ie===void 0||!oe&&T(this,x).call(this,Ie))return;let Ee=T(this,K)[Ie];return xe(this,Ce,Ge).call(this,Ee)?Ee.__staleWhileFetching:Ee}async fetch(D,G={}){let{allowStale:oe=this.allowStale,updateAgeOnGet:Ie=this.updateAgeOnGet,noDeleteOnStaleGet:Ee=this.noDeleteOnStaleGet,ttl:ke=this.ttl,noDisposeOnSet:Le=this.noDisposeOnSet,size:Re=0,sizeCalculation:Ve=this.sizeCalculation,noUpdateTTL:at=this.noUpdateTTL,noDeleteOnFetchRejection:We=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:ft=this.allowStaleOnFetchRejection,ignoreFetchAbort:S=this.ignoreFetchAbort,allowStaleOnFetchAbort:k=this.allowStaleOnFetchAbort,context:he,forceRefresh:Ae=!1,status:ge,signal:Ne}=G;if(!T(this,we))return ge&&(ge.fetch="get"),this.get(D,{allowStale:oe,updateAgeOnGet:Ie,noDeleteOnStaleGet:Ee,status:ge});let ze={allowStale:oe,updateAgeOnGet:Ie,noDeleteOnStaleGet:Ee,ttl:ke,noDisposeOnSet:Le,size:Re,sizeCalculation:Ve,noUpdateTTL:at,noDeleteOnFetchRejection:We,allowStaleOnFetchRejection:ft,allowStaleOnFetchAbort:k,ignoreFetchAbort:S,status:ge,signal:Ne},Ke=T(this,C).get(D);if(Ke===void 0){ge&&(ge.fetch="miss");let lt=xe(this,_e,Ar).call(this,D,Ke,ze,he);return lt.__returned=lt}else{let lt=T(this,K)[Ke];if(xe(this,Ce,Ge).call(this,lt)){let Zt=oe&&lt.__staleWhileFetching!==void 0;return ge&&(ge.fetch="inflight",Zt&&(ge.returnedStale=!0)),Zt?lt.__staleWhileFetching:lt.__returned=lt}let Dt=T(this,x).call(this,Ke);if(!Ae&&!Dt)return ge&&(ge.fetch="hit"),xe(this,B,ur).call(this,Ke),Ie&&T(this,re).call(this,Ke),ge&&T(this,Oe).call(this,ge,Ke),lt;let dt=xe(this,_e,Ar).call(this,D,Ke,ze,he),wt=dt.__staleWhileFetching!==void 0&&oe;return ge&&(ge.fetch=Dt?"stale":"refresh",wt&&Dt&&(ge.returnedStale=!0)),wt?dt.__staleWhileFetching:dt.__returned=dt}}async forceFetch(D,G={}){let oe=await this.fetch(D,G);if(oe===void 0)throw new Error("fetch() returned undefined");return oe}memo(D,G={}){let oe=T(this,R);if(!oe)throw new Error("no memoMethod provided to constructor");let{context:Ie,forceRefresh:Ee,...ke}=G,Le=this.get(D,ke);if(!Ee&&Le!==void 0)return Le;let Re=oe(D,Le,{options:ke,context:Ie});return this.set(D,Re,ke),Re}get(D,G={}){let{allowStale:oe=this.allowStale,updateAgeOnGet:Ie=this.updateAgeOnGet,noDeleteOnStaleGet:Ee=this.noDeleteOnStaleGet,status:ke}=G,Le=T(this,C).get(D);if(Le!==void 0){let Re=T(this,K)[Le],Ve=xe(this,Ce,Ge).call(this,Re);return ke&&T(this,Oe).call(this,ke,Le),T(this,x).call(this,Le)?(ke&&(ke.get="stale"),Ve?(ke&&oe&&Re.__staleWhileFetching!==void 0&&(ke.returnedStale=!0),oe?Re.__staleWhileFetching:void 0):(Ee||xe(this,X,Lt).call(this,D,"expire"),ke&&oe&&(ke.returnedStale=!0),oe?Re:void 0)):(ke&&(ke.get="hit"),Ve?Re.__staleWhileFetching:(xe(this,B,ur).call(this,Le),Ie&&T(this,re).call(this,Le),Re))}else ke&&(ke.get="miss")}delete(D){return xe(this,X,Lt).call(this,D,"delete")}clear(){return xe(this,Ue,an).call(this,"delete")}},ue=Symbol.toStringTag,_=new WeakMap,A=new WeakMap,m=new WeakMap,v=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,I=new WeakMap,C=new WeakMap,z=new WeakMap,K=new WeakMap,be=new WeakMap,L=new WeakMap,Q=new WeakMap,J=new WeakMap,F=new WeakMap,ye=new WeakMap,me=new WeakMap,pe=new WeakMap,Te=new WeakMap,V=new WeakMap,we=new WeakMap,O=new WeakMap,se=new WeakSet,nn=function(){let D=new u(T(this,_)),G=new u(T(this,_));Me(this,Te,D),Me(this,pe,G),Me(this,$,(Ee,ke,Le=c.now())=>{if(G[Ee]=ke!==0?Le:0,D[Ee]=ke,ke!==0&&this.ttlAutopurge){let Re=setTimeout(()=>{T(this,x).call(this,Ee)&&xe(this,X,Lt).call(this,T(this,z)[Ee],"expire")},ke+1);Re.unref&&Re.unref()}}),Me(this,re,Ee=>{G[Ee]=D[Ee]!==0?c.now():0}),Me(this,Oe,(Ee,ke)=>{if(D[ke]){let Le=D[ke],Re=G[ke];if(!Le||!Re)return;Ee.ttl=Le,Ee.start=Re,Ee.now=oe||Ie();let Ve=Ee.now-Re;Ee.remainingTTL=Le-Ve}});let oe=0,Ie=()=>{let Ee=c.now();if(this.ttlResolution>0){oe=Ee;let ke=setTimeout(()=>oe=0,this.ttlResolution);ke.unref&&ke.unref()}return Ee};this.getRemainingTTL=Ee=>{let ke=T(this,C).get(Ee);if(ke===void 0)return 0;let Le=D[ke],Re=G[ke];if(!Le||!Re)return 1/0;let Ve=(oe||Ie())-Re;return Le-Ve},Me(this,x,Ee=>{let ke=G[Ee],Le=D[Ee];return!!Le&&!!ke&&(oe||Ie())-ke>Le})},re=new WeakMap,Oe=new WeakMap,$=new WeakMap,x=new WeakMap,Z=new WeakSet,Lo=function(){let D=new u(T(this,_));Me(this,I,0),Me(this,me,D),Me(this,N,G=>{Me(this,I,T(this,I)-D[G]),D[G]=0}),Me(this,le,(G,oe,Ie,Ee)=>{if(xe(this,Ce,Ge).call(this,oe))return 0;if(!t(Ie))if(Ee){if(typeof Ee!="function")throw new TypeError("sizeCalculation must be a function");if(Ie=Ee(oe,G),!t(Ie))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Ie}),Me(this,W,(G,oe,Ie)=>{if(D[G]=oe,T(this,A)){let Ee=T(this,A)-D[G];for(;T(this,I)>Ee;)xe(this,U,Sr).call(this,!0)}Me(this,I,T(this,I)+D[G]),Ie&&(Ie.entrySize=oe,Ie.totalCalculatedSize=T(this,I))})},N=new WeakMap,W=new WeakMap,le=new WeakMap,ie=new WeakSet,Bt=function*({allowStale:D=this.allowStale}={}){if(T(this,E))for(let G=T(this,J);!(!xe(this,te,on).call(this,G)||((D||!T(this,x).call(this,G))&&(yield G),G===T(this,Q)));)G=T(this,L)[G]},M=new WeakSet,Mt=function*({allowStale:D=this.allowStale}={}){if(T(this,E))for(let G=T(this,Q);!(!xe(this,te,on).call(this,G)||((D||!T(this,x).call(this,G))&&(yield G),G===T(this,J)));)G=T(this,be)[G]},te=new WeakSet,on=function(D){return D!==void 0&&T(this,C).get(T(this,z)[D])===D},U=new WeakSet,Sr=function(D){var Ee,ke;let G=T(this,Q),oe=T(this,z)[G],Ie=T(this,K)[G];return T(this,we)&&xe(this,Ce,Ge).call(this,Ie)?Ie.__abortController.abort(new Error("evicted")):(T(this,V)||T(this,O))&&(T(this,V)&&((Ee=T(this,m))==null||Ee.call(this,Ie,oe,"evict")),T(this,O)&&((ke=T(this,ye))==null||ke.push([Ie,oe,"evict"]))),T(this,N).call(this,G),D&&(T(this,z)[G]=void 0,T(this,K)[G]=void 0,T(this,F).push(G)),T(this,E)===1?(Me(this,Q,Me(this,J,0)),T(this,F).length=0):Me(this,Q,T(this,be)[G]),T(this,C).delete(oe),pr(this,E)._--,G},_e=new WeakSet,Ar=function(D,G,oe,Ie){let Ee=G===void 0?void 0:T(this,K)[G];if(xe(this,Ce,Ge).call(this,Ee))return Ee;let ke=new i,{signal:Le}=oe;Le==null||Le.addEventListener("abort",()=>ke.abort(Le.reason),{signal:ke.signal});let Re={signal:ke.signal,options:oe,context:Ie},Ve=(he,Ae=!1)=>{let{aborted:ge}=ke.signal,Ne=oe.ignoreFetchAbort&&he!==void 0;if(oe.status&&(ge&&!Ae?(oe.status.fetchAborted=!0,oe.status.fetchError=ke.signal.reason,Ne&&(oe.status.fetchAbortIgnored=!0)):oe.status.fetchResolved=!0),ge&&!Ne&&!Ae)return We(ke.signal.reason);let ze=S;return T(this,K)[G]===S&&(he===void 0?ze.__staleWhileFetching?T(this,K)[G]=ze.__staleWhileFetching:xe(this,X,Lt).call(this,D,"fetch"):(oe.status&&(oe.status.fetchUpdated=!0),this.set(D,he,Re.options))),he},at=he=>(oe.status&&(oe.status.fetchRejected=!0,oe.status.fetchError=he),We(he)),We=he=>{let{aborted:Ae}=ke.signal,ge=Ae&&oe.allowStaleOnFetchAbort,Ne=ge||oe.allowStaleOnFetchRejection,ze=Ne||oe.noDeleteOnFetchRejection,Ke=S;if(T(this,K)[G]===S&&(!ze||Ke.__staleWhileFetching===void 0?xe(this,X,Lt).call(this,D,"fetch"):ge||(T(this,K)[G]=Ke.__staleWhileFetching)),Ne)return oe.status&&Ke.__staleWhileFetching!==void 0&&(oe.status.returnedStale=!0),Ke.__staleWhileFetching;if(Ke.__returned===Ke)throw he},ft=(he,Ae)=>{var Ne;let ge=(Ne=T(this,j))==null?void 0:Ne.call(this,D,Ee,Re);ge&&ge instanceof Promise&&ge.then(ze=>he(ze===void 0?void 0:ze),Ae),ke.signal.addEventListener("abort",()=>{(!oe.ignoreFetchAbort||oe.allowStaleOnFetchAbort)&&(he(void 0),oe.allowStaleOnFetchAbort&&(he=ze=>Ve(ze,!0)))})};oe.status&&(oe.status.fetchDispatched=!0);let S=new Promise(ft).then(Ve,at),k=Object.assign(S,{__abortController:ke,__staleWhileFetching:Ee,__returned:void 0});return G===void 0?(this.set(D,k,{...Re.options,status:void 0}),G=T(this,C).get(D)):T(this,K)[G]=k,k},Ce=new WeakSet,Ge=function(D){if(!T(this,we))return!1;let G=D;return!!G&&G instanceof Promise&&G.hasOwnProperty("__staleWhileFetching")&&G.__abortController instanceof i},p=new WeakSet,sn=function(D,G){T(this,L)[G]=D,T(this,be)[D]=G},B=new WeakSet,ur=function(D){D!==T(this,J)&&(D===T(this,Q)?Me(this,Q,T(this,be)[D]):xe(this,p,sn).call(this,T(this,L)[D],T(this,be)[D]),xe(this,p,sn).call(this,T(this,J),D),Me(this,J,D))},X=new WeakSet,Lt=function(D,G){var Ie,Ee,ke,Le;let oe=!1;if(T(this,E)!==0){let Re=T(this,C).get(D);if(Re!==void 0)if(oe=!0,T(this,E)===1)xe(this,Ue,an).call(this,G);else{T(this,N).call(this,Re);let Ve=T(this,K)[Re];if(xe(this,Ce,Ge).call(this,Ve)?Ve.__abortController.abort(new Error("deleted")):(T(this,V)||T(this,O))&&(T(this,V)&&((Ie=T(this,m))==null||Ie.call(this,Ve,D,G)),T(this,O)&&((Ee=T(this,ye))==null||Ee.push([Ve,D,G]))),T(this,C).delete(D),T(this,z)[Re]=void 0,T(this,K)[Re]=void 0,Re===T(this,J))Me(this,J,T(this,L)[Re]);else if(Re===T(this,Q))Me(this,Q,T(this,be)[Re]);else{let at=T(this,L)[Re];T(this,be)[at]=T(this,be)[Re];let We=T(this,be)[Re];T(this,L)[We]=T(this,L)[Re]}pr(this,E)._--,T(this,F).push(Re)}}if(T(this,O)&&((ke=T(this,ye))!=null&&ke.length)){let Re=T(this,ye),Ve;for(;Ve=Re==null?void 0:Re.shift();)(Le=T(this,v))==null||Le.call(this,...Ve)}return oe},Ue=new WeakSet,an=function(D){var G,oe,Ie;for(let Ee of xe(this,M,Mt).call(this,{allowStale:!0})){let ke=T(this,K)[Ee];if(xe(this,Ce,Ge).call(this,ke))ke.__abortController.abort(new Error("deleted"));else{let Le=T(this,z)[Ee];T(this,V)&&((G=T(this,m))==null||G.call(this,ke,Le,D)),T(this,O)&&((oe=T(this,ye))==null||oe.push([ke,Le,D]))}}if(T(this,C).clear(),T(this,K).fill(void 0),T(this,z).fill(void 0),T(this,Te)&&T(this,pe)&&(T(this,Te).fill(0),T(this,pe).fill(0)),T(this,me)&&T(this,me).fill(0),Me(this,Q,0),Me(this,J,0),T(this,F).length=0,Me(this,I,0),Me(this,E,0),T(this,O)&&T(this,ye)){let Ee=T(this,ye),ke;for(;ke=Ee==null?void 0:Ee.shift();)(Ie=T(this,v))==null||Ie.call(this,...ke)}},De);s.LRUCache=d}),Ct=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.ContainerIterator=s.Container=s.Base=void 0;var c=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};s.ContainerIterator=c;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};s.Base=o;var l=class extends o{};s.Container=l}),ba=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ct(),o=class extends c.Base{constructor(h=[]){super(),this.S=[];let i=this;h.forEach(function(e){i.push(e)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=o;s.default=l}),ma=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ct(),o=class extends c.Base{constructor(h=[]){super(),this.j=0,this.q=[];let i=this;h.forEach(function(e){i.push(e)})}clear(){this.q=[],this.i=this.j=0}push(h){let i=this.q.length;if(this.j/i>.5&&this.j+this.i>=i&&i>4096){let e=this.i;for(let r=0;r<e;++r)this.q[r]=this.q[this.j+r];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},l=o;s.default=l}),ya=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ct(),o=class extends c.Base{constructor(h=[],i=function(r,t){return r>t?-1:r<t?1:0},e=!0){if(super(),this.v=i,Array.isArray(h))this.C=e?[...h]:h;else{this.C=[];let t=this;h.forEach(function(n){t.C.push(n)})}this.i=this.C.length;let r=this.i>>1;for(let t=this.i-1>>1;t>=0;--t)this.k(t,r)}m(h){let i=this.C[h];for(;h>0;){let e=h-1>>1,r=this.C[e];if(this.v(r,i)<=0)break;this.C[h]=r,h=e}this.C[h]=i}k(h,i){let e=this.C[h];for(;h<i;){let r=h<<1|1,t=r+1,n=this.C[r];if(t<this.i&&this.v(n,this.C[t])>0&&(r=t,n=this.C[t]),this.v(n,e)>=0)break;this.C[h]=n,h=r}this.C[h]=e}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],i=this.C.pop();return this.i-=1,this.i&&(this.C[0]=i,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let i=this.C.indexOf(h);return i<0?!1:(i===0?this.pop():i===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(i,1,this.C.pop()),this.i-=1,this.m(i),this.k(i,this.i>>1)),!0)}updateItem(h){let i=this.C.indexOf(h);return i<0?!1:(this.m(i),this.k(i,this.i>>1),!0)}toArray(){return[...this.C]}},l=o;s.default=l}),Sn=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ct(),o=class extends c.Container{},l=o;s.default=l}),Rt=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.throwIteratorAccessError=c;function c(){throw new RangeError("Iterator access denied!")}}),Uo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.RandomIterator=void 0;var c=Ct(),o=Rt(),l=class extends c.ContainerIterator{constructor(h,i){super(i),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};s.RandomIterator=l}),wa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=l(Sn()),o=Uo();function l(r){return r&&r.t?r:{default:r}}var h=class jo extends o.RandomIterator{constructor(t,n,u){super(t,u),this.container=n}copy(){return new jo(this.o,this.container,this.iteratorType)}},i=class extends c.default{constructor(r=[],t=!0){if(super(),Array.isArray(r))this.J=t?[...r]:r,this.i=r.length;else{this.J=[];let n=this;r.forEach(function(u){n.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J[r]}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J.splice(r,1),this.i-=1,this.i}eraseElementByValue(r){let t=0;for(let n=0;n<this.i;++n)this.J[n]!==r&&(this.J[t++]=this.J[n]);return this.i=this.J.length=t,this.i}eraseElementByIterator(r){let t=r.o;return r=r.next(),this.eraseElementByPos(t),r}pushBack(r){return this.J.push(r),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(r,t){if(r<0||r>this.i-1)throw new RangeError;this.J[r]=t}insert(r,t,n=1){if(r<0||r>this.i)throw new RangeError;return this.J.splice(r,0,...new Array(n).fill(t)),this.i+=n,this.i}find(r){for(let t=0;t<this.i;++t)if(this.J[t]===r)return new h(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let r=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[r++]=this.J[t]);return this.i=this.J.length=r,this.i}sort(r){this.J.sort(r)}forEach(r){for(let t=0;t<this.i;++t)r(this.J[t],t,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},e=i;s.default=e}),_a=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(Sn()),o=Ct(),l=Rt();function h(t){return t&&t.t?t:{default:t}}var i=class No extends o.ContainerIterator{constructor(n,u,f,d){super(d),this.o=n,this.h=u,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(n){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=n}copy(){return new No(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(t=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let n=this;t.forEach(function(u){n.pushBack(u)})}V(t){let{L:n,B:u}=t;n.B=u,u.L=n,t===this.p&&(this.p=u),t===this._&&(this._=n),this.i-=1}G(t,n){let u=n.B,f={l:t,L:n,B:u};n.B=f,u.L=f,n===this.h&&(this.p=f),u===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return n.l}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return this.V(n),this.i}eraseElementByValue(t){let n=this.p;for(;n!==this.h;)n.l===t&&this.V(n),n=n.B;return this.i}eraseElementByIterator(t){let n=t.o;return n===this.h&&(0,l.throwIteratorAccessError)(),t=t.next(),this.V(n),t}pushBack(t){return this.G(t,this._),this.i}popBack(){if(this.i===0)return;let t=this._.l;return this.V(this._),t}pushFront(t){return this.G(t,this.h),this.i}popFront(){if(this.i===0)return;let t=this.p.l;return this.V(this.p),t}setElementByPos(t,n){if(t<0||t>this.i-1)throw new RangeError;let u=this.p;for(;t--;)u=u.B;u.l=n}insert(t,n,u=1){if(t<0||t>this.i)throw new RangeError;if(u<=0)return this.i;if(t===0)for(;u--;)this.pushFront(n);else if(t===this.i)for(;u--;)this.pushBack(n);else{let f=this.p;for(let g=1;g<t;++g)f=f.B;let d=f.B;for(this.i+=u;u--;)f.B={l:n,L:f},f.B.L=f,f=f.B;f.B=d,d.L=f}return this.i}find(t){let n=this.p;for(;n!==this.h;){if(n.l===t)return new i(n,this.h,this);n=n.B}return this.end()}reverse(){if(this.i<=1)return;let t=this.p,n=this._,u=0;for(;u<<1<this.i;){let f=t.l;t.l=n.l,n.l=f,t=t.B,n=n.L,u+=1}}unique(){if(this.i<=1)return this.i;let t=this.p;for(;t!==this.h;){let n=t;for(;n.B!==this.h&&n.l===n.B.l;)n=n.B,this.i-=1;t.B=n.B,t.B.L=t,t=t.B}return this.i}sort(t){if(this.i<=1)return;let n=[];this.forEach(function(f){n.push(f)}),n.sort(t);let u=this.p;n.forEach(function(f){u.l=f,u=u.B})}merge(t){let n=this;if(this.i===0)t.forEach(function(u){n.pushBack(u)});else{let u=this.p;t.forEach(function(f){for(;u!==n.h&&u.l<=f;)u=u.B;n.G(f,u.L)})}return this.i}forEach(t){let n=this.p,u=0;for(;n!==this.h;)t(n.l,u++,this),n=n.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let t=this.p;for(;t!==this.h;)yield t.l,t=t.B}).bind(this)()}},r=e;s.default=r}),va=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=l(Sn()),o=Uo();function l(r){return r&&r.t?r:{default:r}}var h=class Do extends o.RandomIterator{constructor(t,n,u){super(t,u),this.container=n}copy(){return new Do(this.o,this.container,this.iteratorType)}},i=class extends c.default{constructor(r=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let n=(()=>{if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size;if(typeof r.size=="function")return r.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(n/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let u=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-n%this.F>>1;let f=this;r.forEach(function(d){f.pushBack(d)})}T(){let r=[],t=Math.max(this.P>>1,1);for(let n=0;n<t;++n)r[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)r[r.length]=this.A[n];for(let n=0;n<this.R;++n)r[r.length]=this.A[n];r[r.length]=[...this.A[this.R]],this.j=t,this.R=r.length-1;for(let n=0;n<t;++n)r[r.length]=new Array(this.F);this.A=r,this.P=r.length}O(r){let t=this.D+r+1,n=t%this.F,u=n-1,f=this.j+(t-n)/this.F;return n===0&&(f-=1),f%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(r){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=r,this.i}popBack(){if(this.i===0)return;let r=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,r}pushFront(r){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=r,this.i}popFront(){if(this.i===0)return;let r=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,r}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(r);return this.A[t][n]}setElementByPos(r,t){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:u}=this.O(r);this.A[n][u]=t}insert(r,t,n=1){if(r<0||r>this.i)throw new RangeError;if(r===0)for(;n--;)this.pushFront(t);else if(r===this.i)for(;n--;)this.pushBack(t);else{let u=[];for(let f=r;f<this.i;++f)u.push(this.getElementByPos(f));this.cut(r-1);for(let f=0;f<n;++f)this.pushBack(t);for(let f=0;f<u.length;++f)this.pushBack(u[f])}return this.i}cut(r){if(r<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(r);return this.R=t,this.N=n,this.i=r+1,this.i}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;if(r===0)this.popFront();else if(r===this.i-1)this.popBack();else{let t=[];for(let u=r+1;u<this.i;++u)t.push(this.getElementByPos(u));this.cut(r),this.popBack();let n=this;t.forEach(function(u){n.pushBack(u)})}return this.i}eraseElementByValue(r){if(this.i===0)return 0;let t=[];for(let u=0;u<this.i;++u){let f=this.getElementByPos(u);f!==r&&t.push(f)}let n=t.length;for(let u=0;u<n;++u)this.setElementByPos(u,t[u]);return this.cut(n-1)}eraseElementByIterator(r){let t=r.o;return this.eraseElementByPos(t),r=r.next(),r}find(r){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===r)return new h(t,this);return this.end()}reverse(){let r=0,t=this.i-1;for(;r<t;){let n=this.getElementByPos(r);this.setElementByPos(r,this.getElementByPos(t)),this.setElementByPos(t,n),r+=1,t-=1}}unique(){if(this.i<=1)return this.i;let r=1,t=this.getElementByPos(0);for(let n=1;n<this.i;++n){let u=this.getElementByPos(n);u!==t&&(t=u,this.setElementByPos(r++,u))}for(;this.i>r;)this.popBack();return this.i}sort(r){let t=[];for(let n=0;n<this.i;++n)t.push(this.getElementByPos(n));t.sort(r);for(let n=0;n<this.i;++n)this.setElementByPos(n,t[n])}shrinkToFit(){if(this.i===0)return;let r=[];this.forEach(function(t){r.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<r.length;++t)this.pushBack(r[t])}forEach(r){for(let t=0;t<this.i;++t)r(this.getElementByPos(t),t,this)}[Symbol.iterator](){return(function*(){for(let r=0;r<this.i;++r)yield this.getElementByPos(r)}).bind(this)()}},e=i;s.default=e}),Ea=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.TreeNodeEnableIndex=s.TreeNode=void 0;var c=class{constructor(l,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=h}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let h=l.tt;for(;h.U===l;)l=h,h=l.tt;l=h}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let h=l.tt;for(;h.W===l;)l=h,h=l.tt;return l.W!==h?h:l}}te(){let l=this.tt,h=this.W,i=h.U;return l.tt===this?l.tt=h:l.U===this?l.U=h:l.W=h,h.tt=l,h.U=this,this.tt=h,this.W=i,i&&(i.tt=this),h}se(){let l=this.tt,h=this.U,i=h.W;return l.tt===this?l.tt=h:l.U===this?l.U=h:l.W=h,h.tt=l,h.W=this,this.tt=h,this.U=i,i&&(i.tt=this),h}};s.TreeNode=c;var o=class extends c{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};s.TreeNodeEnableIndex=o}),Fo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ea(),o=Ct(),l=Rt(),h=class extends o.Container{constructor(e=function(t,n){return t<n?-1:t>n?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=c.TreeNodeEnableIndex,this.M=function(t,n,u){let f=this.ne(t,n,u);if(f){let d=f.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let g=this.he(f);if(g){let{parentNode:b,grandParent:w,curNode:_}=g;b.ie(),w.ie(),_.ie()}}return this.i},this.V=function(t){let n=this.fe(t);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=c.TreeNode,this.M=function(t,n,u){let f=this.ne(t,n,u);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(e,r){let t=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)e=e.W;else if(n>0)t=e,e=e.U;else return e}return t}Z(e,r){let t=this.h;for(;e;)this.v(e.u,r)<=0?e=e.W:(t=e,e=e.U);return t}$(e,r){let t=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)t=e,e=e.W;else if(n>0)e=e.U;else return e}return t}rr(e,r){let t=this.h;for(;e;)this.v(e.u,r)<0?(t=e,e=e.W):e=e.U;return t}ue(e){for(;;){let r=e.tt;if(r===this.h)return;if(e.ee===1){e.ee=0;return}if(e===r.U){let t=r.W;if(t.ee===1)t.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(t.W&&t.W.ee===1){t.ee=r.ee,r.ee=0,t.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else t.U&&t.U.ee===1?(t.ee=1,t.U.ee=0,t.se()):(t.ee=1,e=r)}else{let t=r.U;if(t.ee===1)t.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(t.U&&t.U.ee===1){t.ee=r.ee,r.ee=0,t.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else t.W&&t.W.ee===1?(t.ee=1,t.W.ee=0,t.te()):(t.ee=1,e=r)}}}fe(e){if(this.i===1)return this.clear(),this.h;let r=e;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[e.u,r.u]=[r.u,e.u],[e.l,r.l]=[r.l,e.l],e=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let t=r.tt;return r===t.U?t.U=void 0:t.W=void 0,this.i-=1,this.Y.ee=0,t}oe(e,r){return e===void 0?!1:this.oe(e.U,r)||r(e)?!0:this.oe(e.W,r)}he(e){for(;;){let r=e.tt;if(r.ee===0)return;let t=r.tt;if(r===t.U){let n=t.W;if(n&&n.ee===1){if(n.ee=r.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===r.W){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,r.tt=e,t.tt=e,t.ee=1,{parentNode:r,grandParent:t,curNode:e}}else r.ee=0,t===this.Y?this.Y=t.se():t.se(),t.ee=1}else{let n=t.U;if(n&&n.ee===1){if(n.ee=r.ee=0,t===this.Y)return;t.ee=1,e=t;continue}else if(e===r.U){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,t===this.Y)this.Y=e,this.h.tt=e;else{let u=t.tt;u.U===t?u.U=e:u.W=e}return e.tt=t.tt,r.tt=e,t.tt=e,t.ee=1,{parentNode:r,grandParent:t,curNode:e}}else r.ee=0,t===this.Y?this.Y=t.te():t.te(),t.ee=1}return}}ne(e,r,t){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n,u=this.h.U,f=this.v(u.u,e);if(f===0){u.l=r;return}else if(f>0)u.U=new this.re(e,r),u.U.tt=u,n=u.U,this.h.U=n;else{let d=this.h.W,g=this.v(d.u,e);if(g===0){d.l=r;return}else if(g<0)d.W=new this.re(e,r),d.W.tt=d,n=d.W,this.h.W=n;else{if(t!==void 0){let b=t.o;if(b!==this.h){let w=this.v(b.u,e);if(w===0){b.l=r;return}else if(w>0){let _=b.L(),A=this.v(_.u,e);if(A===0){_.l=r;return}else A<0&&(n=new this.re(e,r),_.W===void 0?(_.W=n,n.tt=_):(b.U=n,n.tt=b))}}}if(n===void 0)for(n=this.Y;;){let b=this.v(n.u,e);if(b>0){if(n.U===void 0){n.U=new this.re(e,r),n.U.tt=n,n=n.U;break}n=n.U}else if(b<0){if(n.W===void 0){n.W=new this.re(e,r),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=r;return}}}}return this.i+=1,n}I(e,r){for(;e;){let t=this.v(e.u,r);if(t<0)e=e.W;else if(t>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,r){let t=e.o;if(t===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return t.u=r,!0;if(t===this.h.U)return this.v(t.B().u,r)>0?(t.u=r,!0):!1;if(t===this.h.W)return this.v(t.L().u,r)<0?(t.u=r,!0):!1;let n=t.L().u;if(this.v(n,r)>=0)return!1;let u=t.B().u;return this.v(u,r)<=0?!1:(t.u=r,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=0,t=this;return this.oe(this.Y,function(n){return e===r?(t.V(n),!0):(r+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let r=this.I(this.Y,e);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(e){let r=e.o;r===this.h&&(0,l.throwIteratorAccessError)();let t=r.W===void 0;return e.iteratorType===0?t&&e.next():(!t||r.U===void 0)&&e.next(),this.V(r),e}forEach(e){let r=0;for(let t of this)e(t,r++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r,t=0;for(let n of this){if(t===e){r=n;break}t+=1}return r}getHeight(){if(this.i===0)return 0;let e=function(r){return r?Math.max(e(r.U),e(r.W))+1:0};return e(this.Y)}},i=h;s.default=i}),Wo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Ct(),o=Rt(),l=class extends c.ContainerIterator{constructor(i,e,r){super(r),this.o=i,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let i=this.o,e=this.h.tt;if(i===this.h)return e?e.rt-1:0;let r=0;for(i.U&&(r+=i.U.rt);i!==e;){let t=i.tt;i===t.W&&(r+=1,t.U&&(r+=t.U.rt)),i=t}return r}},h=l;s.default=h}),Sa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(Fo()),o=h(Wo()),l=Rt();function h(t){return t&&t.t?t:{default:t}}var i=class qo extends o.default{constructor(n,u,f,d){super(n,u,d),this.container=f}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new qo(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(t=[],n,u){super(n,u);let f=this;t.forEach(function(d){f.insert(d)})}*K(t){t!==void 0&&(yield*this.K(t.U),yield t.u,yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(t,n){return this.M(t,void 0,n)}find(t){let n=this.I(this.Y,t);return new i(n,this.h,this)}lowerBound(t){let n=this.X(this.Y,t);return new i(n,this.h,this)}upperBound(t){let n=this.Z(this.Y,t);return new i(n,this.h,this)}reverseLowerBound(t){let n=this.$(this.Y,t);return new i(n,this.h,this)}reverseUpperBound(t){let n=this.rr(this.Y,t);return new i(n,this.h,this)}union(t){let n=this;return t.forEach(function(u){n.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=e;s.default=r}),Aa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(Fo()),o=h(Wo()),l=Rt();function h(t){return t&&t.t?t:{default:t}}var i=class $o extends o.default{constructor(n,u,f,d){super(n,u,d),this.container=f}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let n=this;return new Proxy([],{get(u,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(u,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new $o(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(t=[],n,u){super(n,u);let f=this;t.forEach(function(d){f.setElement(d[0],d[1])})}*K(t){t!==void 0&&(yield*this.K(t.U),yield[t.u,t.l],yield*this.K(t.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i===0)return;let t=this.h.U;return[t.u,t.l]}back(){if(this.i===0)return;let t=this.h.W;return[t.u,t.l]}lowerBound(t){let n=this.X(this.Y,t);return new i(n,this.h,this)}upperBound(t){let n=this.Z(this.Y,t);return new i(n,this.h,this)}reverseLowerBound(t){let n=this.$(this.Y,t);return new i(n,this.h,this)}reverseUpperBound(t){let n=this.rr(this.Y,t);return new i(n,this.h,this)}setElement(t,n,u){return this.M(t,n,u)}find(t){let n=this.I(this.Y,t);return new i(n,this.h,this)}getElementByKey(t){return this.I(this.Y,t).l}union(t){let n=this;return t.forEach(function(u){n.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=e;s.default=r}),Ho=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=c;function c(o){let l=typeof o;return l==="object"&&o!==null||l==="function"}}),Vo=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.HashContainerIterator=s.HashContainer=void 0;var c=Ct(),o=h(Ho()),l=Rt();function h(r){return r&&r.t?r:{default:r}}var i=class extends c.ContainerIterator{constructor(r,t,n){super(n),this.o=r,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};s.HashContainerIterator=i;var e=class extends c.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(r){let{L:t,B:n}=r;t.B=n,n.L=t,r===this.p&&(this.p=n),r===this._&&(this._=t),this.i-=1}M(r,t,n){n===void 0&&(n=(0,o.default)(r));let u;if(n){let f=r[this.HASH_TAG];if(f!==void 0)return this.H[f].l=t,this.i;Object.defineProperty(r,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:r,l:t,L:this._,B:this.h},this.H.push(u)}else{let f=this.g[r];if(f)return f.l=t,this.i;u={u:r,l:t,L:this._,B:this.h},this.g[r]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(r,t){if(t===void 0&&(t=(0,o.default)(r)),t){let n=r[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[r]||this.h}clear(){let r=this.HASH_TAG;this.H.forEach(function(t){delete t.u[r]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(r,t){let n;if(t===void 0&&(t=(0,o.default)(r)),t){let u=r[this.HASH_TAG];if(u===void 0)return!1;delete r[this.HASH_TAG],n=this.H[u],delete this.H[u]}else{if(n=this.g[r],n===void 0)return!1;delete this.g[r]}return this.V(n),!0}eraseElementByIterator(r){let t=r.o;return t===this.h&&(0,l.throwIteratorAccessError)(),this.V(t),r.next()}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let t=this.p;for(;r--;)t=t.B;return this.V(t),this.i}};s.HashContainer=e}),Ia=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Vo(),o=Rt(),l=class zo extends c.HashContainerIterator{constructor(r,t,n,u){super(r,t,u),this.container=n}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new zo(this.o,this.h,this.container,this.iteratorType)}},h=class extends c.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(t){r.insert(t)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,r){return this.M(e,void 0,r)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.u}find(e,r){let t=this.I(e,r);return new l(t,this.h,this)}forEach(e){let r=0,t=this.p;for(;t!==this.h;)e(t.u,r++,this),t=t.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}},i=h;s.default=i}),ka=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Vo(),o=h(Ho()),l=Rt();function h(t){return t&&t.t?t:{default:t}}var i=class Ko extends c.HashContainerIterator{constructor(n,u,f,d){super(n,u,d),this.container=f}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let n=this;return new Proxy([],{get(u,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(u,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new Ko(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.HashContainer{constructor(t=[]){super();let n=this;t.forEach(function(u){n.setElement(u[0],u[1])})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(t,n,u){return this.M(t,n,u)}getElementByKey(t,n){if(n===void 0&&(n=(0,o.default)(t)),n){let f=t[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let u=this.g[t];return u?u.l:void 0}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return[n.u,n.l]}find(t,n){let u=this.I(t,n);return new i(u,this.h,this)}forEach(t){let n=0,u=this.p;for(;u!==this.h;)t([u.u,u.l],n++,this),u=u.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield[t.u,t.l],t=t.B}).bind(this)()}},r=e;s.default=r}),Ta=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"t",{value:!0}),Object.defineProperty(s,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(s,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(s,"HashSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"LinkList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"OrderedMap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(s,"OrderedSet",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"Stack",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"Vector",{enumerable:!0,get:function(){return h.default}});var c=f(ba()),o=f(ma()),l=f(ya()),h=f(wa()),i=f(_a()),e=f(va()),r=f(Sa()),t=f(Aa()),n=f(Ia()),u=f(ka());function f(d){return d&&d.t?d:{default:d}}}),Oa=ve((s,c)=>{ce(),de(),fe();var o=Ta().OrderedSet,l=Ot()("number-allocator:trace"),h=Ot()("number-allocator:error");function i(r,t){this.low=r,this.high=t}i.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},i.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0};function e(r,t){if(!(this instanceof e))return new e(r,t);this.min=r,this.max=t,this.ss=new o([],(n,u)=>n.compare(u)),l("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let r=this.ss.begin(),t=r.pointer.low,n=r.pointer.high,u=t;return u+1<=n?this.ss.updateKeyByIterator(r,new i(t+1,n)):this.ss.eraseElementByPos(0),l("alloc():"+u),u},e.prototype.use=function(r){let t=new i(r,r),n=this.ss.lowerBound(t);if(!n.equals(this.ss.end())){let u=n.pointer.low,f=n.pointer.high;return n.pointer.equals(t)?(this.ss.eraseElementByIterator(n),l("use():"+r),!0):u>r?!1:u===r?(this.ss.updateKeyByIterator(n,new i(u+1,f)),l("use():"+r),!0):f===r?(this.ss.updateKeyByIterator(n,new i(u,f-1)),l("use():"+r),!0):(this.ss.updateKeyByIterator(n,new i(r+1,f)),this.ss.insert(new i(u,r-1)),l("use():"+r),!0)}return l("use():failed"),!1},e.prototype.free=function(r){if(r<this.min||r>this.max){h("free():"+r+" is out of range");return}let t=new i(r,r),n=this.ss.upperBound(t);if(n.equals(this.ss.end())){if(n.equals(this.ss.begin())){this.ss.insert(t);return}n.pre();let u=n.pointer.high;n.pointer.high+1===r?this.ss.updateKeyByIterator(n,new i(u,r)):this.ss.insert(t)}else if(n.equals(this.ss.begin()))if(r+1===n.pointer.low){let u=n.pointer.high;this.ss.updateKeyByIterator(n,new i(r,u))}else this.ss.insert(t);else{let u=n.pointer.low,f=n.pointer.high;n.pre();let d=n.pointer.low;n.pointer.high+1===r?r+1===u?(this.ss.eraseElementByIterator(n),this.ss.updateKeyByIterator(n,new i(d,f))):this.ss.updateKeyByIterator(n,new i(d,r)):r+1===u?(this.ss.eraseElementByIterator(n.next()),this.ss.insert(new i(r,f))):this.ss.insert(t)}l("free():"+r)},e.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new i(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let r of this.ss)console.log(r)},c.exports=e}),Go=ve((s,c)=>{ce(),de(),fe();var o=Oa();c.exports.NumberAllocator=o}),Pa=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=ga(),o=Go(),l=class{constructor(h){h>0&&(this.aliasToTopic=new c.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,i){if(i===0||i>this.max)return!1;let e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,h),this.topicToAlias[h]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let i=this.topicToAlias[h];return typeof i<"u"&&this.aliasToTopic.get(i),i}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};s.default=l}),Ca=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=Mr(),l=c(Pa()),h=nr(),i=(e,r)=>{e.log("_handleConnack");let{options:t}=e,n=t.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}r.properties.topicAliasMaximum>0&&(e.topicAliasSend=new l.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=r.properties.serverKeepAlive),r.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(n===0)e.reconnecting=!1,e._onConnect(r);else if(n>0){let u=new h.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[n]}`,n);e.emit("error",u),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};s.default=i}),Ra=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(o,l,h)=>{o.log("handling pubrel packet");let i=typeof h<"u"?h:o.noop,{messageId:e}=l,r={cmd:"pubcomp",messageId:e};o.incomingStore.get(l,(t,n)=>{t?o._sendPacket(r,i):(o.emit("message",n.topic,n.payload,n),o.handleMessage(n,u=>{if(u)return i(u);o.incomingStore.del(n,o.noop),o._sendPacket(r,i)}))})};s.default=c}),xa=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(fa()),l=c(pa()),h=c(Ca()),i=c(Mr()),e=c(Ra()),r=(t,n,u)=>{let{options:f}=t;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<n.length)return t.emit("error",new Error(`exceeding packets size ${n.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",n),n.cmd){case"publish":(0,o.default)(t,n,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,i.default)(t,n),u();break;case"pubrel":t.reschedulePing(),(0,e.default)(t,n,u);break;case"connack":(0,h.default)(t,n),u();break;case"auth":t.reschedulePing(),(0,l.default)(t,n),u();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),u();break;case"disconnect":t.emit("disconnect",n),u();break;default:t.log("_handlePacket :: unknown command"),u();break}};s.default=r}),Ba=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0}),s.TypedEventEmitter=void 0;var o=c((Yt(),He(jt))),l=nr(),h=class{};s.TypedEventEmitter=h,(0,l.applyMixin)(h,o.default)}),Lr=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.isReactNativeBrowser=s.isWebWorker=void 0;var c=()=>{var i;return typeof window<"u"?typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.toLowerCase().indexOf(" electron/"))>-1&&Fe!=null&&Fe.versions?!Object.prototype.hasOwnProperty.call(Fe.versions,"electron"):typeof window.document<"u":!1},o=()=>{var i,e;return!!(typeof self=="object"&&!((e=(i=self==null?void 0:self.constructor)===null||i===void 0?void 0:i.name)===null||e===void 0)&&e.includes("WorkerGlobalScope"))},l=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h=c()||o()||l();s.isWebWorker=o(),s.isReactNativeBrowser=l(),s.default=h}),Ma=ve((s,c)=>{ce(),de(),fe(),function(o,l){typeof s=="object"&&typeof c<"u"?l(s):typeof define=="function"&&define.amd?define(["exports"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.fastUniqueNumbers={}))}(s,function(o){var l=function(g){return function(b){var w=g(b);return b.add(w),w}},h=function(g){return function(b,w){return g.set(b,w),w}},i=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,r=e*2,t=function(g,b){return function(w){var _=b.get(w),A=_===void 0?w.size:_<r?_+1:0;if(!w.has(A))return g(w,A);if(w.size<e){for(;w.has(A);)A=Math.floor(Math.random()*r);return g(w,A)}if(w.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(A);)A=Math.floor(Math.random()*i);return g(w,A)}},n=new WeakMap,u=h(n),f=t(u,n),d=l(f);o.addUniqueNumber=d,o.generateUniqueNumber=f})}),La=ve((s,c)=>{ce(),de(),fe(),function(o,l){typeof s=="object"&&typeof c<"u"?l(s,Ma()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimersBroker={},o.fastUniqueNumbers))}(s,function(o,l){var h=function(r){return r.method!==void 0&&r.method==="call"},i=function(r){return r.error===null&&typeof r.id=="number"},e=function(r){var t=new Map([[0,function(){}]]),n=new Map([[0,function(){}]]),u=new Map,f=new Worker(r);f.addEventListener("message",function(_){var A=_.data;if(h(A)){var m=A.params,v=m.timerId,j=m.timerType;if(j==="interval"){var R=t.get(v);if(typeof R=="number"){var E=u.get(R);if(E===void 0||E.timerId!==v||E.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof R<"u")R();else throw new Error("The timer is in an undefined state.")}else if(j==="timeout"){var I=n.get(v);if(typeof I=="number"){var C=u.get(I);if(C===void 0||C.timerId!==v||C.timerType!==j)throw new Error("The timer is in an undefined state.")}else if(typeof I<"u")I(),n.delete(v);else throw new Error("The timer is in an undefined state.")}}else if(i(A)){var z=A.id,K=u.get(z);if(K===void 0)throw new Error("The timer is in an undefined state.");var be=K.timerId,L=K.timerType;u.delete(z),L==="interval"?t.delete(be):n.delete(be)}else{var Q=A.error.message;throw new Error(Q)}});var d=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"interval"}),t.set(_,A),f.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"interval"}})},g=function(_){var A=l.generateUniqueNumber(u);u.set(A,{timerId:_,timerType:"timeout"}),n.set(_,A),f.postMessage({id:A,method:"clear",params:{timerId:_,timerType:"timeout"}})},b=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=l.generateUniqueNumber(t);return t.set(m,function(){_(),typeof t.get(m)=="function"&&f.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:m,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:m,timerType:"interval"}}),m},w=function(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=l.generateUniqueNumber(n);return n.set(m,_),f.postMessage({id:null,method:"set",params:{delay:A,now:performance.now(),timerId:m,timerType:"timeout"}}),m};return{clearInterval:d,clearTimeout:g,setInterval:b,setTimeout:w}};o.load=e})}),Ua=ve((s,c)=>{ce(),de(),fe(),function(o,l){typeof s=="object"&&typeof c<"u"?l(s,La()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o.workerTimers={},o.workerTimersBroker))}(s,function(o,l){var h=function(f,d){var g=null;return function(){if(g!==null)return g;var b=new Blob([d],{type:"application/javascript; charset=utf-8"}),w=URL.createObjectURL(b);return g=f(w),setTimeout(function(){return URL.revokeObjectURL(w)}),g}},i=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=h(l.load,i),r=function(f){return e().clearInterval(f)},t=function(f){return e().clearTimeout(f)},n=function(){var f;return(f=e()).setInterval.apply(f,arguments)},u=function(){var f;return(f=e()).setTimeout.apply(f,arguments)};o.clearInterval=r,o.clearTimeout=t,o.setInterval=n,o.setTimeout=u})}),ja=ve(s=>{ce(),de(),fe();var c=s&&s.__createBinding||(Object.create?function(n,u,f,d){d===void 0&&(d=f);var g=Object.getOwnPropertyDescriptor(u,f);(!g||("get"in g?!u.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(n,d,g)}:function(n,u,f,d){d===void 0&&(d=f),n[d]=u[f]}),o=s&&s.__setModuleDefault||(Object.create?function(n,u){Object.defineProperty(n,"default",{enumerable:!0,value:u})}:function(n,u){n.default=u}),l=s&&s.__importStar||function(){var n=function(u){return n=Object.getOwnPropertyNames||function(f){var d=[];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(d[d.length]=g);return d},n(u)};return function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var d=n(u),g=0;g<d.length;g++)d[g]!=="default"&&c(f,u,d[g]);return o(f,u),f}}();Object.defineProperty(s,"__esModule",{value:!0});var h=l(Lr()),i=Ua(),e={set:i.setInterval,clear:i.clearInterval},r={set:(n,u)=>setInterval(n,u),clear:n=>clearInterval(n)},t=n=>{switch(n){case"native":return r;case"worker":return e;case"auto":default:return h.default&&!h.isWebWorker&&!h.isReactNativeBrowser?e:r}};s.default=t}),Qo=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(ja()),l=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(h,i){this.destroyed=!1,this.client=h,this.timer=typeof i=="object"&&"set"in i&&"clear"in i?i:(0,o.default)(i),this.setKeepalive(h.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(h){if(h*=1e3,isNaN(h)||h<=0||h>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${h}`);this._keepalive=h,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${h}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let h=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+h,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};s.default=l}),ln=ve(s=>{ce(),de(),fe();var c=s&&s.__createBinding||(Object.create?function(R,E,I,C){C===void 0&&(C=I);var z=Object.getOwnPropertyDescriptor(E,I);(!z||("get"in z?!E.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(R,C,z)}:function(R,E,I,C){C===void 0&&(C=I),R[C]=E[I]}),o=s&&s.__setModuleDefault||(Object.create?function(R,E){Object.defineProperty(R,"default",{enumerable:!0,value:E})}:function(R,E){R.default=E}),l=s&&s.__importStar||function(){var R=function(E){return R=Object.getOwnPropertyNames||function(I){var C=[];for(var z in I)Object.prototype.hasOwnProperty.call(I,z)&&(C[C.length]=z);return C},R(E)};return function(E){if(E&&E.__esModule)return E;var I={};if(E!=null)for(var C=R(E),z=0;z<C.length;z++)C[z]!=="default"&&c(I,E,C[z]);return o(I,E),I}}(),h=s&&s.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(s,"__esModule",{value:!0});var i=h(Vs()),e=h(la()),r=h(xo()),t=Xt(),n=h(ha()),u=l(ca()),f=h(Ot()),d=h(Bo()),g=h(xa()),b=nr(),w=Ba(),_=h(Qo()),A=l(Lr()),m=globalThis.setImmediate||((...R)=>{let E=R.shift();(0,b.nextTick)(()=>{E(...R)})}),v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},j=class un extends w.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(E,I){super(),this.options=I||{};for(let C in v)typeof this.options[C]>"u"?this.options[C]=v[C]:this.options[C]=I[C];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",un.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",I.protocol),this.log("MqttClient :: options.protocolVersion",I.protocolVersion),this.log("MqttClient :: options.username",I.username),this.log("MqttClient :: options.keepalive",I.keepalive),this.log("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",I.properties?I.properties.topicAliasMaximum:void 0),this.options.clientId=typeof I.clientId=="string"?I.clientId:un.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:(...C)=>{C[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=E,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new r.default:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new d.default,this.incomingStore=I.incomingStore||new d.default,this.queueQoSZero=I.queueQoSZero===void 0?!0:I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.properties&&I.properties.topicAliasMaximum>0&&(I.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new i.default(I.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:C}=this,z=()=>{let K=C.shift();this.log("deliver :: entry %o",K);let be=null;if(!K){this._resubscribe();return}be=K.packet,this.log("deliver :: call _sendPacket for %o",be);let L=!0;be.messageId&&be.messageId!==0&&(this.messageIdProvider.register(be.messageId)||(L=!1)),L?this._sendPacket(be,Q=>{K.cb&&K.cb(Q),z()}):(this.log("messageId: %d has already used. The message is skipped and removed.",be.messageId),z())};this.log("connect :: sending queued packets"),z()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(E,I){I()}handleMessage(E,I){I()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var E;let I=new t.Writable,C=e.default.parser(this.options),z=null,K=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),C.on("packet",F=>{this.log("parser :: on packet push to packets array."),K.push(F)});let be=()=>{this.log("work :: getting next packet in queue");let F=K.shift();if(F)this.log("work :: packet pulled from queue"),(0,g.default)(this,F,L);else{this.log("work :: no packets in queue");let ye=z;z=null,this.log("work :: done flag is %s",!!ye),ye&&ye()}},L=()=>{if(K.length)(0,b.nextTick)(be);else{let F=z;z=null,F()}};I._write=(F,ye,me)=>{z=me,this.log("writable stream :: parsing buffer"),C.parse(F),be()};let Q=F=>{this.log("streamErrorHandler :: error",F.message),F.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",F)):this.noop(F)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",Q),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let J={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(J.will=Object.assign(Object.assign({},this.options.will),{payload:(E=this.options.will)===null||E===void 0?void 0:E.payload})),this.topicAliasRecv&&(J.properties||(J.properties={}),this.topicAliasRecv&&(J.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(J),C.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let F=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(F)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(E,I,C,z){this.log("publish :: message `%s` to topic `%s`",I,E);let{options:K}=this;typeof C=="function"&&(z=C,C=null),C=C||{},C=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),C);let{qos:be,retain:L,dup:Q,properties:J,cbStorePut:F}=C;if(this._checkDisconnecting(z))return this;let ye=()=>{let me=0;if((be===1||be===2)&&(me=this._nextId(),me===null))return this.log("No messageId left"),!1;let pe={cmd:"publish",topic:E,payload:I,qos:be,retain:L,messageId:me,dup:Q};switch(K.protocolVersion===5&&(pe.properties=J),this.log("publish :: qos",be),be){case 1:case 2:this.outgoing[pe.messageId]={volatile:!1,cb:z||this.noop},this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,void 0,F);break;default:this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,z,F);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ye())&&this._storeProcessingQueue.push({invoke:ye,cbStorePut:C.cbStorePut,callback:z}),this}publishAsync(E,I,C){return new Promise((z,K)=>{this.publish(E,I,C,(be,L)=>{be?K(be):z(L)})})}subscribe(E,I,C){let z=this.options.protocolVersion;typeof I=="function"&&(C=I),C=C||this.noop;let K=!1,be=[];typeof E=="string"?(E=[E],be=E):Array.isArray(E)?be=E:typeof E=="object"&&(K=E.resubscribe,delete E.resubscribe,be=Object.keys(E));let L=u.validateTopics(be);if(L!==null)return m(C,new Error(`Invalid topic ${L}`)),this;if(this._checkDisconnecting(C))return this.log("subscribe: discconecting true"),this;let Q={qos:0};z===5&&(Q.nl=!1,Q.rap=!1,Q.rh=0),I=Object.assign(Object.assign({},Q),I);let J=I.properties,F=[],ye=(pe,Te)=>{if(Te=Te||I,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,pe)||this._resubscribeTopics[pe].qos<Te.qos||K){let V={topic:pe,qos:Te.qos};z===5&&(V.nl=Te.nl,V.rap=Te.rap,V.rh=Te.rh,V.properties=J),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",V.topic,V.qos),F.push(V)}};if(Array.isArray(E)?E.forEach(pe=>{this.log("subscribe: array topic %s",pe),ye(pe)}):Object.keys(E).forEach(pe=>{this.log("subscribe: object topic %s, %o",pe,E[pe]),ye(pe,E[pe])}),!F.length)return C(null,[]),this;let me=()=>{let pe=this._nextId();if(pe===null)return this.log("No messageId left"),!1;let Te={cmd:"subscribe",subscriptions:F,messageId:pe};if(J&&(Te.properties=J),this.options.resubscribe){this.log("subscribe :: resubscribe true");let V=[];F.forEach(we=>{if(this.options.reconnectPeriod>0){let O={qos:we.qos};z===5&&(O.nl=we.nl||!1,O.rap=we.rap||!1,O.rh=we.rh||0,O.properties=we.properties),this._resubscribeTopics[we.topic]=O,V.push(we.topic)}}),this.messageIdToTopic[Te.messageId]=V}return this.outgoing[Te.messageId]={volatile:!0,cb(V,we){if(!V){let{granted:O}=we;for(let se=0;se<O.length;se+=1)F[se].qos=O[se]}C(V,F,we)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(Te),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!me())&&this._storeProcessingQueue.push({invoke:me,callback:C}),this}subscribeAsync(E,I){return new Promise((C,z)=>{this.subscribe(E,I,(K,be)=>{K?z(K):C(be)})})}unsubscribe(E,I,C){typeof E=="string"&&(E=[E]),typeof I=="function"&&(C=I),C=C||this.noop;let z=u.validateTopics(E);if(z!==null)return m(C,new Error(`Invalid topic ${z}`)),this;if(this._checkDisconnecting(C))return this;let K=()=>{let be=this._nextId();if(be===null)return this.log("No messageId left"),!1;let L={cmd:"unsubscribe",messageId:be,unsubscriptions:[]};return typeof E=="string"?L.unsubscriptions=[E]:Array.isArray(E)&&(L.unsubscriptions=E),this.options.resubscribe&&L.unsubscriptions.forEach(Q=>{delete this._resubscribeTopics[Q]}),typeof I=="object"&&I.properties&&(L.properties=I.properties),this.outgoing[L.messageId]={volatile:!0,cb:C},this.log("unsubscribe: call _sendPacket"),this._sendPacket(L),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:C}),this}unsubscribeAsync(E,I){return new Promise((C,z)=>{this.unsubscribe(E,I,(K,be)=>{K?z(K):C(be)})})}end(E,I,C){this.log("end :: (%s)",this.options.clientId),(E==null||typeof E!="boolean")&&(C=C||I,I=E,E=!1),typeof I!="object"&&(C=C||I,I=null),this.log("end :: cb? %s",!!C),(!C||typeof C!="function")&&(C=this.noop);let z=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(be=>{this.outgoingStore.close(L=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),C){let Q=be||L;this.log("end :: closeStores: invoking callback with args"),C(Q)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},K=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,E),this._cleanUp(E,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(z)},I)};return this.disconnecting?(C(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,K,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),K()),this)}endAsync(E,I){return new Promise((C,z)=>{this.end(E,I,K=>{K?z(K):C()})})}removeOutgoingMessage(E){if(this.outgoing[E]){let{cb:I}=this.outgoing[E];this._removeOutgoingAndStoreMessage(E,()=>{I(new Error("Message removed"))})}return this}reconnect(E){this.log("client reconnect");let I=()=>{E?(this.options.incomingStore=E.incomingStore,this.options.outgoingStore=E.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=I:I(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(E=>{this.outgoing[E].volatile&&typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(E=>{typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_removeTopicAliasAndRecoverTopicName(E){let I;E.properties&&(I=E.properties.topicAlias);let C=E.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",I,C),C.length===0){if(typeof I>"u")return new Error("Unregistered Topic Alias");if(C=this.topicAliasSend.getTopicByAlias(I),typeof C>"u")return new Error("Unregistered Topic Alias");E.topic=C}I&&delete E.properties.topicAlias}_checkDisconnecting(E){return this.disconnecting&&(E&&E!==this.noop?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(E,I,C={}){if(I&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),this.log("_cleanUp :: forced? %s",E),E)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let z=Object.assign({cmd:"disconnect"},C);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(z,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),m(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),I&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())}_storeAndSend(E,I,C){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",E.cmd);let z=E,K;if(z.cmd==="publish"&&(z=(0,n.default)(E),K=this._removeTopicAliasAndRecoverTopicName(z),K))return I&&I(K);this.outgoingStore.put(z,be=>{if(be)return I&&I(be);C(),this._writePacket(E,I)})}_applyTopicAlias(E){if(this.options.protocolVersion===5&&E.cmd==="publish"){let I;E.properties&&(I=E.properties.topicAlias);let C=E.topic.toString();if(this.topicAliasSend)if(I){if(C.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",C,I),!this.topicAliasSend.put(C,I)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,I),new Error("Sending Topic Alias out of range")}else C.length!==0&&(this.options.autoAssignTopicAlias?(I=this.topicAliasSend.getAliasByTopic(C),I?(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",C,I)):(I=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(C,I),E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",C,I))):this.options.autoUseTopicAlias&&(I=this.topicAliasSend.getAliasByTopic(C),I&&(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",C,I))));else if(I)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",C,I),new Error("Sending Topic Alias out of range")}}_noop(E){this.log("noop ::",E)}_writePacket(E,I){this.log("_writePacket :: packet: %O",E),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",E),this.log("_writePacket :: writing to stream");let C=e.default.writeToStream(E,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",C),!C&&I&&I!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",I)):I&&(this.log("_writePacket :: invoking cb"),I())}_sendPacket(E,I,C,z){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),C=C||this.noop,I=I||this.noop;let K=this._applyTopicAlias(E);if(K){I(K);return}if(!this.connected){if(E.cmd==="auth"){this._writePacket(E,I);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(E,I,C);return}if(z){this._writePacket(E,I);return}switch(E.cmd){case"publish":break;case"pubrel":this._storeAndSend(E,I,C);return;default:this._writePacket(E,I);return}switch(E.qos){case 2:case 1:this._storeAndSend(E,I,C);break;case 0:default:this._writePacket(E,I);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(E,I,C){this.log("_storePacket :: packet: %o",E),this.log("_storePacket :: cb? %s",!!I),C=C||this.noop;let z=E;if(z.cmd==="publish"){z=(0,n.default)(E);let be=this._removeTopicAliasAndRecoverTopicName(z);if(be)return I&&I(be)}let K=z.qos||0;K===0&&this.queueQoSZero||z.cmd!=="publish"?this.queue.push({packet:z,cb:I}):K>0?(I=this.outgoing[z.messageId]?this.outgoing[z.messageId].cb:null,this.outgoingStore.put(z,be=>{if(be)return I&&I(be);C()})):I&&I(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(E=!1){this.keepaliveManager&&this.options.keepalive&&(E||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let I=0;I<E.length;I++){let C={};C[E[I]]=this._resubscribeTopics[E[I]],C.resubscribe=!0,this.subscribe(C,{properties:C[E[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(E){if(this.disconnected){this.emit("connect",E);return}this.connackPacket=E,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let I=()=>{let C=this.outgoingStore.createStream(),z=()=>{C.destroy(),C=null,this._flushStoreProcessingQueue(),K()},K=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",z),C.on("error",L=>{K(),this._flushStoreProcessingQueue(),this.removeListener("close",z),this.emit("error",L)});let be=()=>{if(!C)return;let L=C.read(1),Q;if(!L){C.once("readable",be);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[L.messageId]){be();return}!this.disconnecting&&!this.reconnectTimer?(Q=this.outgoing[L.messageId]?this.outgoing[L.messageId].cb:null,this.outgoing[L.messageId]={volatile:!1,cb(J,F){Q&&Q(J,F),be()}},this._packetIdsDuringStoreProcessing[L.messageId]=!0,this.messageIdProvider.register(L.messageId)?this._sendPacket(L,void 0,void 0,!0):this.log("messageId: %d has already used.",L.messageId)):C.destroy&&C.destroy()};C.on("end",()=>{let L=!0;for(let Q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[Q]){L=!1;break}this.removeListener("close",z),L?(K(),this._invokeAllStoreProcessingQueue(),this.emit("connect",E)):I()}),be()};I()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(E,I){delete this.outgoing[E],this.outgoingStore.del({messageId:E},(C,z)=>{I(C,z),this.messageIdProvider.deallocate(E),this._invokeStoreProcessingQueue()})}};j.VERSION=b.MQTTJS_VERSION,s.default=j}),Na=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Go(),o=class{constructor(){this.numberAllocator=new c.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};s.default=o});function qt(s){throw new RangeError(Jo[s])}function Bn(s,c){let o=s.split("@"),l="";o.length>1&&(l=o[0]+"@",s=o[1]);let h=function(i,e){let r=[],t=i.length;for(;t--;)r[t]=e(i[t]);return r}((s=s.replace(Yo,".")).split("."),c).join(".");return l+h}function Mn(s){let c=[],o=0,l=s.length;for(;o<l;){let h=s.charCodeAt(o++);if(h>=55296&&h<=56319&&o<l){let i=s.charCodeAt(o++);(64512&i)==56320?c.push(((1023&h)<<10)+(1023&i)+65536):(c.push(h),o--)}else c.push(h)}return c}var Ln,Un,Yo,Jo,pt,gr,$r,Hr,Vr,zr,Ut,Da=ot(()=>{ce(),de(),fe(),Ln=/^xn--/,Un=/[^\0-\x7E]/,Yo=/[\x2E\u3002\uFF0E\uFF61]/g,Jo={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},pt=Math.floor,gr=String.fromCharCode,$r=function(s,c){return s+22+75*(s<26)-((c!=0)<<5)},Hr=function(s,c,o){let l=0;for(s=o?pt(s/700):s>>1,s+=pt(s/c);s>455;l+=36)s=pt(s/35);return pt(l+36*s/(s+38))},Vr=function(s){let c=[],o=s.length,l=0,h=128,i=72,e=s.lastIndexOf("-");e<0&&(e=0);for(let t=0;t<e;++t)s.charCodeAt(t)>=128&&qt("not-basic"),c.push(s.charCodeAt(t));for(let t=e>0?e+1:0;t<o;){let n=l;for(let f=1,d=36;;d+=36){t>=o&&qt("invalid-input");let g=(r=s.charCodeAt(t++))-48<10?r-22:r-65<26?r-65:r-97<26?r-97:36;(g>=36||g>pt((2147483647-l)/f))&&qt("overflow"),l+=g*f;let b=d<=i?1:d>=i+26?26:d-i;if(g<b)break;let w=36-b;f>pt(2147483647/w)&&qt("overflow"),f*=w}let u=c.length+1;i=Hr(l-n,u,n==0),pt(l/u)>2147483647-h&&qt("overflow"),h+=pt(l/u),l%=u,c.splice(l++,0,h)}var r;return String.fromCodePoint(...c)},zr=function(s){let c=[],o=(s=Mn(s)).length,l=128,h=0,i=72;for(let t of s)t<128&&c.push(gr(t));let e=c.length,r=e;for(e&&c.push("-");r<o;){let t=2147483647;for(let u of s)u>=l&&u<t&&(t=u);let n=r+1;t-l>pt((2147483647-h)/n)&&qt("overflow"),h+=(t-l)*n,l=t;for(let u of s)if(u<l&&++h>2147483647&&qt("overflow"),u==l){let f=h;for(let d=36;;d+=36){let g=d<=i?1:d>=i+26?26:d-i;if(f<g)break;let b=f-g,w=36-g;c.push(gr($r(g+b%w,0))),f=pt(b/w)}c.push(gr($r(f,0))),i=Hr(h,n,r==e),h=0,++r}++h,++l}return c.join("")},Ut={version:"2.1.0",ucs2:{decode:Mn,encode:s=>String.fromCodePoint(...s)},decode:Vr,encode:zr,toASCII:function(s){return Bn(s,function(c){return Un.test(c)?"xn--"+zr(c):c})},toUnicode:function(s){return Bn(s,function(c){return Ln.test(c)?Vr(c.slice(4).toLowerCase()):c})}},Ut.decode,Ut.encode,Ut.toASCII,Ut.toUnicode,Ut.ucs2,Ut.version});function Fa(s,c){return Object.prototype.hasOwnProperty.call(s,c)}var jn,er,Nn,bt,Wa=ot(()=>{ce(),de(),fe(),jn=function(s,c,o,l){c=c||"&",o=o||"=";var h={};if(typeof s!="string"||s.length===0)return h;var i=/\+/g;s=s.split(c);var e=1e3;l&&typeof l.maxKeys=="number"&&(e=l.maxKeys);var r=s.length;e>0&&r>e&&(r=e);for(var t=0;t<r;++t){var n,u,f,d,g=s[t].replace(i,"%20"),b=g.indexOf(o);b>=0?(n=g.substr(0,b),u=g.substr(b+1)):(n=g,u=""),f=decodeURIComponent(n),d=decodeURIComponent(u),Fa(h,f)?Array.isArray(h[f])?h[f].push(d):h[f]=[h[f],d]:h[f]=d}return h},er=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},Nn=function(s,c,o,l){return c=c||"&",o=o||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(h){var i=encodeURIComponent(er(h))+o;return Array.isArray(s[h])?s[h].map(function(e){return i+encodeURIComponent(er(e))}).join(c):i+encodeURIComponent(er(s[h]))}).join(c):l?encodeURIComponent(er(l))+o+encodeURIComponent(er(s)):""},bt={},bt.decode=bt.parse=jn,bt.encode=bt.stringify=Nn,bt.decode,bt.encode,bt.parse,bt.stringify});function hn(){throw new Error("setTimeout has not been defined")}function cn(){throw new Error("clearTimeout has not been defined")}function Xo(s){if(At===setTimeout)return setTimeout(s,0);if((At===hn||!At)&&setTimeout)return At=setTimeout,setTimeout(s,0);try{return At(s,0)}catch{try{return At.call(null,s,0)}catch{return At.call(this||Gt,s,0)}}}function qa(){Qt&&zt&&(Qt=!1,zt.length?yt=zt.concat(yt):cr=-1,yt.length&&Zo())}function Zo(){if(!Qt){var s=Xo(qa);Qt=!0;for(var c=yt.length;c;){for(zt=yt,yt=[];++cr<c;)zt&&zt[cr].run();cr=-1,c=yt.length}zt=null,Qt=!1,function(o){if(It===clearTimeout)return clearTimeout(o);if((It===cn||!It)&&clearTimeout)return It=clearTimeout,clearTimeout(o);try{It(o)}catch{try{return It.call(null,o)}catch{return It.call(this||Gt,o)}}}(s)}}function Dn(s,c){(this||Gt).fun=s,(this||Gt).array=c}function vt(){}var Fn,At,It,Gt,et,zt,yt,Qt,cr,Xe,$a=ot(()=>{ce(),de(),fe(),Gt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,et=Fn={},function(){try{At=typeof setTimeout=="function"?setTimeout:hn}catch{At=hn}try{It=typeof clearTimeout=="function"?clearTimeout:cn}catch{It=cn}}(),yt=[],Qt=!1,cr=-1,et.nextTick=function(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];yt.push(new Dn(s,c)),yt.length!==1||Qt||Xo(Zo)},Dn.prototype.run=function(){(this||Gt).fun.apply(null,(this||Gt).array)},et.title="browser",et.browser=!0,et.env={},et.argv=[],et.version="",et.versions={},et.on=vt,et.addListener=vt,et.once=vt,et.off=vt,et.removeListener=vt,et.removeAllListeners=vt,et.emit=vt,et.prependListener=vt,et.prependOnceListener=vt,et.listeners=function(s){return[]},et.binding=function(s){throw new Error("process.binding is not supported")},et.cwd=function(){return"/"},et.chdir=function(s){throw new Error("process.chdir is not supported")},et.umask=function(){return 0},Xe=Fn,Xe.addListener,Xe.argv,Xe.binding,Xe.browser,Xe.chdir,Xe.cwd,Xe.emit,Xe.env,Xe.listeners,Xe.nextTick,Xe.off,Xe.on,Xe.once,Xe.prependListener,Xe.prependOnceListener,Xe.removeAllListeners,Xe.removeListener,Xe.title,Xe.umask,Xe.version,Xe.versions});function Ha(){if(fn)return Ir;fn=!0;var s=Ir={},c,o;function l(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=l}catch{c=l}try{typeof clearTimeout=="function"?o=clearTimeout:o=h}catch{o=h}})();function i(w){if(c===setTimeout)return setTimeout(w,0);if((c===l||!c)&&setTimeout)return c=setTimeout,setTimeout(w,0);try{return c(w,0)}catch{try{return c.call(null,w,0)}catch{return c.call(this||Ht,w,0)}}}function e(w){if(o===clearTimeout)return clearTimeout(w);if((o===h||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(w);try{return o(w)}catch{try{return o.call(null,w)}catch{return o.call(this||Ht,w)}}}var r=[],t=!1,n,u=-1;function f(){!t||!n||(t=!1,n.length?r=n.concat(r):u=-1,r.length&&d())}function d(){if(!t){var w=i(f);t=!0;for(var _=r.length;_;){for(n=r,r=[];++u<_;)n&&n[u].run();u=-1,_=r.length}n=null,t=!1,e(w)}}s.nextTick=function(w){var _=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)_[A-1]=arguments[A];r.push(new g(w,_)),r.length===1&&!t&&i(d)};function g(w,_){(this||Ht).fun=w,(this||Ht).array=_}g.prototype.run=function(){(this||Ht).fun.apply(null,(this||Ht).array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function b(){}return s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(w){return[]},s.binding=function(w){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(w){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},Ir}var Ir,fn,Ht,Ye,es=ot(()=>{ce(),de(),fe(),Ir={},fn=!1,Ht=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Ye=Ha(),Ye.platform="browser",Ye.addListener,Ye.argv,Ye.binding,Ye.browser,Ye.chdir,Ye.cwd,Ye.emit,Ye.env,Ye.listeners,Ye.nextTick,Ye.off,Ye.on,Ye.once,Ye.prependListener,Ye.prependOnceListener,Ye.removeAllListeners,Ye.removeListener,Ye.title,Ye.umask,Ye.version,Ye.versions});function Va(){if(dn)return kr;dn=!0;var s=Ye;function c(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var r="",t=0,n=-1,u=0,f,d=0;d<=i.length;++d){if(d<i.length)f=i.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||u===1))if(n!==d-1&&u===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var g=r.lastIndexOf("/");if(g!==r.length-1){g===-1?(r="",t=0):(r=r.slice(0,g),t=r.length-1-r.lastIndexOf("/")),n=d,u=0;continue}}else if(r.length===2||r.length===1){r="",t=0,n=d,u=0;continue}}e&&(r.length>0?r+="/..":r="..",t=2)}else r.length>0?r+="/"+i.slice(n+1,d):r=i.slice(n+1,d),t=d-n-1;n=d,u=0}else f===46&&u!==-1?++u:u=-1}return r}function l(i,e){var r=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+t:r+i+t:t}var h={resolve:function(){for(var i="",e=!1,r,t=arguments.length-1;t>=-1&&!e;t--){var n;t>=0?n=arguments[t]:(r===void 0&&(r=s.cwd()),n=r),c(n),n.length!==0&&(i=n+"/"+i,e=n.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(c(i),i.length===0)return".";var e=i.charCodeAt(0)===47,r=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&r&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return c(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var r=arguments[e];c(r),r.length>0&&(i===void 0?i=r:i+="/"+r)}return i===void 0?".":h.normalize(i)},relative:function(i,e){if(c(i),c(e),i===e||(i=h.resolve(i),e=h.resolve(e),i===e))return"";for(var r=1;r<i.length&&i.charCodeAt(r)===47;++r);for(var t=i.length,n=t-r,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var f=e.length,d=f-u,g=n<d?n:d,b=-1,w=0;w<=g;++w){if(w===g){if(d>g){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else n>g&&(i.charCodeAt(r+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(r+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var m="";for(w=r+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(c(i),i.length===0)return".";for(var e=i.charCodeAt(0),r=e===47,t=-1,n=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!n){t=u;break}}else n=!1;return t===-1?r?"/":".":r&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(i);var r=0,t=-1,n=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var f=e.length-1,d=-1;for(u=i.length-1;u>=0;--u){var g=i.charCodeAt(u);if(g===47){if(!n){r=u+1;break}}else d===-1&&(n=!1,d=u+1),f>=0&&(g===e.charCodeAt(f)?--f===-1&&(t=u):(f=-1,t=d))}return r===t?t=d:t===-1&&(t=i.length),i.slice(r,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!n){r=u+1;break}}else t===-1&&(n=!1,t=u+1);return t===-1?"":i.slice(r,t)}},extname:function(i){c(i);for(var e=-1,r=0,t=-1,n=!0,u=0,f=i.length-1;f>=0;--f){var d=i.charCodeAt(f);if(d===47){if(!n){r=f+1;break}continue}t===-1&&(n=!1,t=f+1),d===46?e===-1?e=f:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===r+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){c(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var r=i.charCodeAt(0),t=r===47,n;t?(e.root="/",n=1):n=0;for(var u=-1,f=0,d=-1,g=!0,b=i.length-1,w=0;b>=n;--b){if(r=i.charCodeAt(b),r===47){if(!g){f=b+1;break}continue}d===-1&&(g=!1,d=b+1),r===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||d===-1||w===0||w===1&&u===d-1&&u===f+1?d!==-1&&(f===0&&t?e.base=e.name=i.slice(1,d):e.base=e.name=i.slice(f,d)):(f===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,d)):(e.name=i.slice(f,u),e.base=i.slice(f,d)),e.ext=i.slice(u,d)),f>0?e.dir=i.slice(0,f-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,kr=h,kr}var kr,dn,pn,za=ot(()=>{ce(),de(),fe(),es(),kr={},dn=!1,pn=Va()}),ts={};rr(ts,{URL:()=>ws,Url:()=>ps,default:()=>qe,fileURLToPath:()=>rs,format:()=>gs,parse:()=>ys,pathToFileURL:()=>is,resolve:()=>bs,resolveObject:()=>ms});function ct(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function sr(s,c,o){if(s&&gt.isObject(s)&&s instanceof ct)return s;var l=new ct;return l.parse(s,c,o),l}function Ka(){if(gn)return Tr;gn=!0;var s=Xe;function c(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,e){for(var r="",t=0,n=-1,u=0,f,d=0;d<=i.length;++d){if(d<i.length)f=i.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||u===1))if(n!==d-1&&u===2){if(r.length<2||t!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var g=r.lastIndexOf("/");if(g!==r.length-1){g===-1?(r="",t=0):(r=r.slice(0,g),t=r.length-1-r.lastIndexOf("/")),n=d,u=0;continue}}else if(r.length===2||r.length===1){r="",t=0,n=d,u=0;continue}}e&&(r.length>0?r+="/..":r="..",t=2)}else r.length>0?r+="/"+i.slice(n+1,d):r=i.slice(n+1,d),t=d-n-1;n=d,u=0}else f===46&&u!==-1?++u:u=-1}return r}function l(i,e){var r=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+t:r+i+t:t}var h={resolve:function(){for(var i="",e=!1,r,t=arguments.length-1;t>=-1&&!e;t--){var n;t>=0?n=arguments[t]:(r===void 0&&(r=s.cwd()),n=r),c(n),n.length!==0&&(i=n+"/"+i,e=n.charCodeAt(0)===47)}return i=o(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(c(i),i.length===0)return".";var e=i.charCodeAt(0)===47,r=i.charCodeAt(i.length-1)===47;return i=o(i,!e),i.length===0&&!e&&(i="."),i.length>0&&r&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return c(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var r=arguments[e];c(r),r.length>0&&(i===void 0?i=r:i+="/"+r)}return i===void 0?".":h.normalize(i)},relative:function(i,e){if(c(i),c(e),i===e||(i=h.resolve(i),e=h.resolve(e),i===e))return"";for(var r=1;r<i.length&&i.charCodeAt(r)===47;++r);for(var t=i.length,n=t-r,u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var f=e.length,d=f-u,g=n<d?n:d,b=-1,w=0;w<=g;++w){if(w===g){if(d>g){if(e.charCodeAt(u+w)===47)return e.slice(u+w+1);if(w===0)return e.slice(u+w)}else n>g&&(i.charCodeAt(r+w)===47?b=w:w===0&&(b=0));break}var _=i.charCodeAt(r+w),A=e.charCodeAt(u+w);if(_!==A)break;_===47&&(b=w)}var m="";for(w=r+b+1;w<=t;++w)(w===t||i.charCodeAt(w)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+e.slice(u+b):(u+=b,e.charCodeAt(u)===47&&++u,e.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(c(i),i.length===0)return".";for(var e=i.charCodeAt(0),r=e===47,t=-1,n=!0,u=i.length-1;u>=1;--u)if(e=i.charCodeAt(u),e===47){if(!n){t=u;break}}else n=!1;return t===-1?r?"/":".":r&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(i);var r=0,t=-1,n=!0,u;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var f=e.length-1,d=-1;for(u=i.length-1;u>=0;--u){var g=i.charCodeAt(u);if(g===47){if(!n){r=u+1;break}}else d===-1&&(n=!1,d=u+1),f>=0&&(g===e.charCodeAt(f)?--f===-1&&(t=u):(f=-1,t=d))}return r===t?t=d:t===-1&&(t=i.length),i.slice(r,t)}else{for(u=i.length-1;u>=0;--u)if(i.charCodeAt(u)===47){if(!n){r=u+1;break}}else t===-1&&(n=!1,t=u+1);return t===-1?"":i.slice(r,t)}},extname:function(i){c(i);for(var e=-1,r=0,t=-1,n=!0,u=0,f=i.length-1;f>=0;--f){var d=i.charCodeAt(f);if(d===47){if(!n){r=f+1;break}continue}t===-1&&(n=!1,t=f+1),d===46?e===-1?e=f:u!==1&&(u=1):e!==-1&&(u=-1)}return e===-1||t===-1||u===0||u===1&&e===t-1&&e===r+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return l("/",i)},parse:function(i){c(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var r=i.charCodeAt(0),t=r===47,n;t?(e.root="/",n=1):n=0;for(var u=-1,f=0,d=-1,g=!0,b=i.length-1,w=0;b>=n;--b){if(r=i.charCodeAt(b),r===47){if(!g){f=b+1;break}continue}d===-1&&(g=!1,d=b+1),r===46?u===-1?u=b:w!==1&&(w=1):u!==-1&&(w=-1)}return u===-1||d===-1||w===0||w===1&&u===d-1&&u===f+1?d!==-1&&(f===0&&t?e.base=e.name=i.slice(1,d):e.base=e.name=i.slice(f,d)):(f===0&&t?(e.name=i.slice(1,u),e.base=i.slice(1,d)):(e.name=i.slice(f,u),e.base=i.slice(f,d)),e.ext=i.slice(u,d)),f>0?e.dir=i.slice(0,f-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,Tr=h,Tr}function Ga(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Pr?Qa(s):Ya(s)}function Qa(s){let c=s.hostname,o=s.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let h=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&h===102||o[l+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(ls,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let l=o.codePointAt(1)|32,h=o[2];if(l<ss||l>as||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Ya(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let l=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function Ja(s){let c=bn.resolve(s),o=s.charCodeAt(s.length-1);(o===os||Pr&&o===ns)&&c[c.length-1]!==bn.sep&&(c+="/");let l=new URL("file://");return c.includes("%")&&(c=c.replace(us,"%25")),!Pr&&c.includes("\\")&&(c=c.replace(hs,"%5C")),c.includes(`
`)&&(c=c.replace(cs,"%0A")),c.includes("\r")&&(c=c.replace(fs,"%0D")),c.includes("	")&&(c=c.replace(ds,"%09")),l.pathname=c,l}function rs(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Cr?Xa(s):Za(s)}function Xa(s){let c=s.hostname,o=s.pathname;for(let l=0;l<o.length;l++)if(o[l]==="%"){let h=o.codePointAt(l+2)||32;if(o[l+1]==="2"&&h===102||o[l+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(As,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let l=o.codePointAt(1)|32,h=o[2];if(l<Es||l>Ss||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Za(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let l=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function is(s){let c=pn.resolve(s),o=s.charCodeAt(s.length-1);(o===vs||Cr&&o===_s)&&c[c.length-1]!==pn.sep&&(c+="/");let l=new URL("file://");return c.includes("%")&&(c=c.replace(Is,"%25")),!Cr&&c.includes("\\")&&(c=c.replace(ks,"%5C")),c.includes(`
`)&&(c=c.replace(Ts,"%0A")),c.includes("\r")&&(c=c.replace(Os,"%0D")),c.includes("	")&&(c=c.replace(Ps,"%09")),l.pathname=c,l}var qe,Wn,gt,qn,$n,Hn,Vn,br,Kr,Gr,Qr,zn,Kn,mr,$t,yr,Tr,gn,bn,Gn,ns,os,ss,as,Pr,ls,us,hs,cs,fs,ds,Qn,ps,gs,bs,ms,ys,ws,_s,vs,Es,Ss,Cr,As,Is,ks,Ts,Os,Ps,el=ot(()=>{ce(),de(),fe(),Da(),Wa(),$a(),za(),es(),qe={},Wn=Ut,gt={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},qe.parse=sr,qe.resolve=function(s,c){return sr(s,!1,!0).resolve(c)},qe.resolveObject=function(s,c){return s?sr(s,!1,!0).resolveObject(c):c},qe.format=function(s){return gt.isString(s)&&(s=sr(s)),s instanceof ct?s.format():ct.prototype.format.call(s)},qe.Url=ct,qn=/^([a-z0-9.+-]+:)/i,$n=/:[0-9]*$/,Hn=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Vn=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),br=["'"].concat(Vn),Kr=["%","/","?",";","#"].concat(br),Gr=["/","?","#"],Qr=/^[+a-z0-9A-Z_-]{0,63}$/,zn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Kn={javascript:!0,"javascript:":!0},mr={javascript:!0,"javascript:":!0},$t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},yr=bt,ct.prototype.parse=function(s,c,o){if(!gt.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var l=s.indexOf("?"),h=l!==-1&&l<s.indexOf("#")?"?":"#",i=s.split(h);i[0]=i[0].replace(/\\/g,"/");var e=s=i.join(h);if(e=e.trim(),!o&&s.split("#").length===1){var r=Hn.exec(e);if(r)return this.path=e,this.href=e,this.pathname=r[1],r[2]?(this.search=r[2],this.query=c?yr.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this}var t=qn.exec(e);if(t){var n=(t=t[0]).toLowerCase();this.protocol=n,e=e.substr(t.length)}if(o||t||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var u=e.substr(0,2)==="//";!u||t&&mr[t]||(e=e.substr(2),this.slashes=!0)}if(!mr[t]&&(u||t&&!$t[t])){for(var f,d,g=-1,b=0;b<Gr.length;b++)(w=e.indexOf(Gr[b]))!==-1&&(g===-1||w<g)&&(g=w);for((d=g===-1?e.lastIndexOf("@"):e.lastIndexOf("@",g))!==-1&&(f=e.slice(0,d),e=e.slice(d+1),this.auth=decodeURIComponent(f)),g=-1,b=0;b<Kr.length;b++){var w;(w=e.indexOf(Kr[b]))!==-1&&(g===-1||w<g)&&(g=w)}g===-1&&(g=e.length),this.host=e.slice(0,g),e=e.slice(g),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var A=this.hostname.split(/\./),m=(b=0,A.length);b<m;b++){var v=A[b];if(v&&!v.match(Qr)){for(var j="",R=0,E=v.length;R<E;R++)v.charCodeAt(R)>127?j+="x":j+=v[R];if(!j.match(Qr)){var I=A.slice(0,b),C=A.slice(b+1),z=v.match(zn);z&&(I.push(z[1]),C.unshift(z[2])),C.length&&(e="/"+C.join(".")+e),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Wn.toASCII(this.hostname));var K=this.port?":"+this.port:"",be=this.hostname||"";this.host=be+K,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!Kn[n])for(b=0,m=br.length;b<m;b++){var L=br[b];if(e.indexOf(L)!==-1){var Q=encodeURIComponent(L);Q===L&&(Q=escape(L)),e=e.split(L).join(Q)}}var J=e.indexOf("#");J!==-1&&(this.hash=e.substr(J),e=e.slice(0,J));var F=e.indexOf("?");if(F!==-1?(this.search=e.substr(F),this.query=e.substr(F+1),c&&(this.query=yr.parse(this.query)),e=e.slice(0,F)):c&&(this.search="",this.query={}),e&&(this.pathname=e),$t[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){K=this.pathname||"";var ye=this.search||"";this.path=K+ye}return this.href=this.format(),this},ct.prototype.format=function(){var s=this.auth||"";s&&(s=(s=encodeURIComponent(s)).replace(/%3A/i,":"),s+="@");var c=this.protocol||"",o=this.pathname||"",l=this.hash||"",h=!1,i="";this.host?h=s+this.host:this.hostname&&(h=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&gt.isObject(this.query)&&Object.keys(this.query).length&&(i=yr.stringify(this.query));var e=this.search||i&&"?"+i||"";return c&&c.substr(-1)!==":"&&(c+=":"),this.slashes||(!c||$t[c])&&h!==!1?(h="//"+(h||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):h||(h=""),l&&l.charAt(0)!=="#"&&(l="#"+l),e&&e.charAt(0)!=="?"&&(e="?"+e),c+h+(o=o.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+(e=e.replace("#","%23"))+l},ct.prototype.resolve=function(s){return this.resolveObject(sr(s,!1,!0)).format()},ct.prototype.resolveObject=function(s){if(gt.isString(s)){var c=new ct;c.parse(s,!1,!0),s=c}for(var o=new ct,l=Object.keys(this),h=0;h<l.length;h++){var i=l[h];o[i]=this[i]}if(o.hash=s.hash,s.href==="")return o.href=o.format(),o;if(s.slashes&&!s.protocol){for(var e=Object.keys(s),r=0;r<e.length;r++){var t=e[r];t!=="protocol"&&(o[t]=s[t])}return $t[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(s.protocol&&s.protocol!==o.protocol){if(!$t[s.protocol]){for(var n=Object.keys(s),u=0;u<n.length;u++){var f=n[u];o[f]=s[f]}return o.href=o.format(),o}if(o.protocol=s.protocol,s.host||mr[s.protocol])o.pathname=s.pathname;else{for(var d=(s.pathname||"").split("/");d.length&&!(s.host=d.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),o.pathname=d.join("/")}if(o.search=s.search,o.query=s.query,o.host=s.host||"",o.auth=s.auth,o.hostname=s.hostname||s.host,o.port=s.port,o.pathname||o.search){var g=o.pathname||"",b=o.search||"";o.path=g+b}return o.slashes=o.slashes||s.slashes,o.href=o.format(),o}var w=o.pathname&&o.pathname.charAt(0)==="/",_=s.host||s.pathname&&s.pathname.charAt(0)==="/",A=_||w||o.host&&s.pathname,m=A,v=o.pathname&&o.pathname.split("/")||[],j=(d=s.pathname&&s.pathname.split("/")||[],o.protocol&&!$t[o.protocol]);if(j&&(o.hostname="",o.port=null,o.host&&(v[0]===""?v[0]=o.host:v.unshift(o.host)),o.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(d[0]===""?d[0]=s.host:d.unshift(s.host)),s.host=null),A=A&&(d[0]===""||v[0]==="")),_)o.host=s.host||s.host===""?s.host:o.host,o.hostname=s.hostname||s.hostname===""?s.hostname:o.hostname,o.search=s.search,o.query=s.query,v=d;else if(d.length)v||(v=[]),v.pop(),v=v.concat(d),o.search=s.search,o.query=s.query;else if(!gt.isNullOrUndefined(s.search))return j&&(o.hostname=o.host=v.shift(),(z=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=z.shift(),o.host=o.hostname=z.shift())),o.search=s.search,o.query=s.query,gt.isNull(o.pathname)&&gt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!v.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var R=v.slice(-1)[0],E=(o.host||s.host||v.length>1)&&(R==="."||R==="..")||R==="",I=0,C=v.length;C>=0;C--)(R=v[C])==="."?v.splice(C,1):R===".."?(v.splice(C,1),I++):I&&(v.splice(C,1),I--);if(!A&&!m)for(;I--;I)v.unshift("..");!A||v[0]===""||v[0]&&v[0].charAt(0)==="/"||v.unshift(""),E&&v.join("/").substr(-1)!=="/"&&v.push("");var z,K=v[0]===""||v[0]&&v[0].charAt(0)==="/";return j&&(o.hostname=o.host=K?"":v.length?v.shift():"",(z=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=z.shift(),o.host=o.hostname=z.shift())),(A=A||o.host&&v.length)&&!K&&v.unshift(""),v.length?o.pathname=v.join("/"):(o.pathname=null,o.path=null),gt.isNull(o.pathname)&&gt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=s.auth||o.auth,o.slashes=o.slashes||s.slashes,o.href=o.format(),o},ct.prototype.parseHost=function(){var s=this.host,c=$n.exec(s);c&&((c=c[0])!==":"&&(this.port=c.substr(1)),s=s.substr(0,s.length-c.length)),s&&(this.hostname=s)},qe.Url,qe.format,qe.resolve,qe.resolveObject,Tr={},gn=!1,bn=Ka(),Gn=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,qe.URL=typeof URL<"u"?URL:null,qe.pathToFileURL=Ja,qe.fileURLToPath=Ga,qe.Url,qe.format,qe.resolve,qe.resolveObject,qe.URL,ns=92,os=47,ss=97,as=122,Pr=Gn==="win32",ls=/\//g,us=/%/g,hs=/\\/g,cs=/\n/g,fs=/\r/g,ds=/\t/g,Qn=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,qe.URL=typeof URL<"u"?URL:null,qe.pathToFileURL=is,qe.fileURLToPath=rs,ps=qe.Url,gs=qe.format,bs=qe.resolve,ms=qe.resolveObject,ys=qe.parse,ws=qe.URL,_s=92,vs=47,Es=97,Ss=122,Cr=Qn==="win32",As=/\//g,Is=/%/g,ks=/\\/g,Ts=/\n/g,Os=/\r/g,Ps=/\t/g}),tl=ve((s,c)=>{ce(),de(),fe(),c.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),An=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferedDuplex=void 0,s.writev=l;var c=Xt(),o=(it(),He(rt));function l(i,e){let r=new Array(i.length);for(let t=0;t<i.length;t++)typeof i[t].chunk=="string"?r[t]=o.Buffer.from(i[t].chunk,"utf8"):r[t]=i[t].chunk;this._write(o.Buffer.concat(r),"binary",e)}var h=class extends c.Duplex{constructor(i,e,r){super({objectMode:!0}),this.proxy=e,this.socket=r,this.writeQueue=[],i.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",t=>{!this.destroyed&&this.readable&&this.push(t)})}_read(i){this.proxy.read(i)}_write(i,e,r){this.isSocketOpen?this.writeToProxy(i,e,r):this.writeQueue.push({chunk:i,encoding:e,cb:r})}_final(i){this.writeQueue=[],this.proxy.end(i)}_destroy(i,e){this.writeQueue=[],this.proxy.destroy(),e(i)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(i,e,r){this.proxy.write(i,e)===!1?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:i,encoding:e,cb:r}=this.writeQueue.shift();this.writeToProxy(i,e,r)}}};s.BufferedDuplex=h}),wr=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(s,"__esModule",{value:!0}),s.streamBuilder=s.browserStreamBuilder=void 0;var o=(it(),He(rt)),l=c(tl()),h=c(Ot()),i=Xt(),e=c(Lr()),r=An(),t=(0,h.default)("mqttjs:ws"),n=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(A,m){let v=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(v=A.transformWsUrl(v,A,m)),v}function f(A){let m=A;return A.port||(A.protocol==="wss"?m.port=443:m.port=80),A.path||(m.path="/"),A.wsOptions||(m.wsOptions={}),!e.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&n.forEach(v=>{Object.prototype.hasOwnProperty.call(A,v)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,v)&&(m.wsOptions[v]=A[v])}),m}function d(A){let m=f(A);if(m.hostname||(m.hostname=m.host),!m.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let v=new URL(document.URL);m.hostname=v.hostname,m.port||(m.port=Number(v.port))}return m.objectMode===void 0&&(m.objectMode=!(m.binary===!0||m.binary===void 0)),m}function g(A,m,v){t("createWebSocket"),t(`protocol: ${v.protocolId} ${v.protocolVersion}`);let j=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";t(`creating new Websocket for url: ${m} and protocol: ${j}`);let R;return v.createWebsocket?R=v.createWebsocket(m,[j],v):R=new l.default(m,[j],v.wsOptions),R}function b(A,m){let v=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt",j=u(m,A),R;return m.createWebsocket?R=m.createWebsocket(j,[v],m):R=new WebSocket(j,[v]),R.binaryType="arraybuffer",R}var w=(A,m)=>{t("streamBuilder");let v=f(m);v.hostname=v.hostname||v.host||"localhost";let j=u(v,A),R=g(A,j,v),E=l.default.createWebSocketStream(R,v.wsOptions);return E.url=j,R.on("close",()=>{E.destroy()}),E};s.streamBuilder=w;var _=(A,m)=>{t("browserStreamBuilder");let v,j=d(m).browserBufferSize||1024*512,R=m.browserBufferTimeout||1e3,E=!m.objectMode,I=b(A,m),C=K(m,F,ye);m.objectMode||(C._writev=r.writev.bind(C)),C.on("close",()=>{I.close()});let z=typeof I.addEventListener<"u";I.readyState===I.OPEN?(v=C,v.socket=I):(v=new r.BufferedDuplex(m,C,I),z?I.addEventListener("open",be):I.onopen=be),z?(I.addEventListener("close",L),I.addEventListener("error",Q),I.addEventListener("message",J)):(I.onclose=L,I.onerror=Q,I.onmessage=J);function K(me,pe,Te){let V=new i.Transform({objectMode:me.objectMode});return V._write=pe,V._flush=Te,V}function be(){t("WebSocket onOpen"),v instanceof r.BufferedDuplex&&v.socketReady()}function L(me){t("WebSocket onClose",me),v.end(),v.destroy()}function Q(me){t("WebSocket onError",me);let pe=new Error("WebSocket error");pe.event=me,v.destroy(pe)}async function J(me){if(!C||C.destroyed||!C.readable)return;let{data:pe}=me;pe instanceof ArrayBuffer?pe=o.Buffer.from(pe):pe instanceof Blob?pe=o.Buffer.from(await new Response(pe).arrayBuffer()):pe=o.Buffer.from(pe,"utf8"),C.push(pe)}function F(me,pe,Te){if(I.bufferedAmount>j){setTimeout(F,R,me,pe,Te);return}E&&typeof me=="string"&&(me=o.Buffer.from(me,"utf8"));try{I.send(me)}catch(V){return Te(V)}Te()}function ye(me){I.close(),me()}return v};s.browserStreamBuilder=_}),In={};rr(In,{Server:()=>Je,Socket:()=>Je,Stream:()=>Je,_createServerHandle:()=>Je,_normalizeArgs:()=>Je,_setSimultaneousAccepts:()=>Je,connect:()=>Je,createConnection:()=>Je,createServer:()=>Je,default:()=>Cs,isIP:()=>Je,isIPv4:()=>Je,isIPv6:()=>Je});function Je(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Cs,Rs=ot(()=>{ce(),de(),fe(),Cs={_createServerHandle:Je,_normalizeArgs:Je,_setSimultaneousAccepts:Je,connect:Je,createConnection:Je,createServer:Je,isIP:Je,isIPv4:Je,isIPv6:Je,Server:Je,Socket:Je,Stream:Je}}),Yn=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=c((Rs(),He(In))),l=c(Ot()),h=(0,l.default)("mqttjs:tcp"),i=(e,r)=>{r.port=r.port||1883,r.hostname=r.hostname||r.host||"localhost";let{port:t,path:n}=r,u=r.hostname;return h("port %d and host %s",t,u),o.default.createConnection({port:t,host:u,path:n})};s.default=i}),xs={};rr(xs,{default:()=>Bs});var Bs,rl=ot(()=>{ce(),de(),fe(),Bs={}}),Jn=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0});var o=c((rl(),He(xs))),l=c((Rs(),He(In))),h=c(Ot()),i=(0,h.default)("mqttjs:tls"),e=(r,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",l.default.isIP(t.host)===0&&(t.servername=t.host),t.rejectUnauthorized=t.rejectUnauthorized!==!1,delete t.path,i("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);let n=o.default.connect(t);n.on("secureConnect",()=>{t.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",u)});function u(f){t.rejectUnauthorized&&r.emit("error",f),n.end()}return n.on("error",u),n};s.default=e}),Xn=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(it(),He(rt)),o=Xt(),l=An(),h,i,e;function r(){let d=new o.Transform;return d._write=(g,b,w)=>{h.send({data:g.buffer,success(){w()},fail(_){w(new Error(_))}})},d._flush=g=>{h.close({success(){g()}})},d}function t(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function n(d,g){let b=d.protocol==="wxs"?"wss":"ws",w=`${b}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(w=`${b}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(w=d.transformWsUrl(w,d,g)),w}function u(){h.onOpen(()=>{e.socketReady()}),h.onMessage(d=>{let{data:g}=d;g instanceof ArrayBuffer?g=c.Buffer.from(g):g=c.Buffer.from(g,"utf8"),i.push(g)}),h.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),h.onError(d=>{let g=new Error(d.errMsg);e.destroy(g)})}var f=(d,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let b=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";t(g);let w=n(g,d);h=wx.connectSocket({url:w,protocols:[b]}),i=r(),e=new l.BufferedDuplex(g,i,h),e._destroy=(A,m)=>{h.close({success(){m&&m(A)}})};let _=e.destroy;return e.destroy=(A,m)=>(e.destroy=_,setTimeout(()=>{h.close({fail(){e._destroy(A,m)}})},0),e),u(),e};s.default=f}),Zn=ve(s=>{ce(),de(),fe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(it(),He(rt)),o=Xt(),l=An(),h,i,e,r=!1;function t(){let g=new o.Transform;return g._write=(b,w,_)=>{h.sendSocketMessage({data:b.buffer,success(){_()},fail(){_(new Error)}})},g._flush=b=>{h.closeSocket({success(){b()}})},g}function n(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function u(g,b){let w=g.protocol==="alis"?"wss":"ws",_=`${w}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(_=`${w}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(_=g.transformWsUrl(_,g,b)),_}function f(){r||(r=!0,h.onSocketOpen(()=>{e.socketReady()}),h.onSocketMessage(g=>{if(typeof g.data=="string"){let b=c.Buffer.from(g.data,"base64");i.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w instanceof ArrayBuffer?w=c.Buffer.from(w):w=c.Buffer.from(w,"utf8"),i.push(w)}),b.readAsArrayBuffer(g.data)}}),h.onSocketClose(()=>{e.end(),e.destroy()}),h.onSocketError(g=>{e.destroy(g)}))}var d=(g,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";n(b);let _=u(b,g);return h=b.my,h.connectSocket({url:_,protocols:w}),i=t(),e=new l.BufferedDuplex(b,i,h),f(),e};s.default=d}),il=ve(s=>{ce(),de(),fe();var c=s&&s.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.connectAsync=u;var o=c(Ot()),l=c((el(),He(ts))),h=c(ln()),i=c(Lr());typeof(Fe==null?void 0:Fe.nextTick)!="function"&&(Fe.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),r=null;function t(f){let d;f.auth&&(d=f.auth.match(/^(.+):(.+)$/),d?(f.username=d[1],f.password=d[2]):f.username=f.auth)}function n(f,d){var g,b,w;if(e("connecting to an MQTT broker..."),typeof f=="object"&&!d&&(d=f,f=""),d=d||{},f&&typeof f=="string"){let m=l.default.parse(f,!0),v={};if(m.port!=null&&(v.port=Number(m.port)),v.host=m.hostname,v.query=m.query,v.auth=m.auth,v.protocol=m.protocol,v.path=m.path,d=Object.assign(Object.assign({},v),d),!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||((g=d.protocol)===null||g===void 0?void 0:g.includes("+unix")),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!(!((b=d.protocol)===null||b===void 0)&&b.startsWith("ws"))&&!(!((w=d.protocol)===null||w===void 0)&&w.startsWith("wx"))&&delete d.path,t(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(r||(r={},!i.default&&!d.forceNativeWebSocket?(r.ws=wr().streamBuilder,r.wss=wr().streamBuilder,r.mqtt=Yn().default,r.tcp=Yn().default,r.ssl=Jn().default,r.tls=r.ssl,r.mqtts=Jn().default):(r.ws=wr().browserStreamBuilder,r.wss=wr().browserStreamBuilder,r.wx=Xn().default,r.wxs=Xn().default,r.ali=Zn().default,r.alis=Zn().default)),!r[d.protocol]){let m=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,j)=>m&&j%2===0?!1:typeof r[v]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function _(m){return d.servers&&((!m._reconnectCount||m._reconnectCount===d.servers.length)&&(m._reconnectCount=0),d.host=d.servers[m._reconnectCount].host,d.port=d.servers[m._reconnectCount].port,d.protocol=d.servers[m._reconnectCount].protocol?d.servers[m._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,m._reconnectCount++),e("calling streambuilder for",d.protocol),r[d.protocol](m,d)}let A=new h.default(_,d);return A.on("error",()=>{}),A}function u(f,d,g=!0){return new Promise((b,w)=>{let _=n(f,d),A={connect:v=>{m(),b(_)},end:()=>{m(),b(_)},error:v=>{m(),_.end(),w(v)}};g===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function m(){Object.keys(A).forEach(v=>{_.off(v,A[v])})}Object.keys(A).forEach(v=>{_.on(v,A[v])})})}s.default=n}),eo=ve(s=>{ce(),de(),fe();var c=s&&s.__createBinding||(Object.create?function(g,b,w,_){_===void 0&&(_=w);var A=Object.getOwnPropertyDescriptor(b,w);(!A||("get"in A?!b.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(g,_,A)}:function(g,b,w,_){_===void 0&&(_=w),g[_]=b[w]}),o=s&&s.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),l=s&&s.__importStar||function(){var g=function(b){return g=Object.getOwnPropertyNames||function(w){var _=[];for(var A in w)Object.prototype.hasOwnProperty.call(w,A)&&(_[_.length]=A);return _},g(b)};return function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var _=g(b),A=0;A<_.length;A++)_[A]!=="default"&&c(w,b,_[A]);return o(w,b),w}}(),h=s&&s.__exportStar||function(g,b){for(var w in g)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&c(b,g,w)},i=s&&s.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=s.KeepaliveManager=s.UniqueMessageIdProvider=s.DefaultMessageIdProvider=s.Store=s.MqttClient=s.connectAsync=s.connect=s.Client=void 0;var e=i(ln());s.MqttClient=e.default;var r=i(xo());s.DefaultMessageIdProvider=r.default;var t=i(Na());s.UniqueMessageIdProvider=t.default;var n=i(Bo());s.Store=n.default;var u=l(il());s.connect=u.default,Object.defineProperty(s,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var f=i(Qo());s.KeepaliveManager=f.default,s.Client=e.default,h(ln(),s),h(nr(),s);var d=Mr();Object.defineProperty(s,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),nl=ve(s=>{ce(),de(),fe();var c=s&&s.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var u=Object.getOwnPropertyDescriptor(r,t);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,u)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),o=s&&s.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),l=s&&s.__importStar||function(){var e=function(r){return e=Object.getOwnPropertyNames||function(t){var n=[];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[n.length]=u);return n},e(r)};return function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n=e(r),u=0;u<n.length;u++)n[u]!=="default"&&c(t,r,n[u]);return o(t,r),t}}(),h=s&&s.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&c(r,e,t)};Object.defineProperty(s,"__esModule",{value:!0});var i=l(eo());s.default=i,h(eo(),s)});const sl=nl();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/export{sl as default};
